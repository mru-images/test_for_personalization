"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ MusicPlayerApp; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/home.js\");\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/settings.js\");\n/* harmony import */ var _components_HomePage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/HomePage */ \"(app-pages-browser)/./components/HomePage.tsx\");\n/* harmony import */ var _components_SearchPage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/SearchPage */ \"(app-pages-browser)/./components/SearchPage.tsx\");\n/* harmony import */ var _components_SettingsPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/SettingsPage */ \"(app-pages-browser)/./components/SettingsPage.tsx\");\n/* harmony import */ var _components_PlaylistsPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/PlaylistsPage */ \"(app-pages-browser)/./components/PlaylistsPage.tsx\");\n/* harmony import */ var _components_LikedSongsPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/LikedSongsPage */ \"(app-pages-browser)/./components/LikedSongsPage.tsx\");\n/* harmony import */ var _components_MinimizedPlayer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/MinimizedPlayer */ \"(app-pages-browser)/./components/MinimizedPlayer.tsx\");\n/* harmony import */ var _components_MaximizedPlayer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/MaximizedPlayer */ \"(app-pages-browser)/./components/MaximizedPlayer.tsx\");\n/* harmony import */ var _components_CreatePlaylistModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/CreatePlaylistModal */ \"(app-pages-browser)/./components/CreatePlaylistModal.tsx\");\n/* harmony import */ var _components_AddToPlaylistModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/AddToPlaylistModal */ \"(app-pages-browser)/./components/AddToPlaylistModal.tsx\");\n/* harmony import */ var _components_AuthWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/AuthWrapper */ \"(app-pages-browser)/./components/AuthWrapper.tsx\");\n/* harmony import */ var _hooks_useAuth__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/hooks/useAuth */ \"(app-pages-browser)/./hooks/useAuth.ts\");\n/* harmony import */ var _hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/hooks/useSupabaseData */ \"(app-pages-browser)/./hooks/useSupabaseData.ts\");\n/* harmony import */ var _hooks_useQueue__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/hooks/useQueue */ \"(app-pages-browser)/./hooks/useQueue.ts\");\n/* harmony import */ var _hooks_useDynamicPlaylist__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/hooks/useDynamicPlaylist */ \"(app-pages-browser)/./hooks/useDynamicPlaylist.ts\");\n/* harmony import */ var _components_ThemeContext__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/components/ThemeContext */ \"(app-pages-browser)/./components/ThemeContext.tsx\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! react-hot-toast */ \"(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction MusicPlayerContent() {\n    _s();\n    const { user } = (0,_hooks_useAuth__WEBPACK_IMPORTED_MODULE_12__.useAuth)();\n    const { songs, playlists, likedSongs, lastPlayedSong, loading, toggleLike, createPlaylist, deletePlaylist, renamePlaylist, addSongToPlaylist, removeSongFromPlaylist, recordListeningHistory, stopCurrentSongTracking, getPersonalizedSongs } = (0,_hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_13__.useSupabaseData)(user);\n    const { queue, addToQueue, removeFromQueue, clearQueue, hasQueue } = (0,_hooks_useQueue__WEBPACK_IMPORTED_MODULE_14__.useQueue)();\n    const { initializePlaylist, getCurrentSong: getDynamicCurrentSong, moveToNext: moveToNextInPlaylist, moveToPrevious: moveToPreviousInPlaylist, addUserSelectedSong, getUpcomingSongs, resetPlaylist, hasNext, hasPrevious, isInitialized } = (0,_hooks_useDynamicPlaylist__WEBPACK_IMPORTED_MODULE_15__.useDynamicPlaylist)();\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"home\");\n    const [currentPage, setCurrentPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"main\");\n    const [currentSong, setCurrentSong] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isPlayerMaximized, setIsPlayerMaximized] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showCreatePlaylistModal, setShowCreatePlaylistModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showAddToPlaylistModal, setShowAddToPlaylistModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedSongForPlaylist, setSelectedSongForPlaylist] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasSetLastPlayedSong, setHasSetLastPlayedSong] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [lastPlayedSongDismissed, setLastPlayedSongDismissed] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { isDarkMode, toggleTheme } = (0,_components_ThemeContext__WEBPACK_IMPORTED_MODULE_16__.useTheme)();\n    const [displayCount, setDisplayCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(15);\n    const [imageUrls, setImageUrls] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [audioUrl, setAudioUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [duration, setDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [volume, setVolume] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0.75); // default 75%\n    const [isSeeking, setIsSeeking] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [pendingSeekTime, setPendingSeekTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isExternallySeeking, setIsExternallySeeking] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [usingDynamicPlaylist, setUsingDynamicPlaylist] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const loadMoreSongs = ()=>{\n        setDisplayCount((prev)=>prev + 15);\n    };\n    const displayedSongs = songs.slice(0, displayCount);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadAudio = async ()=>{\n            if (currentSong === null || currentSong === void 0 ? void 0 : currentSong.file_id) {\n                const url = \"/api/audio-proxy?fileid=\".concat(currentSong.file_id);\n                setAudioUrl(url);\n                setDuration(0);\n                setCurrentTime(0);\n                setPendingSeekTime(null);\n            }\n        };\n        loadAudio();\n    }, [\n        currentSong === null || currentSong === void 0 ? void 0 : currentSong.file_id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Initialize dynamic playlist when data is loaded\n        if (user && lastPlayedSong && !isInitialized && !lastPlayedSongDismissed) {\n            initializePlaylist(lastPlayedSong, getPersonalizedSongs, user.id);\n            setUsingDynamicPlaylist(true);\n        }\n    }, [\n        user,\n        lastPlayedSong,\n        isInitialized,\n        lastPlayedSongDismissed,\n        initializePlaylist,\n        getPersonalizedSongs\n    ]);\n    // Update current song from dynamic playlist\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (usingDynamicPlaylist && isInitialized) {\n            const dynamicCurrentSong = getDynamicCurrentSong();\n            if (dynamicCurrentSong && (!currentSong || currentSong.id !== dynamicCurrentSong.id)) {\n                setCurrentSong(dynamicCurrentSong);\n            }\n        }\n    }, [\n        usingDynamicPlaylist,\n        isInitialized,\n        getDynamicCurrentSong,\n        currentSong\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (audioRef.current) {\n            audioRef.current.volume = volume;\n        }\n    }, [\n        volume\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const audio = audioRef.current;\n        if (!audio) return;\n        if (!isNaN(audio.duration) && isPlaying) {\n            // Duration is valid, safe to play\n            audio.play().catch((e)=>{\n                console.error(\"Playback error:\", e);\n            });\n        } else if (!isPlaying) {\n            audio.pause();\n        }\n    }, [\n        isPlaying\n    ]);\n    // Load images for currently displayed songs\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const fetchImages = async ()=>{\n            const newUrls = {};\n            // Songs from the main feed\n            const songsToLoad = songs.slice(0, displayCount);\n            for (const song of songsToLoad){\n                if (!imageUrls[song.id]) {\n                    newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                }\n            }\n            // Songs from playlists\n            for (const playlist of playlists){\n                for (const song of playlist.songs){\n                    if (!imageUrls[song.id]) {\n                        newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                    }\n                }\n            }\n            // Liked songs\n            for (const song of likedSongs){\n                if (!imageUrls[song.id]) {\n                    newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                }\n            }\n            // Apply if new URLs found\n            if (Object.keys(newUrls).length > 0) {\n                setImageUrls((prev)=>({\n                        ...prev,\n                        ...newUrls\n                    }));\n            }\n        };\n        fetchImages();\n    }, [\n        displayCount,\n        songs,\n        playlists,\n        likedSongs\n    ]);\n    // Set last played song as current song when data loads (only once and if not dismissed)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadLastPlayedImage = async ()=>{\n            if (lastPlayedSong && !currentSong && !hasSetLastPlayedSong && !lastPlayedSongDismissed) {\n                setCurrentSong(lastPlayedSong);\n                setIsPlaying(false);\n                setHasSetLastPlayedSong(true);\n                if (!imageUrls[lastPlayedSong.img_id]) {\n                    const url = \"/api/image-proxy?fileid=\".concat(lastPlayedSong.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [lastPlayedSong.img_id]: url\n                        }));\n                }\n            }\n        };\n        loadLastPlayedImage();\n    }, [\n        lastPlayedSong,\n        currentSong,\n        hasSetLastPlayedSong,\n        lastPlayedSongDismissed,\n        imageUrls\n    ]);\n    const handleSongPlay = (song)=>{\n        if (usingDynamicPlaylist) {\n            // Add user-selected song to dynamic playlist\n            addUserSelectedSong(song);\n        }\n        setCurrentSong(song);\n        setIsPlaying(true);\n        setLastPlayedSongDismissed(false); // Reset dismissal when user actively plays a song\n        // Record listening history and update last song\n        recordListeningHistory(song.id);\n    };\n    const handleAddToQueue = (song)=>{\n        addToQueue(song);\n        react_hot_toast__WEBPACK_IMPORTED_MODULE_17__.toast.success('Added \"'.concat(song.name, '\" to queue'));\n    };\n    const togglePlay = ()=>{\n        setIsPlaying(!isPlaying);\n    };\n    const togglePlayerSize = ()=>{\n        setIsPlayerMaximized(!isPlayerMaximized);\n    };\n    const closePlayer = async ()=>{\n        // Stop tracking current song before closing\n        await stopCurrentSongTracking();\n        setCurrentSong(null);\n        setIsPlaying(false);\n        setIsPlayerMaximized(false);\n        setUsingDynamicPlaylist(false);\n        resetPlaylist();\n        // Mark last played song as dismissed so it won't auto-load again\n        setLastPlayedSongDismissed(true);\n    };\n    const handleToggleLike = (songId)=>{\n        toggleLike(songId);\n        // Update current song state if it's the one being liked/unliked\n        if (currentSong && currentSong.id === songId) {\n            setCurrentSong((prev)=>prev ? {\n                    ...prev,\n                    isLiked: !prev.isLiked\n                } : null);\n        }\n    };\n    const handlePrevious = ()=>{\n        if (!currentSong) return;\n        if (usingDynamicPlaylist && hasPrevious) {\n            const prevSong = moveToPreviousInPlaylist();\n            if (prevSong) {\n                setCurrentSong(prevSong);\n                setIsPlaying(true);\n                setLastPlayedSongDismissed(false);\n                recordListeningHistory(prevSong.id);\n                // Preload image\n                if (!imageUrls[prevSong.img_id]) {\n                    const newUrl = \"/api/image-proxy?fileid=\".concat(prevSong.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [prevSong.img_id]: newUrl\n                        }));\n                }\n            }\n            return;\n        }\n        // Fallback to regular song list navigation\n        const currentIndex = songs.findIndex((song)=>song.id === currentSong.id);\n        const prevIndex = currentIndex > 0 ? currentIndex - 1 : songs.length - 1;\n        const prevSong = songs[prevIndex];\n        setCurrentSong(prevSong);\n        setIsPlaying(true);\n        setLastPlayedSongDismissed(false);\n        recordListeningHistory(prevSong.id);\n        // Preload image\n        if (!imageUrls[prevSong.img_id]) {\n            const newUrl = \"/api/image-proxy?fileid=\".concat(prevSong.img_id);\n            setImageUrls((prev)=>({\n                    ...prev,\n                    [prevSong.img_id]: newUrl\n                }));\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!currentSong) return;\n        const currentIndex = songs.findIndex((song)=>song.id === currentSong.id);\n        const nextIndex = currentIndex < songs.length - 1 ? currentIndex + 1 : 0;\n        const nextSong = songs[nextIndex];\n        // Preload next song image if not in cache\n        if (nextSong && !imageUrls[nextSong.img_id]) {\n            const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n            setImageUrls((prev)=>({\n                    ...prev,\n                    [nextSong.img_id]: newUrl\n                }));\n        }\n    }, [\n        currentSong,\n        songs\n    ]);\n    const handleLoadedMetadata = async ()=>{\n        const audio = audioRef.current;\n        if (!audio) return;\n        const loadedDuration = audio.duration;\n        if (!isNaN(loadedDuration) && isFinite(loadedDuration)) {\n            setDuration(loadedDuration);\n            if (pendingSeekTime !== null) {\n                audio.currentTime = pendingSeekTime;\n                setCurrentTime(pendingSeekTime);\n                setPendingSeekTime(null);\n            } else {\n                setCurrentTime(audio.currentTime);\n            }\n            try {\n                if (isPlaying) {\n                    await audio.play();\n                }\n            } catch (err) {\n                console.error(\"Auto-play error after metadata load:\", err);\n            }\n        } else {\n            // Retry metadata read\n            setTimeout(handleLoadedMetadata, 100);\n        }\n    };\n    const handleNext = async ()=>{\n        if (!currentSong) return;\n        // Priority 1: Check manual queue first\n        if (hasQueue) {\n            const nextQueueSong = queue[0];\n            if (nextQueueSong) {\n                removeFromQueue(nextQueueSong.id);\n                setCurrentSong(nextQueueSong.song);\n                setIsPlaying(true);\n                setLastPlayedSongDismissed(false);\n                recordListeningHistory(nextQueueSong.song.id);\n                // Preload image\n                if (!imageUrls[nextQueueSong.song.img_id]) {\n                    const newUrl = \"/api/image-proxy?fileid=\".concat(nextQueueSong.song.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [nextQueueSong.song.img_id]: newUrl\n                        }));\n                }\n                return;\n            }\n        }\n        // Priority 2: Use dynamic playlist if available\n        if (usingDynamicPlaylist && hasNext) {\n            const nextSong = await moveToNextInPlaylist();\n            if (nextSong) {\n                setCurrentSong(nextSong);\n                setIsPlaying(true);\n                setLastPlayedSongDismissed(false);\n                recordListeningHistory(nextSong.id);\n                // Preload image\n                if (!imageUrls[nextSong.img_id]) {\n                    const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [nextSong.img_id]: newUrl\n                        }));\n                }\n                return;\n            }\n        }\n        // Priority 3: Fallback to regular song list navigation\n        const currentIndex = songs.findIndex((song)=>song.id === currentSong.id);\n        const nextIndex = currentIndex < songs.length - 1 ? currentIndex + 1 : 0;\n        const nextSong = songs[nextIndex];\n        setCurrentSong(nextSong);\n        setIsPlaying(true);\n        setLastPlayedSongDismissed(false);\n        recordListeningHistory(nextSong.id);\n        // Preload image in background\n        if (!imageUrls[nextSong.img_id]) {\n            const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n            setImageUrls((prev)=>({\n                    ...prev,\n                    [nextSong.img_id]: newUrl\n                }));\n        }\n    };\n    const formatNumber = (num)=>{\n        if (num >= 1000000) {\n            return (num / 1000000).toFixed(1) + \"M\";\n        } else if (num >= 1000) {\n            return (num / 1000).toFixed(1) + \"K\";\n        }\n        return num.toString();\n    };\n    const handleAddToPlaylist = (song)=>{\n        setSelectedSongForPlaylist(song);\n        setShowAddToPlaylistModal(true);\n    };\n    const handleSongEnd = async ()=>{\n        // Automatically move to next song when current song ends\n        await handleNext();\n    };\n    const renderContent = ()=>{\n        if (currentPage === \"playlists\") {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_PlaylistsPage__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                playlists: playlists,\n                onBack: ()=>setCurrentPage(\"main\"),\n                onSongPlay: handleSongPlay,\n                onAddToQueue: handleAddToQueue,\n                onCreatePlaylist: ()=>setShowCreatePlaylistModal(true),\n                onDeletePlaylist: deletePlaylist,\n                onRenamePlaylist: renamePlaylist,\n                onRemoveSongFromPlaylist: removeSongFromPlaylist,\n                imageUrls: imageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 427,\n                columnNumber: 9\n            }, this);\n        }\n        if (currentPage === \"liked\") {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LikedSongsPage__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                songs: likedSongs,\n                onBack: ()=>setCurrentPage(\"main\"),\n                onSongPlay: handleSongPlay,\n                onAddToQueue: handleAddToQueue,\n                imageUrls: imageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 442,\n                columnNumber: 14\n            }, this);\n        }\n        switch(activeTab){\n            case \"home\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_HomePage__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    songs: displayedSongs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    onLoadMore: loadMoreSongs,\n                    hasMoreSongs: displayCount < songs.length\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 447,\n                    columnNumber: 16\n                }, this);\n            case \"search\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SearchPage__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                    songs: songs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    setImageUrls: setImageUrls\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 458,\n                    columnNumber: 16\n                }, this);\n            case \"settings\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SettingsPage__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    onPlaylistsClick: ()=>setCurrentPage(\"playlists\"),\n                    onLikedClick: ()=>setCurrentPage(\"liked\")\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 468,\n                    columnNumber: 16\n                }, this);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_HomePage__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    songs: displayedSongs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    onLoadMore: loadMoreSongs,\n                    hasMoreSongs: displayCount < songs.length\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 470,\n                    columnNumber: 16\n                }, this);\n        }\n    };\n    const themeClasses = isDarkMode ? \"bg-gray-900 text-white\" : \"bg-gray-50 text-gray-900\";\n    const setCurrentTimeState = setCurrentTime;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen \".concat(themeClasses, \" relative overflow-hidden\"),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"transition-all duration-300 \".concat(currentSong ? \"pb-36\" : \"pb-20\"),\n                children: renderContent()\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 492,\n                columnNumber: 9\n            }, this),\n            currentPage === \"main\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed bottom-0 left-0 right-0 \".concat(isDarkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-200\", \" border-t z-30\"),\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-around py-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"home\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"home\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 506,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Home\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 507,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 500,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"search\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"search\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 515,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Search\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 516,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 509,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"settings\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"settings\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 524,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Settings\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 525,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 518,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 499,\n                    columnNumber: 13\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 498,\n                columnNumber: 11\n            }, this),\n            currentSong && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: !isPlayerMaximized ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MinimizedPlayer__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                    song: currentSong,\n                    isPlaying: isPlaying,\n                    imageUrl: imageUrls[currentSong.img_id],\n                    onTogglePlay: togglePlay,\n                    onMaximize: togglePlayerSize,\n                    onPrevious: handlePrevious,\n                    onNext: handleNext,\n                    onClose: closePlayer,\n                    onToggleLike: ()=>handleToggleLike(currentSong.id),\n                    formatNumber: formatNumber,\n                    currentTime: currentTime,\n                    duration: duration\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 535,\n                    columnNumber: 15\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MaximizedPlayer__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                    song: currentSong,\n                    isPlaying: isPlaying,\n                    imageUrl: imageUrls[currentSong.img_id],\n                    onTogglePlay: togglePlay,\n                    onMinimize: togglePlayerSize,\n                    onPrevious: handlePrevious,\n                    onNext: handleNext,\n                    onToggleLike: ()=>handleToggleLike(currentSong.id),\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: ()=>handleAddToPlaylist(currentSong),\n                    currentTime: currentTime,\n                    duration: duration,\n                    setCurrentTime: (seekTime)=>{\n                        if (audioRef.current && !isNaN(audioRef.current.duration)) {\n                            setIsExternallySeeking(true);\n                            audioRef.current.currentTime = seekTime;\n                            setCurrentTimeState(seekTime);\n                            setTimeout(()=>setIsExternallySeeking(false), 200);\n                        } else {\n                            setPendingSeekTime(seekTime); // Will apply onLoadedMetadata\n                        }\n                    },\n                    volume: volume,\n                    setVolume: setVolume,\n                    isSeeking: isSeeking,\n                    setIsSeeking: setIsSeeking,\n                    queue: usingDynamicPlaylist ? getUpcomingSongs().map((song)=>({\n                            id: \"\".concat(song.id, \"-upcoming\"),\n                            song,\n                            addedAt: new Date()\n                        })) : queue,\n                    onRemoveFromQueue: removeFromQueue,\n                    onSongPlay: handleSongPlay,\n                    imageUrls: imageUrls\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 550,\n                    columnNumber: 15\n                }, this)\n            }, void 0, false),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CreatePlaylistModal__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                isOpen: showCreatePlaylistModal,\n                onClose: ()=>setShowCreatePlaylistModal(false),\n                onCreatePlaylist: createPlaylist\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 595,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AddToPlaylistModal__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                isOpen: showAddToPlaylistModal,\n                onClose: ()=>{\n                    setShowAddToPlaylistModal(false);\n                    setSelectedSongForPlaylist(null);\n                },\n                song: selectedSongForPlaylist,\n                playlists: playlists,\n                onAddToPlaylist: addSongToPlaylist,\n                onCreatePlaylist: ()=>{\n                    setShowAddToPlaylistModal(false);\n                    setShowCreatePlaylistModal(true);\n                },\n                imageUrls: imageUrls,\n                setImageUrls: setImageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 601,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                ref: audioRef,\n                src: audioUrl !== null && audioUrl !== void 0 ? audioUrl : undefined,\n                onEnded: handleSongEnd,\n                onTimeUpdate: ()=>{\n                    if (audioRef.current && !isSeeking && !isExternallySeeking) {\n                        const current = audioRef.current.currentTime;\n                        // Only update state if the difference is significant\n                        if (Math.abs(currentTime - current) > 0.25) {\n                            setCurrentTime(current);\n                        }\n                    }\n                },\n                onLoadedMetadata: handleLoadedMetadata,\n                onVolumeChange: ()=>{\n                    if (audioRef.current) {\n                        setVolume(audioRef.current.volume);\n                    }\n                },\n                style: {\n                    display: \"none\"\n                }\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 617,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/app/page.tsx\",\n        lineNumber: 490,\n        columnNumber: 7\n    }, this);\n}\n_s(MusicPlayerContent, \"PX1vztvLbV3Y7v/gSGpmC6/tcWE=\", false, function() {\n    return [\n        _hooks_useAuth__WEBPACK_IMPORTED_MODULE_12__.useAuth,\n        _hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_13__.useSupabaseData,\n        _hooks_useQueue__WEBPACK_IMPORTED_MODULE_14__.useQueue,\n        _hooks_useDynamicPlaylist__WEBPACK_IMPORTED_MODULE_15__.useDynamicPlaylist,\n        _components_ThemeContext__WEBPACK_IMPORTED_MODULE_16__.useTheme\n    ];\n});\n_c = MusicPlayerContent;\nfunction MusicPlayerApp() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AuthWrapper__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_hot_toast__WEBPACK_IMPORTED_MODULE_17__.Toaster, {\n                position: \"bottom-center\"\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 648,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MusicPlayerContent, {}, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 649,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/app/page.tsx\",\n        lineNumber: 647,\n        columnNumber: 5\n    }, this);\n}\n_c1 = MusicPlayerApp;\nvar _c, _c1;\n$RefreshReg$(_c, \"MusicPlayerContent\");\n$RefreshReg$(_c1, \"MusicPlayerApp\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2FwcC9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRXFGO0FBQ25CO0FBQ3JCO0FBQ0k7QUFDSTtBQUNFO0FBQ0U7QUFDRTtBQUNBO0FBQ1E7QUFDRjtBQUNkO0FBQ1Q7QUFDZ0I7QUFDZDtBQUNvQjtBQUVYO0FBQ1A7QUFHOUMsU0FBU3lCOztJQUNQLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEdBQUdSLHdEQUFPQTtJQUN4QixNQUFNLEVBQ0pTLEtBQUssRUFDTEMsU0FBUyxFQUNUQyxVQUFVLEVBQ1ZDLGNBQWMsRUFDZEMsT0FBTyxFQUNQQyxVQUFVLEVBQ1ZDLGNBQWMsRUFDZEMsY0FBYyxFQUNkQyxjQUFjLEVBQ2RDLGlCQUFpQixFQUNqQkMsc0JBQXNCLEVBQ3RCQyxzQkFBc0IsRUFDdEJDLHVCQUF1QixFQUN2QkMsb0JBQW9CLEVBQ3JCLEdBQUdyQix3RUFBZUEsQ0FBQ087SUFFcEIsTUFBTSxFQUNKZSxLQUFLLEVBQ0xDLFVBQVUsRUFDVkMsZUFBZSxFQUNmQyxVQUFVLEVBQ1ZDLFFBQVEsRUFDVCxHQUFHekIsMERBQVFBO0lBRVosTUFBTSxFQUNKMEIsa0JBQWtCLEVBQ2xCQyxnQkFBZ0JDLHFCQUFxQixFQUNyQ0MsWUFBWUMsb0JBQW9CLEVBQ2hDQyxnQkFBZ0JDLHdCQUF3QixFQUN4Q0MsbUJBQW1CLEVBQ25CQyxnQkFBZ0IsRUFDaEJDLGFBQWEsRUFDYkMsT0FBTyxFQUNQQyxXQUFXLEVBQ1hDLGFBQWEsRUFDZCxHQUFHckMsOEVBQWtCQTtJQUV0QixNQUFNLENBQUNzQyxXQUFXQyxhQUFhLEdBQUczRCwrQ0FBUUEsQ0FBaUM7SUFDM0UsTUFBTSxDQUFDNEQsYUFBYUMsZUFBZSxHQUFHN0QsK0NBQVFBLENBQWlDO0lBQy9FLE1BQU0sQ0FBQzhELGFBQWFDLGVBQWUsR0FBRy9ELCtDQUFRQSxDQUFjO0lBQzVELE1BQU0sQ0FBQ2dFLFdBQVdDLGFBQWEsR0FBR2pFLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQ2tFLG1CQUFtQkMscUJBQXFCLEdBQUduRSwrQ0FBUUEsQ0FBQztJQUMzRCxNQUFNLENBQUNvRSx5QkFBeUJDLDJCQUEyQixHQUFHckUsK0NBQVFBLENBQUM7SUFDdkUsTUFBTSxDQUFDc0Usd0JBQXdCQywwQkFBMEIsR0FBR3ZFLCtDQUFRQSxDQUFDO0lBQ3JFLE1BQU0sQ0FBQ3dFLHlCQUF5QkMsMkJBQTJCLEdBQUd6RSwrQ0FBUUEsQ0FBYztJQUNwRixNQUFNLENBQUMwRSxzQkFBc0JDLHdCQUF3QixHQUFHM0UsK0NBQVFBLENBQUM7SUFDakUsTUFBTSxDQUFDNEUseUJBQXlCQywyQkFBMkIsR0FBRzdFLCtDQUFRQSxDQUFDO0lBQ3ZFLE1BQU0sRUFBRThFLFVBQVUsRUFBRUMsV0FBVyxFQUFFLEdBQUcxRCxtRUFBUUE7SUFDNUMsTUFBTSxDQUFDMkQsY0FBY0MsZ0JBQWdCLEdBQUdqRiwrQ0FBUUEsQ0FBQztJQUNqRCxNQUFNLENBQUNrRixXQUFXQyxhQUFhLEdBQUduRiwrQ0FBUUEsQ0FBeUIsQ0FBQztJQUNwRSxNQUFNLENBQUNvRixVQUFVQyxZQUFZLEdBQUdyRiwrQ0FBUUEsQ0FBZ0I7SUFDeEQsTUFBTXNGLFdBQVdwRiw2Q0FBTUEsQ0FBMEI7SUFDakQsTUFBTSxDQUFDcUYsYUFBYUMsZUFBZSxHQUFHeEYsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDeUYsVUFBVUMsWUFBWSxHQUFHMUYsK0NBQVFBLENBQUM7SUFDekMsTUFBTSxDQUFDMkYsUUFBUUMsVUFBVSxHQUFHNUYsK0NBQVFBLENBQUMsT0FBTyxjQUFjO0lBQzFELE1BQU0sQ0FBQzZGLFdBQVdDLGFBQWEsR0FBRzlGLCtDQUFRQSxDQUFDO0lBQzNDLE1BQU0sQ0FBQytGLGlCQUFpQkMsbUJBQW1CLEdBQUdoRywrQ0FBUUEsQ0FBZ0I7SUFDdEUsTUFBTSxDQUFDaUcscUJBQXFCQyx1QkFBdUIsR0FBR2xHLCtDQUFRQSxDQUFDO0lBQy9ELE1BQU0sQ0FBQ21HLHNCQUFzQkMsd0JBQXdCLEdBQUdwRywrQ0FBUUEsQ0FBQztJQUVuRSxNQUFNcUcsZ0JBQWdCO1FBQ3BCcEIsZ0JBQWdCcUIsQ0FBQUEsT0FBUUEsT0FBTztJQUNqQztJQUVBLE1BQU1DLGlCQUFpQjdFLE1BQU04RSxLQUFLLENBQUMsR0FBR3hCO0lBQ3RDL0UsZ0RBQVNBLENBQUM7UUFDUixNQUFNd0csWUFBWTtZQUNoQixJQUFJM0Msd0JBQUFBLGtDQUFBQSxZQUFhNEMsT0FBTyxFQUFFO2dCQUN4QixNQUFNQyxNQUFNLDJCQUErQyxPQUFwQjdDLFlBQVk0QyxPQUFPO2dCQUMxRHJCLFlBQVlzQjtnQkFFWmpCLFlBQVk7Z0JBQ1pGLGVBQWU7Z0JBQ2ZRLG1CQUFtQjtZQUNyQjtRQUNGO1FBRUFTO0lBQ0YsR0FBRztRQUFDM0Msd0JBQUFBLGtDQUFBQSxZQUFhNEMsT0FBTztLQUFDO0lBRXpCekcsZ0RBQVNBLENBQUM7UUFDUixrREFBa0Q7UUFDbEQsSUFBSXdCLFFBQVFJLGtCQUFrQixDQUFDNEIsaUJBQWlCLENBQUNtQix5QkFBeUI7WUFDeEUvQixtQkFBbUJoQixnQkFBZ0JVLHNCQUFzQmQsS0FBS21GLEVBQUU7WUFDaEVSLHdCQUF3QjtRQUMxQjtJQUNGLEdBQUc7UUFBQzNFO1FBQU1JO1FBQWdCNEI7UUFBZW1CO1FBQXlCL0I7UUFBb0JOO0tBQXFCO0lBRTNHLDRDQUE0QztJQUM1Q3RDLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSWtHLHdCQUF3QjFDLGVBQWU7WUFDekMsTUFBTW9ELHFCQUFxQjlEO1lBQzNCLElBQUk4RCxzQkFBdUIsRUFBQy9DLGVBQWVBLFlBQVk4QyxFQUFFLEtBQUtDLG1CQUFtQkQsRUFBRSxHQUFHO2dCQUNwRjdDLGVBQWU4QztZQUNqQjtRQUNGO0lBQ0YsR0FBRztRQUFDVjtRQUFzQjFDO1FBQWVWO1FBQXVCZTtLQUFZO0lBRTVFN0QsZ0RBQVNBLENBQUM7UUFDUixJQUFJcUYsU0FBU3dCLE9BQU8sRUFBRTtZQUNwQnhCLFNBQVN3QixPQUFPLENBQUNuQixNQUFNLEdBQUdBO1FBQzVCO0lBQ0YsR0FBRztRQUFDQTtLQUFPO0lBRVgxRixnREFBU0EsQ0FBQztRQUNSLE1BQU04RyxRQUFRekIsU0FBU3dCLE9BQU87UUFDOUIsSUFBSSxDQUFDQyxPQUFPO1FBRVosSUFBSSxDQUFDQyxNQUFNRCxNQUFNdEIsUUFBUSxLQUFLekIsV0FBVztZQUN2QyxrQ0FBa0M7WUFDbEMrQyxNQUFNRSxJQUFJLEdBQUdDLEtBQUssQ0FBQyxDQUFDQztnQkFDbEJDLFFBQVFDLEtBQUssQ0FBQyxtQkFBbUJGO1lBQ25DO1FBQ0YsT0FBTyxJQUFJLENBQUNuRCxXQUFXO1lBQ3JCK0MsTUFBTU8sS0FBSztRQUNiO0lBQ0YsR0FBRztRQUFDdEQ7S0FBVTtJQUtkLDRDQUE0QztJQUM1Qy9ELGdEQUFTQSxDQUFDO1FBQ1IsTUFBTXNILGNBQWM7WUFDbEIsTUFBTUMsVUFBa0MsQ0FBQztZQUV6QywyQkFBMkI7WUFDM0IsTUFBTUMsY0FBYy9GLE1BQU04RSxLQUFLLENBQUMsR0FBR3hCO1lBQ25DLEtBQUssTUFBTTBDLFFBQVFELFlBQWE7Z0JBQzlCLElBQUksQ0FBQ3ZDLFNBQVMsQ0FBQ3dDLEtBQUtkLEVBQUUsQ0FBQyxFQUFFO29CQUN2QlksT0FBTyxDQUFDRSxLQUFLZCxFQUFFLENBQUMsR0FBRywyQkFBdUMsT0FBWmMsS0FBS0MsTUFBTTtnQkFDM0Q7WUFDRjtZQUVBLHVCQUF1QjtZQUN2QixLQUFLLE1BQU1DLFlBQVlqRyxVQUFXO2dCQUNoQyxLQUFLLE1BQU0rRixRQUFRRSxTQUFTbEcsS0FBSyxDQUFFO29CQUNqQyxJQUFJLENBQUN3RCxTQUFTLENBQUN3QyxLQUFLZCxFQUFFLENBQUMsRUFBRTt3QkFDdkJZLE9BQU8sQ0FBQ0UsS0FBS2QsRUFBRSxDQUFDLEdBQUcsMkJBQXVDLE9BQVpjLEtBQUtDLE1BQU07b0JBQzNEO2dCQUNGO1lBQ0Y7WUFFQSxjQUFjO1lBQ2QsS0FBSyxNQUFNRCxRQUFROUYsV0FBWTtnQkFDN0IsSUFBSSxDQUFDc0QsU0FBUyxDQUFDd0MsS0FBS2QsRUFBRSxDQUFDLEVBQUU7b0JBQ3ZCWSxPQUFPLENBQUNFLEtBQUtkLEVBQUUsQ0FBQyxHQUFHLDJCQUF1QyxPQUFaYyxLQUFLQyxNQUFNO2dCQUMzRDtZQUNGO1lBRUEsMEJBQTBCO1lBQzFCLElBQUlFLE9BQU9DLElBQUksQ0FBQ04sU0FBU08sTUFBTSxHQUFHLEdBQUc7Z0JBQ25DNUMsYUFBYW1CLENBQUFBLE9BQVM7d0JBQUUsR0FBR0EsSUFBSTt3QkFBRSxHQUFHa0IsT0FBTztvQkFBQztZQUM5QztRQUNGO1FBRUFEO0lBQ0YsR0FBRztRQUFDdkM7UUFBY3REO1FBQU9DO1FBQVdDO0tBQVc7SUFJN0Msd0ZBQXdGO0lBQzFGM0IsZ0RBQVNBLENBQUM7UUFDUixNQUFNK0gsc0JBQXNCO1lBQzFCLElBQ0VuRyxrQkFDQSxDQUFDaUMsZUFDRCxDQUFDWSx3QkFDRCxDQUFDRSx5QkFDRDtnQkFDQWIsZUFBZWxDO2dCQUNmb0MsYUFBYTtnQkFDYlUsd0JBQXdCO2dCQUV4QixJQUFJLENBQUNPLFNBQVMsQ0FBQ3JELGVBQWU4RixNQUFNLENBQUMsRUFBRTtvQkFDckMsTUFBTWhCLE1BQU0sMkJBQWlELE9BQXRCOUUsZUFBZThGLE1BQU07b0JBQzVEeEMsYUFBYSxDQUFDbUIsT0FBVTs0QkFDdEIsR0FBR0EsSUFBSTs0QkFDUCxDQUFDekUsZUFBZThGLE1BQU0sQ0FBQyxFQUFFaEI7d0JBQzNCO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBcUI7SUFDRixHQUFHO1FBQUNuRztRQUFnQmlDO1FBQWFZO1FBQXNCRTtRQUF5Qk07S0FBVTtJQUd4RixNQUFNK0MsaUJBQWlCLENBQUNQO1FBQ3RCLElBQUl2QixzQkFBc0I7WUFDeEIsNkNBQTZDO1lBQzdDL0Msb0JBQW9Cc0U7UUFDdEI7UUFDQTNELGVBQWUyRDtRQUNmekQsYUFBYTtRQUNiWSwyQkFBMkIsUUFBUSxrREFBa0Q7UUFDckYsZ0RBQWdEO1FBQ2hEeEMsdUJBQXVCcUYsS0FBS2QsRUFBRTtJQUNoQztJQUVBLE1BQU1zQixtQkFBbUIsQ0FBQ1I7UUFDMUJqRixXQUFXaUY7UUFDWG5HLG1EQUFLQSxDQUFDNEcsT0FBTyxDQUFDLFVBQW9CLE9BQVZULEtBQUtVLElBQUksRUFBQztJQUNwQztJQUVFLE1BQU1DLGFBQWE7UUFDakJwRSxhQUFhLENBQUNEO0lBQ2hCO0lBRUEsTUFBTXNFLG1CQUFtQjtRQUN2Qm5FLHFCQUFxQixDQUFDRDtJQUN4QjtJQUVBLE1BQU1xRSxjQUFjO1FBQ2xCLDRDQUE0QztRQUM1QyxNQUFNakc7UUFDTnlCLGVBQWU7UUFDZkUsYUFBYTtRQUNiRSxxQkFBcUI7UUFDckJpQyx3QkFBd0I7UUFDeEI5QztRQUVBLGlFQUFpRTtRQUNqRXVCLDJCQUEyQjtJQUM3QjtJQUVBLE1BQU0yRCxtQkFBbUIsQ0FBQ0M7UUFDeEIxRyxXQUFXMEc7UUFFWCxnRUFBZ0U7UUFDaEUsSUFBSTNFLGVBQWVBLFlBQVk4QyxFQUFFLEtBQUs2QixRQUFRO1lBQzVDMUUsZUFBZXVDLENBQUFBLE9BQVFBLE9BQU87b0JBQUUsR0FBR0EsSUFBSTtvQkFBRW9DLFNBQVMsQ0FBQ3BDLEtBQUtvQyxPQUFPO2dCQUFDLElBQUk7UUFDdEU7SUFDRjtJQUVBLE1BQU1DLGlCQUFpQjtRQUNyQixJQUFJLENBQUM3RSxhQUFhO1FBRWxCLElBQUlxQyx3QkFBd0IzQyxhQUFhO1lBQ3ZDLE1BQU1vRixXQUFXekY7WUFDakIsSUFBSXlGLFVBQVU7Z0JBQ1o3RSxlQUFlNkU7Z0JBQ2YzRSxhQUFhO2dCQUNiWSwyQkFBMkI7Z0JBQzNCeEMsdUJBQXVCdUcsU0FBU2hDLEVBQUU7Z0JBRWxDLGdCQUFnQjtnQkFDaEIsSUFBSSxDQUFDMUIsU0FBUyxDQUFDMEQsU0FBU2pCLE1BQU0sQ0FBQyxFQUFFO29CQUMvQixNQUFNa0IsU0FBUywyQkFBMkMsT0FBaEJELFNBQVNqQixNQUFNO29CQUN6RHhDLGFBQWFtQixDQUFBQSxPQUFTOzRCQUFFLEdBQUdBLElBQUk7NEJBQUUsQ0FBQ3NDLFNBQVNqQixNQUFNLENBQUMsRUFBRWtCO3dCQUFPO2dCQUM3RDtZQUNGO1lBQ0E7UUFDRjtRQUVBLDJDQUEyQztRQUMzQyxNQUFNQyxlQUFlcEgsTUFBTXFILFNBQVMsQ0FBQ3JCLENBQUFBLE9BQVFBLEtBQUtkLEVBQUUsS0FBSzlDLFlBQVk4QyxFQUFFO1FBQ3ZFLE1BQU1vQyxZQUFZRixlQUFlLElBQUlBLGVBQWUsSUFBSXBILE1BQU1xRyxNQUFNLEdBQUc7UUFDdkUsTUFBTWEsV0FBV2xILEtBQUssQ0FBQ3NILFVBQVU7UUFFakNqRixlQUFlNkU7UUFDZjNFLGFBQWE7UUFDYlksMkJBQTJCO1FBQzNCeEMsdUJBQXVCdUcsU0FBU2hDLEVBQUU7UUFFbEMsZ0JBQWdCO1FBQ2hCLElBQUksQ0FBQzFCLFNBQVMsQ0FBQzBELFNBQVNqQixNQUFNLENBQUMsRUFBRTtZQUMvQixNQUFNa0IsU0FBUywyQkFBMkMsT0FBaEJELFNBQVNqQixNQUFNO1lBQ3pEeEMsYUFBYW1CLENBQUFBLE9BQVM7b0JBQUUsR0FBR0EsSUFBSTtvQkFBRSxDQUFDc0MsU0FBU2pCLE1BQU0sQ0FBQyxFQUFFa0I7Z0JBQU87UUFDN0Q7SUFDRjtJQUNGNUksZ0RBQVNBLENBQUM7UUFDUixJQUFJLENBQUM2RCxhQUFhO1FBRWxCLE1BQU1nRixlQUFlcEgsTUFBTXFILFNBQVMsQ0FBQ3JCLENBQUFBLE9BQVFBLEtBQUtkLEVBQUUsS0FBSzlDLFlBQVk4QyxFQUFFO1FBQ3ZFLE1BQU1xQyxZQUFZSCxlQUFlcEgsTUFBTXFHLE1BQU0sR0FBRyxJQUFJZSxlQUFlLElBQUk7UUFDdkUsTUFBTUksV0FBV3hILEtBQUssQ0FBQ3VILFVBQVU7UUFFakMsMENBQTBDO1FBQzFDLElBQUlDLFlBQVksQ0FBQ2hFLFNBQVMsQ0FBQ2dFLFNBQVN2QixNQUFNLENBQUMsRUFBRTtZQUMzQyxNQUFNa0IsU0FBUywyQkFBMkMsT0FBaEJLLFNBQVN2QixNQUFNO1lBQ3pEeEMsYUFBYW1CLENBQUFBLE9BQVM7b0JBQUUsR0FBR0EsSUFBSTtvQkFBRSxDQUFDNEMsU0FBU3ZCLE1BQU0sQ0FBQyxFQUFFa0I7Z0JBQU87UUFDN0Q7SUFDRixHQUFHO1FBQUMvRTtRQUFhcEM7S0FBTTtJQUV2QixNQUFNeUgsdUJBQXVCO1FBQzNCLE1BQU1wQyxRQUFRekIsU0FBU3dCLE9BQU87UUFDOUIsSUFBSSxDQUFDQyxPQUFPO1FBRVosTUFBTXFDLGlCQUFpQnJDLE1BQU10QixRQUFRO1FBRXJDLElBQUksQ0FBQ3VCLE1BQU1vQyxtQkFBbUJDLFNBQVNELGlCQUFpQjtZQUN0RDFELFlBQVkwRDtZQUVaLElBQUlyRCxvQkFBb0IsTUFBTTtnQkFDNUJnQixNQUFNeEIsV0FBVyxHQUFHUTtnQkFDcEJQLGVBQWVPO2dCQUNmQyxtQkFBbUI7WUFDckIsT0FBTztnQkFDTFIsZUFBZXVCLE1BQU14QixXQUFXO1lBQ2xDO1lBRUEsSUFBSTtnQkFDRixJQUFJdkIsV0FBVztvQkFDYixNQUFNK0MsTUFBTUUsSUFBSTtnQkFDbEI7WUFDRixFQUFFLE9BQU9xQyxLQUFLO2dCQUNabEMsUUFBUUMsS0FBSyxDQUFDLHdDQUF3Q2lDO1lBQ3hEO1FBRUYsT0FBTztZQUNMLHNCQUFzQjtZQUN0QkMsV0FBV0osc0JBQXNCO1FBQ25DO0lBQ0Y7SUFJRSxNQUFNSyxhQUFhO1FBQ2pCLElBQUksQ0FBQzFGLGFBQWE7UUFFbEIsdUNBQXVDO1FBQ3ZDLElBQUlsQixVQUFVO1lBQ1osTUFBTTZHLGdCQUFnQmpILEtBQUssQ0FBQyxFQUFFO1lBQzlCLElBQUlpSCxlQUFlO2dCQUNqQi9HLGdCQUFnQitHLGNBQWM3QyxFQUFFO2dCQUNoQzdDLGVBQWUwRixjQUFjL0IsSUFBSTtnQkFDakN6RCxhQUFhO2dCQUNiWSwyQkFBMkI7Z0JBQzNCeEMsdUJBQXVCb0gsY0FBYy9CLElBQUksQ0FBQ2QsRUFBRTtnQkFFNUMsZ0JBQWdCO2dCQUNoQixJQUFJLENBQUMxQixTQUFTLENBQUN1RSxjQUFjL0IsSUFBSSxDQUFDQyxNQUFNLENBQUMsRUFBRTtvQkFDekMsTUFBTWtCLFNBQVMsMkJBQXFELE9BQTFCWSxjQUFjL0IsSUFBSSxDQUFDQyxNQUFNO29CQUNuRXhDLGFBQWFtQixDQUFBQSxPQUFTOzRCQUFFLEdBQUdBLElBQUk7NEJBQUUsQ0FBQ21ELGNBQWMvQixJQUFJLENBQUNDLE1BQU0sQ0FBQyxFQUFFa0I7d0JBQU87Z0JBQ3ZFO2dCQUNBO1lBQ0Y7UUFDRjtRQUVBLGdEQUFnRDtRQUNoRCxJQUFJMUMsd0JBQXdCNUMsU0FBUztZQUNuQyxNQUFNMkYsV0FBVyxNQUFNakc7WUFDdkIsSUFBSWlHLFVBQVU7Z0JBQ1puRixlQUFlbUY7Z0JBQ2ZqRixhQUFhO2dCQUNiWSwyQkFBMkI7Z0JBQzNCeEMsdUJBQXVCNkcsU0FBU3RDLEVBQUU7Z0JBRWxDLGdCQUFnQjtnQkFDaEIsSUFBSSxDQUFDMUIsU0FBUyxDQUFDZ0UsU0FBU3ZCLE1BQU0sQ0FBQyxFQUFFO29CQUMvQixNQUFNa0IsU0FBUywyQkFBMkMsT0FBaEJLLFNBQVN2QixNQUFNO29CQUN6RHhDLGFBQWFtQixDQUFBQSxPQUFTOzRCQUFFLEdBQUdBLElBQUk7NEJBQUUsQ0FBQzRDLFNBQVN2QixNQUFNLENBQUMsRUFBRWtCO3dCQUFPO2dCQUM3RDtnQkFDQTtZQUNGO1FBQ0Y7UUFFQSx1REFBdUQ7UUFDdkQsTUFBTUMsZUFBZXBILE1BQU1xSCxTQUFTLENBQUNyQixDQUFBQSxPQUFRQSxLQUFLZCxFQUFFLEtBQUs5QyxZQUFZOEMsRUFBRTtRQUN2RSxNQUFNcUMsWUFBWUgsZUFBZXBILE1BQU1xRyxNQUFNLEdBQUcsSUFBSWUsZUFBZSxJQUFJO1FBQ3ZFLE1BQU1JLFdBQVd4SCxLQUFLLENBQUN1SCxVQUFVO1FBRWpDbEYsZUFBZW1GO1FBQ2ZqRixhQUFhO1FBQ2JZLDJCQUEyQjtRQUMzQnhDLHVCQUF1QjZHLFNBQVN0QyxFQUFFO1FBRWxDLDhCQUE4QjtRQUM5QixJQUFJLENBQUMxQixTQUFTLENBQUNnRSxTQUFTdkIsTUFBTSxDQUFDLEVBQUU7WUFDL0IsTUFBTWtCLFNBQVMsMkJBQTJDLE9BQWhCSyxTQUFTdkIsTUFBTTtZQUN6RHhDLGFBQWFtQixDQUFBQSxPQUFTO29CQUFFLEdBQUdBLElBQUk7b0JBQUUsQ0FBQzRDLFNBQVN2QixNQUFNLENBQUMsRUFBRWtCO2dCQUFPO1FBQzdEO0lBQ0Y7SUFLQSxNQUFNYSxlQUFlLENBQUNDO1FBQ3BCLElBQUlBLE9BQU8sU0FBUztZQUNsQixPQUFPLENBQUNBLE1BQU0sT0FBTSxFQUFHQyxPQUFPLENBQUMsS0FBSztRQUN0QyxPQUFPLElBQUlELE9BQU8sTUFBTTtZQUN0QixPQUFPLENBQUNBLE1BQU0sSUFBRyxFQUFHQyxPQUFPLENBQUMsS0FBSztRQUNuQztRQUNBLE9BQU9ELElBQUlFLFFBQVE7SUFDckI7SUFFQSxNQUFNQyxzQkFBc0IsQ0FBQ3BDO1FBQzNCakQsMkJBQTJCaUQ7UUFDM0JuRCwwQkFBMEI7SUFDNUI7SUFFQSxNQUFNd0YsZ0JBQWdCO1FBQ3BCLHlEQUF5RDtRQUN6RCxNQUFNUDtJQUNSO0lBRUEsTUFBTVEsZ0JBQWdCO1FBQ3BCLElBQUlwRyxnQkFBZ0IsYUFBYTtZQUMvQixxQkFDRSw4REFBQ2xELGlFQUFhQTtnQkFDWmlCLFdBQVdBO2dCQUNYc0ksUUFBUSxJQUFNcEcsZUFBZTtnQkFDN0JxRyxZQUFZakM7Z0JBQ1prQyxjQUFjakM7Z0JBQ2RrQyxrQkFBa0IsSUFBTS9GLDJCQUEyQjtnQkFDbkRnRyxrQkFBa0JwSTtnQkFDbEJxSSxrQkFBa0JwSTtnQkFDbEJxSSwwQkFBMEJuSTtnQkFDMUI4QyxXQUFXQTs7Ozs7O1FBR2pCO1FBRUEsSUFBSXRCLGdCQUFnQixTQUFTO1lBQzNCLHFCQUFPLDhEQUFDakQsa0VBQWNBO2dCQUFDZSxPQUFPRTtnQkFBWXFJLFFBQVEsSUFBTXBHLGVBQWU7Z0JBQVNxRyxZQUFZakM7Z0JBQWdCa0MsY0FBY2pDO2dCQUFrQmhELFdBQVdBOzs7Ozs7UUFDeko7UUFFQSxPQUFReEI7WUFDTixLQUFLO2dCQUNILHFCQUFPLDhEQUFDbkQsNERBQVFBO29CQUNSbUIsT0FBTzZFO29CQUNQMkQsWUFBWWpDO29CQUNaeUIsY0FBY0E7b0JBQ2RjLGlCQUFpQlY7b0JBQ2pCSyxjQUFjakM7b0JBQ2RoRCxXQUFXQTtvQkFDWHVGLFlBQVlwRTtvQkFDWnFFLGNBQWMxRixlQUFldEQsTUFBTXFHLE1BQU07Ozs7OztZQUVuRCxLQUFLO2dCQUNILHFCQUFPLDhEQUFDdkgsOERBQVVBO29CQUNaa0IsT0FBT0E7b0JBQ1B3SSxZQUFZakM7b0JBQ1p5QixjQUFjQTtvQkFDZGMsaUJBQWlCVjtvQkFDakJLLGNBQWNqQztvQkFDZGhELFdBQVdBO29CQUNYQyxjQUFjQTs7Ozs7O1lBRXRCLEtBQUs7Z0JBQ0gscUJBQU8sOERBQUMxRSxnRUFBWUE7b0JBQUNrSyxrQkFBa0IsSUFBTTlHLGVBQWU7b0JBQWMrRyxjQUFjLElBQU0vRyxlQUFlOzs7Ozs7WUFDL0c7Z0JBQ0UscUJBQU8sOERBQUN0RCw0REFBUUE7b0JBQ1ZtQixPQUFPNkU7b0JBQ1AyRCxZQUFZakM7b0JBQ1p5QixjQUFjQTtvQkFDZGMsaUJBQWlCVjtvQkFDakJLLGNBQWNqQztvQkFDZGhELFdBQVdBO29CQUNYdUYsWUFBWXBFO29CQUNacUUsY0FBYzFGLGVBQWV0RCxNQUFNcUcsTUFBTTs7Ozs7O1FBRW5EO0lBQ0Y7SUFFQSxNQUFNOEMsZUFBZS9GLGFBQ2pCLDJCQUNBO0lBQ04sTUFBTWdHLHNCQUFzQnRGO0lBRTFCLHFCQUVJLDhEQUFDdUY7UUFBSUMsV0FBVyxnQkFBNkIsT0FBYkgsY0FBYTs7MEJBRTNDLDhEQUFDRTtnQkFBSUMsV0FBVywrQkFBK0QsT0FBaENsSCxjQUFjLFVBQVU7MEJBQ3BFa0c7Ozs7OztZQUlGcEcsZ0JBQWdCLHdCQUNmLDhEQUFDbUg7Z0JBQUlDLFdBQVcsaUNBQXlHLE9BQXhFbEcsYUFBYSxnQ0FBZ0MsNEJBQTJCOzBCQUN2SCw0RUFBQ2lHO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ0M7NEJBQ0NDLFNBQVMsSUFBTXZILGFBQWE7NEJBQzVCcUgsV0FBVyw4REFFVixPQURDdEgsY0FBYyxTQUFTLG9CQUFvQm9CLGFBQWEsa0JBQWtCOzs4Q0FHNUUsOERBQUMxRSxpR0FBUUE7b0NBQUMrSyxNQUFNOzs7Ozs7OENBQ2hCLDhEQUFDQztvQ0FBS0osV0FBVTs4Q0FBVTs7Ozs7Ozs7Ozs7O3NDQUU1Qiw4REFBQ0M7NEJBQ0NDLFNBQVMsSUFBTXZILGFBQWE7NEJBQzVCcUgsV0FBVyw4REFFVixPQURDdEgsY0FBYyxXQUFXLG9CQUFvQm9CLGFBQWEsa0JBQWtCOzs4Q0FHOUUsOERBQUN6RSxpR0FBTUE7b0NBQUM4SyxNQUFNOzs7Ozs7OENBQ2QsOERBQUNDO29DQUFLSixXQUFVOzhDQUFVOzs7Ozs7Ozs7Ozs7c0NBRTVCLDhEQUFDQzs0QkFDQ0MsU0FBUyxJQUFNdkgsYUFBYTs0QkFDNUJxSCxXQUFXLDhEQUVWLE9BREN0SCxjQUFjLGFBQWEsb0JBQW9Cb0IsYUFBYSxrQkFBa0I7OzhDQUdoRiw4REFBQ3hFLGlHQUFRQTtvQ0FBQzZLLE1BQU07Ozs7Ozs4Q0FDaEIsOERBQUNDO29DQUFLSixXQUFVOzhDQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztZQU9qQ2xILDZCQUNDOzBCQUNHLENBQUNJLGtDQUNBLDhEQUFDdEQsbUVBQWVBO29CQUNkOEcsTUFBTTVEO29CQUNORSxXQUFXQTtvQkFDWHFILFVBQVVuRyxTQUFTLENBQUNwQixZQUFZNkQsTUFBTSxDQUFDO29CQUN2QzJELGNBQWNqRDtvQkFDZGtELFlBQVlqRDtvQkFDWmtELFlBQVk3QztvQkFDWjhDLFFBQVFqQztvQkFDUmtDLFNBQVNuRDtvQkFDVG9ELGNBQWMsSUFBTW5ELGlCQUFpQjFFLFlBQVk4QyxFQUFFO29CQUNuRDhDLGNBQWNBO29CQUNkbkUsYUFBYUE7b0JBQ2JFLFVBQVVBOzs7Ozt5Q0FHWiw4REFBQzVFLG1FQUFlQTtvQkFDZDZHLE1BQU01RDtvQkFDTkUsV0FBV0E7b0JBQ1hxSCxVQUFVbkcsU0FBUyxDQUFDcEIsWUFBWTZELE1BQU0sQ0FBQztvQkFDdkMyRCxjQUFjakQ7b0JBQ2R1RCxZQUFZdEQ7b0JBQ1prRCxZQUFZN0M7b0JBQ1o4QyxRQUFRakM7b0JBQ1JtQyxjQUFjLElBQU1uRCxpQkFBaUIxRSxZQUFZOEMsRUFBRTtvQkFDbkQ4QyxjQUFjQTtvQkFDZGMsaUJBQWlCLElBQU1WLG9CQUFvQmhHO29CQUMzQ3lCLGFBQWFBO29CQUNiRSxVQUFVQTtvQkFFWkQsZ0JBQWdCLENBQUNxRzt3QkFDN0IsSUFBSXZHLFNBQVN3QixPQUFPLElBQUksQ0FBQ0UsTUFBTTFCLFNBQVN3QixPQUFPLENBQUNyQixRQUFRLEdBQUc7NEJBQ3pEUyx1QkFBdUI7NEJBQ3ZCWixTQUFTd0IsT0FBTyxDQUFDdkIsV0FBVyxHQUFHc0c7NEJBQy9CZixvQkFBb0JlOzRCQUNwQnRDLFdBQVcsSUFBTXJELHVCQUF1QixRQUFRO3dCQUNsRCxPQUFPOzRCQUNMRixtQkFBbUI2RixXQUFXLDhCQUE4Qjt3QkFDOUQ7b0JBQ0Y7b0JBSWdCbEcsUUFBUUE7b0JBQ1JDLFdBQVdBO29CQUNYQyxXQUFXQTtvQkFDWEMsY0FBY0E7b0JBQ2R0RCxPQUFPMkQsdUJBQXVCOUMsbUJBQW1CeUksR0FBRyxDQUFDcEUsQ0FBQUEsT0FBUzs0QkFDNURkLElBQUksR0FBVyxPQUFSYyxLQUFLZCxFQUFFLEVBQUM7NEJBQ2ZjOzRCQUNBcUUsU0FBUyxJQUFJQzt3QkFDZixNQUFNeEo7b0JBQ055SixtQkFBbUJ2SjtvQkFDbkJ3SCxZQUFZakM7b0JBQ1ovQyxXQUFXQTs7Ozs7OzswQkFPbkIsOERBQUNwRSx1RUFBbUJBO2dCQUNsQm9MLFFBQVE5SDtnQkFDUnNILFNBQVMsSUFBTXJILDJCQUEyQjtnQkFDMUMrRixrQkFBa0JwSTs7Ozs7OzBCQUdwQiw4REFBQ2pCLHVFQUFrQkE7Z0JBQ2pCbUwsUUFBUTVIO2dCQUNSb0gsU0FBUztvQkFDUG5ILDBCQUEwQjtvQkFDMUJFLDJCQUEyQjtnQkFDN0I7Z0JBQ0FpRCxNQUFNbEQ7Z0JBQ043QyxXQUFXQTtnQkFDWDZJLGlCQUFpQnJJO2dCQUNqQmlJLGtCQUFrQjtvQkFDaEI3RiwwQkFBMEI7b0JBQzFCRiwyQkFBMkI7Z0JBQzdCO2dCQUNBYSxXQUFXQTtnQkFDWEMsY0FBY0E7Ozs7OzswQkFFaEIsOERBQUM0QjtnQkFDQ29GLEtBQUs3RztnQkFDTDhHLEtBQUtoSCxxQkFBQUEsc0JBQUFBLFdBQVlpSDtnQkFDakJDLFNBQVN2QztnQkFDVHdDLGNBQWM7b0JBQ2QsSUFBSWpILFNBQVN3QixPQUFPLElBQUksQ0FBQ2pCLGFBQWEsQ0FBQ0kscUJBQXFCO3dCQUMxRCxNQUFNYSxVQUFVeEIsU0FBU3dCLE9BQU8sQ0FBQ3ZCLFdBQVc7d0JBQzVDLHFEQUFxRDt3QkFDckQsSUFBSWlILEtBQUtDLEdBQUcsQ0FBQ2xILGNBQWN1QixXQUFXLE1BQU07NEJBQzFDdEIsZUFBZXNCO3dCQUNqQjtvQkFDRjtnQkFDRjtnQkFHRTRGLGtCQUFrQnZEO2dCQUNsQndELGdCQUFnQjtvQkFDZCxJQUFJckgsU0FBU3dCLE9BQU8sRUFBRTt3QkFDcEJsQixVQUFVTixTQUFTd0IsT0FBTyxDQUFDbkIsTUFBTTtvQkFDbkM7Z0JBQ0Y7Z0JBQ0FpSCxPQUFPO29CQUFFQyxTQUFTO2dCQUFPOzs7Ozs7Ozs7Ozs7QUFLbkM7R0EzbUJTckw7O1FBQ1VQLG9EQUFPQTtRQWdCcEJDLG9FQUFlQTtRQVFmQyxzREFBUUE7UUFhUkMsMEVBQWtCQTtRQVljQywrREFBUUE7OztLQWxEckNHO0FBNm1CTSxTQUFTc0w7SUFDdEIscUJBQ0UsOERBQUM5TCxnRUFBV0E7OzBCQUNWLDhEQUFDTSxxREFBT0E7Z0JBQUN5TCxVQUFTOzs7Ozs7MEJBQ2xCLDhEQUFDdkw7Ozs7Ozs7Ozs7O0FBR1A7TUFQd0JzTCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9hcHAvcGFnZS50c3g/NzYwMyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCBjcmVhdGVDb250ZXh0LCB1c2VDb250ZXh0LCB1c2VFZmZlY3QsdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgSG9tZSBhcyBIb21lSWNvbiwgU2VhcmNoLCBTZXR0aW5ncyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgSG9tZVBhZ2UgZnJvbSAnQC9jb21wb25lbnRzL0hvbWVQYWdlJztcbmltcG9ydCBTZWFyY2hQYWdlIGZyb20gJ0AvY29tcG9uZW50cy9TZWFyY2hQYWdlJztcbmltcG9ydCBTZXR0aW5nc1BhZ2UgZnJvbSAnQC9jb21wb25lbnRzL1NldHRpbmdzUGFnZSc7XG5pbXBvcnQgUGxheWxpc3RzUGFnZSBmcm9tICdAL2NvbXBvbmVudHMvUGxheWxpc3RzUGFnZSc7XG5pbXBvcnQgTGlrZWRTb25nc1BhZ2UgZnJvbSAnQC9jb21wb25lbnRzL0xpa2VkU29uZ3NQYWdlJztcbmltcG9ydCBNaW5pbWl6ZWRQbGF5ZXIgZnJvbSAnQC9jb21wb25lbnRzL01pbmltaXplZFBsYXllcic7XG5pbXBvcnQgTWF4aW1pemVkUGxheWVyIGZyb20gJ0AvY29tcG9uZW50cy9NYXhpbWl6ZWRQbGF5ZXInO1xuaW1wb3J0IENyZWF0ZVBsYXlsaXN0TW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL0NyZWF0ZVBsYXlsaXN0TW9kYWwnO1xuaW1wb3J0IEFkZFRvUGxheWxpc3RNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvQWRkVG9QbGF5bGlzdE1vZGFsJztcbmltcG9ydCBBdXRoV3JhcHBlciBmcm9tICdAL2NvbXBvbmVudHMvQXV0aFdyYXBwZXInO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvaG9va3MvdXNlQXV0aCc7XG5pbXBvcnQgeyB1c2VTdXBhYmFzZURhdGEgfSBmcm9tICdAL2hvb2tzL3VzZVN1cGFiYXNlRGF0YSc7XG5pbXBvcnQgeyB1c2VRdWV1ZSB9IGZyb20gJ0AvaG9va3MvdXNlUXVldWUnO1xuaW1wb3J0IHsgdXNlRHluYW1pY1BsYXlsaXN0IH0gZnJvbSAnQC9ob29rcy91c2VEeW5hbWljUGxheWxpc3QnO1xuaW1wb3J0IHsgU29uZyB9IGZyb20gJ0AvdHlwZXMnO1xuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tICdAL2NvbXBvbmVudHMvVGhlbWVDb250ZXh0JztcbmltcG9ydCB7VG9hc3Rlcix0b2FzdH0gZnJvbSAncmVhY3QtaG90LXRvYXN0JztcblxuXG5mdW5jdGlvbiBNdXNpY1BsYXllckNvbnRlbnQoKSB7XG4gIGNvbnN0IHsgdXNlciB9ID0gdXNlQXV0aCgpO1xuICBjb25zdCB7XG4gICAgc29uZ3MsXG4gICAgcGxheWxpc3RzLFxuICAgIGxpa2VkU29uZ3MsXG4gICAgbGFzdFBsYXllZFNvbmcsXG4gICAgbG9hZGluZyxcbiAgICB0b2dnbGVMaWtlLFxuICAgIGNyZWF0ZVBsYXlsaXN0LFxuICAgIGRlbGV0ZVBsYXlsaXN0LFxuICAgIHJlbmFtZVBsYXlsaXN0LFxuICAgIGFkZFNvbmdUb1BsYXlsaXN0LFxuICAgIHJlbW92ZVNvbmdGcm9tUGxheWxpc3QsXG4gICAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeSxcbiAgICBzdG9wQ3VycmVudFNvbmdUcmFja2luZyxcbiAgICBnZXRQZXJzb25hbGl6ZWRTb25nc1xuICB9ID0gdXNlU3VwYWJhc2VEYXRhKHVzZXIpO1xuICBcbiAgY29uc3Qge1xuICAgIHF1ZXVlLFxuICAgIGFkZFRvUXVldWUsXG4gICAgcmVtb3ZlRnJvbVF1ZXVlLFxuICAgIGNsZWFyUXVldWUsXG4gICAgaGFzUXVldWVcbiAgfSA9IHVzZVF1ZXVlKCk7XG4gIFxuICBjb25zdCB7XG4gICAgaW5pdGlhbGl6ZVBsYXlsaXN0LFxuICAgIGdldEN1cnJlbnRTb25nOiBnZXREeW5hbWljQ3VycmVudFNvbmcsXG4gICAgbW92ZVRvTmV4dDogbW92ZVRvTmV4dEluUGxheWxpc3QsXG4gICAgbW92ZVRvUHJldmlvdXM6IG1vdmVUb1ByZXZpb3VzSW5QbGF5bGlzdCxcbiAgICBhZGRVc2VyU2VsZWN0ZWRTb25nLFxuICAgIGdldFVwY29taW5nU29uZ3MsXG4gICAgcmVzZXRQbGF5bGlzdCxcbiAgICBoYXNOZXh0LFxuICAgIGhhc1ByZXZpb3VzLFxuICAgIGlzSW5pdGlhbGl6ZWRcbiAgfSA9IHVzZUR5bmFtaWNQbGF5bGlzdCgpO1xuXG4gIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZTwnaG9tZScgfCAnc2VhcmNoJyB8ICdzZXR0aW5ncyc+KCdob21lJyk7XG4gIGNvbnN0IFtjdXJyZW50UGFnZSwgc2V0Q3VycmVudFBhZ2VdID0gdXNlU3RhdGU8J21haW4nIHwgJ3BsYXlsaXN0cycgfCAnbGlrZWQnPignbWFpbicpO1xuICBjb25zdCBbY3VycmVudFNvbmcsIHNldEN1cnJlbnRTb25nXSA9IHVzZVN0YXRlPFNvbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzUGxheWluZywgc2V0SXNQbGF5aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzUGxheWVyTWF4aW1pemVkLCBzZXRJc1BsYXllck1heGltaXplZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93Q3JlYXRlUGxheWxpc3RNb2RhbCwgc2V0U2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0FkZFRvUGxheWxpc3RNb2RhbCwgc2V0U2hvd0FkZFRvUGxheWxpc3RNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzZWxlY3RlZFNvbmdGb3JQbGF5bGlzdCwgc2V0U2VsZWN0ZWRTb25nRm9yUGxheWxpc3RdID0gdXNlU3RhdGU8U29uZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaGFzU2V0TGFzdFBsYXllZFNvbmcsIHNldEhhc1NldExhc3RQbGF5ZWRTb25nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2xhc3RQbGF5ZWRTb25nRGlzbWlzc2VkLCBzZXRMYXN0UGxheWVkU29uZ0Rpc21pc3NlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHsgaXNEYXJrTW9kZSwgdG9nZ2xlVGhlbWUgfSA9IHVzZVRoZW1lKCk7XG4gIGNvbnN0IFtkaXNwbGF5Q291bnQsIHNldERpc3BsYXlDb3VudF0gPSB1c2VTdGF0ZSgxNSk7XG4gIGNvbnN0IFtpbWFnZVVybHMsIHNldEltYWdlVXJsc10gPSB1c2VTdGF0ZTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+Pih7fSk7XG4gIGNvbnN0IFthdWRpb1VybCwgc2V0QXVkaW9VcmxdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1ZGlvUmVmID0gdXNlUmVmPEhUTUxBdWRpb0VsZW1lbnQgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2N1cnJlbnRUaW1lLCBzZXRDdXJyZW50VGltZV0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2R1cmF0aW9uLCBzZXREdXJhdGlvbl0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW3ZvbHVtZSwgc2V0Vm9sdW1lXSA9IHVzZVN0YXRlKDAuNzUpOyAvLyBkZWZhdWx0IDc1JVxuICBjb25zdCBbaXNTZWVraW5nLCBzZXRJc1NlZWtpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcGVuZGluZ1NlZWtUaW1lLCBzZXRQZW5kaW5nU2Vla1RpbWVdID0gdXNlU3RhdGU8bnVtYmVyIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtpc0V4dGVybmFsbHlTZWVraW5nLCBzZXRJc0V4dGVybmFsbHlTZWVraW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3VzaW5nRHluYW1pY1BsYXlsaXN0LCBzZXRVc2luZ0R5bmFtaWNQbGF5bGlzdF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbmNvbnN0IGxvYWRNb3JlU29uZ3MgPSAoKSA9PiB7XG4gIHNldERpc3BsYXlDb3VudChwcmV2ID0+IHByZXYgKyAxNSk7XG59O1xuXG5jb25zdCBkaXNwbGF5ZWRTb25ncyA9IHNvbmdzLnNsaWNlKDAsIGRpc3BsYXlDb3VudCk7XG51c2VFZmZlY3QoKCkgPT4ge1xuICBjb25zdCBsb2FkQXVkaW8gPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRTb25nPy5maWxlX2lkKSB7XG4gICAgICBjb25zdCB1cmwgPSBgL2FwaS9hdWRpby1wcm94eT9maWxlaWQ9JHtjdXJyZW50U29uZy5maWxlX2lkfWA7XG4gICAgICBzZXRBdWRpb1VybCh1cmwpO1xuXG4gICAgICBzZXREdXJhdGlvbigwKTtcbiAgICAgIHNldEN1cnJlbnRUaW1lKDApO1xuICAgICAgc2V0UGVuZGluZ1NlZWtUaW1lKG51bGwpO1xuICAgIH1cbiAgfTtcblxuICBsb2FkQXVkaW8oKTtcbn0sIFtjdXJyZW50U29uZz8uZmlsZV9pZF0pO1xuXG51c2VFZmZlY3QoKCkgPT4ge1xuICAvLyBJbml0aWFsaXplIGR5bmFtaWMgcGxheWxpc3Qgd2hlbiBkYXRhIGlzIGxvYWRlZFxuICBpZiAodXNlciAmJiBsYXN0UGxheWVkU29uZyAmJiAhaXNJbml0aWFsaXplZCAmJiAhbGFzdFBsYXllZFNvbmdEaXNtaXNzZWQpIHtcbiAgICBpbml0aWFsaXplUGxheWxpc3QobGFzdFBsYXllZFNvbmcsIGdldFBlcnNvbmFsaXplZFNvbmdzLCB1c2VyLmlkKTtcbiAgICBzZXRVc2luZ0R5bmFtaWNQbGF5bGlzdCh0cnVlKTtcbiAgfVxufSwgW3VzZXIsIGxhc3RQbGF5ZWRTb25nLCBpc0luaXRpYWxpemVkLCBsYXN0UGxheWVkU29uZ0Rpc21pc3NlZCwgaW5pdGlhbGl6ZVBsYXlsaXN0LCBnZXRQZXJzb25hbGl6ZWRTb25nc10pO1xuXG4vLyBVcGRhdGUgY3VycmVudCBzb25nIGZyb20gZHluYW1pYyBwbGF5bGlzdFxudXNlRWZmZWN0KCgpID0+IHtcbiAgaWYgKHVzaW5nRHluYW1pY1BsYXlsaXN0ICYmIGlzSW5pdGlhbGl6ZWQpIHtcbiAgICBjb25zdCBkeW5hbWljQ3VycmVudFNvbmcgPSBnZXREeW5hbWljQ3VycmVudFNvbmcoKTtcbiAgICBpZiAoZHluYW1pY0N1cnJlbnRTb25nICYmICghY3VycmVudFNvbmcgfHwgY3VycmVudFNvbmcuaWQgIT09IGR5bmFtaWNDdXJyZW50U29uZy5pZCkpIHtcbiAgICAgIHNldEN1cnJlbnRTb25nKGR5bmFtaWNDdXJyZW50U29uZyk7XG4gICAgfVxuICB9XG59LCBbdXNpbmdEeW5hbWljUGxheWxpc3QsIGlzSW5pdGlhbGl6ZWQsIGdldER5bmFtaWNDdXJyZW50U29uZywgY3VycmVudFNvbmddKTtcblxudXNlRWZmZWN0KCgpID0+IHtcbiAgaWYgKGF1ZGlvUmVmLmN1cnJlbnQpIHtcbiAgICBhdWRpb1JlZi5jdXJyZW50LnZvbHVtZSA9IHZvbHVtZTtcbiAgfVxufSwgW3ZvbHVtZV0pO1xuXG51c2VFZmZlY3QoKCkgPT4ge1xuICBjb25zdCBhdWRpbyA9IGF1ZGlvUmVmLmN1cnJlbnQ7XG4gIGlmICghYXVkaW8pIHJldHVybjtcblxuICBpZiAoIWlzTmFOKGF1ZGlvLmR1cmF0aW9uKSAmJiBpc1BsYXlpbmcpIHtcbiAgICAvLyBEdXJhdGlvbiBpcyB2YWxpZCwgc2FmZSB0byBwbGF5XG4gICAgYXVkaW8ucGxheSgpLmNhdGNoKChlKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdQbGF5YmFjayBlcnJvcjonLCBlKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICghaXNQbGF5aW5nKSB7XG4gICAgYXVkaW8ucGF1c2UoKTtcbiAgfVxufSwgW2lzUGxheWluZ10pO1xuXG5cblxuXG4vLyBMb2FkIGltYWdlcyBmb3IgY3VycmVudGx5IGRpc3BsYXllZCBzb25nc1xudXNlRWZmZWN0KCgpID0+IHtcbiAgY29uc3QgZmV0Y2hJbWFnZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbmV3VXJsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuXG4gICAgLy8gU29uZ3MgZnJvbSB0aGUgbWFpbiBmZWVkXG4gICAgY29uc3Qgc29uZ3NUb0xvYWQgPSBzb25ncy5zbGljZSgwLCBkaXNwbGF5Q291bnQpO1xuICAgIGZvciAoY29uc3Qgc29uZyBvZiBzb25nc1RvTG9hZCkge1xuICAgICAgaWYgKCFpbWFnZVVybHNbc29uZy5pZF0pIHtcbiAgICAgICAgbmV3VXJsc1tzb25nLmlkXSA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke3NvbmcuaW1nX2lkfWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU29uZ3MgZnJvbSBwbGF5bGlzdHNcbiAgICBmb3IgKGNvbnN0IHBsYXlsaXN0IG9mIHBsYXlsaXN0cykge1xuICAgICAgZm9yIChjb25zdCBzb25nIG9mIHBsYXlsaXN0LnNvbmdzKSB7XG4gICAgICAgIGlmICghaW1hZ2VVcmxzW3NvbmcuaWRdKSB7XG4gICAgICAgICAgbmV3VXJsc1tzb25nLmlkXSA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke3NvbmcuaW1nX2lkfWA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBMaWtlZCBzb25nc1xuICAgIGZvciAoY29uc3Qgc29uZyBvZiBsaWtlZFNvbmdzKSB7XG4gICAgICBpZiAoIWltYWdlVXJsc1tzb25nLmlkXSkge1xuICAgICAgICBuZXdVcmxzW3NvbmcuaWRdID0gYC9hcGkvaW1hZ2UtcHJveHk/ZmlsZWlkPSR7c29uZy5pbWdfaWR9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBcHBseSBpZiBuZXcgVVJMcyBmb3VuZFxuICAgIGlmIChPYmplY3Qua2V5cyhuZXdVcmxzKS5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCAuLi5uZXdVcmxzIH0pKTtcbiAgICB9XG4gIH07XG5cbiAgZmV0Y2hJbWFnZXMoKTtcbn0sIFtkaXNwbGF5Q291bnQsIHNvbmdzLCBwbGF5bGlzdHMsIGxpa2VkU29uZ3NdKTtcblxuXG5cbiAgLy8gU2V0IGxhc3QgcGxheWVkIHNvbmcgYXMgY3VycmVudCBzb25nIHdoZW4gZGF0YSBsb2FkcyAob25seSBvbmNlIGFuZCBpZiBub3QgZGlzbWlzc2VkKVxudXNlRWZmZWN0KCgpID0+IHtcbiAgY29uc3QgbG9hZExhc3RQbGF5ZWRJbWFnZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoXG4gICAgICBsYXN0UGxheWVkU29uZyAmJlxuICAgICAgIWN1cnJlbnRTb25nICYmXG4gICAgICAhaGFzU2V0TGFzdFBsYXllZFNvbmcgJiZcbiAgICAgICFsYXN0UGxheWVkU29uZ0Rpc21pc3NlZFxuICAgICkge1xuICAgICAgc2V0Q3VycmVudFNvbmcobGFzdFBsYXllZFNvbmcpO1xuICAgICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICAgIHNldEhhc1NldExhc3RQbGF5ZWRTb25nKHRydWUpO1xuXG4gICAgICBpZiAoIWltYWdlVXJsc1tsYXN0UGxheWVkU29uZy5pbWdfaWRdKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke2xhc3RQbGF5ZWRTb25nLmltZ19pZH1gO1xuICAgICAgICBzZXRJbWFnZVVybHMoKHByZXYpID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBbbGFzdFBsYXllZFNvbmcuaW1nX2lkXTogdXJsXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgbG9hZExhc3RQbGF5ZWRJbWFnZSgpO1xufSwgW2xhc3RQbGF5ZWRTb25nLCBjdXJyZW50U29uZywgaGFzU2V0TGFzdFBsYXllZFNvbmcsIGxhc3RQbGF5ZWRTb25nRGlzbWlzc2VkLCBpbWFnZVVybHNdKTtcblxuXG4gIGNvbnN0IGhhbmRsZVNvbmdQbGF5ID0gKHNvbmc6IFNvbmcpID0+IHtcbiAgICBpZiAodXNpbmdEeW5hbWljUGxheWxpc3QpIHtcbiAgICAgIC8vIEFkZCB1c2VyLXNlbGVjdGVkIHNvbmcgdG8gZHluYW1pYyBwbGF5bGlzdFxuICAgICAgYWRkVXNlclNlbGVjdGVkU29uZyhzb25nKTtcbiAgICB9XG4gICAgc2V0Q3VycmVudFNvbmcoc29uZyk7XG4gICAgc2V0SXNQbGF5aW5nKHRydWUpO1xuICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTsgLy8gUmVzZXQgZGlzbWlzc2FsIHdoZW4gdXNlciBhY3RpdmVseSBwbGF5cyBhIHNvbmdcbiAgICAvLyBSZWNvcmQgbGlzdGVuaW5nIGhpc3RvcnkgYW5kIHVwZGF0ZSBsYXN0IHNvbmdcbiAgICByZWNvcmRMaXN0ZW5pbmdIaXN0b3J5KHNvbmcuaWQpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFkZFRvUXVldWUgPSAoc29uZzogU29uZykgPT4ge1xuICBhZGRUb1F1ZXVlKHNvbmcpO1xuICB0b2FzdC5zdWNjZXNzKGBBZGRlZCBcIiR7c29uZy5uYW1lfVwiIHRvIHF1ZXVlYCk7XG59O1xuXG4gIGNvbnN0IHRvZ2dsZVBsYXkgPSAoKSA9PiB7XG4gICAgc2V0SXNQbGF5aW5nKCFpc1BsYXlpbmcpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVBsYXllclNpemUgPSAoKSA9PiB7XG4gICAgc2V0SXNQbGF5ZXJNYXhpbWl6ZWQoIWlzUGxheWVyTWF4aW1pemVkKTtcbiAgfTtcblxuICBjb25zdCBjbG9zZVBsYXllciA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBTdG9wIHRyYWNraW5nIGN1cnJlbnQgc29uZyBiZWZvcmUgY2xvc2luZ1xuICAgIGF3YWl0IHN0b3BDdXJyZW50U29uZ1RyYWNraW5nKCk7XG4gICAgc2V0Q3VycmVudFNvbmcobnVsbCk7XG4gICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICBzZXRJc1BsYXllck1heGltaXplZChmYWxzZSk7XG4gICAgc2V0VXNpbmdEeW5hbWljUGxheWxpc3QoZmFsc2UpO1xuICAgIHJlc2V0UGxheWxpc3QoKTtcbiAgICBcbiAgICAvLyBNYXJrIGxhc3QgcGxheWVkIHNvbmcgYXMgZGlzbWlzc2VkIHNvIGl0IHdvbid0IGF1dG8tbG9hZCBhZ2FpblxuICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZUxpa2UgPSAoc29uZ0lkOiBzdHJpbmcpID0+IHtcbiAgICB0b2dnbGVMaWtlKHNvbmdJZCk7XG4gICAgXG4gICAgLy8gVXBkYXRlIGN1cnJlbnQgc29uZyBzdGF0ZSBpZiBpdCdzIHRoZSBvbmUgYmVpbmcgbGlrZWQvdW5saWtlZFxuICAgIGlmIChjdXJyZW50U29uZyAmJiBjdXJyZW50U29uZy5pZCA9PT0gc29uZ0lkKSB7XG4gICAgICBzZXRDdXJyZW50U29uZyhwcmV2ID0+IHByZXYgPyB7IC4uLnByZXYsIGlzTGlrZWQ6ICFwcmV2LmlzTGlrZWQgfSA6IG51bGwpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVQcmV2aW91cyA9ICgpID0+IHtcbiAgICBpZiAoIWN1cnJlbnRTb25nKSByZXR1cm47XG5cbiAgICBpZiAodXNpbmdEeW5hbWljUGxheWxpc3QgJiYgaGFzUHJldmlvdXMpIHtcbiAgICAgIGNvbnN0IHByZXZTb25nID0gbW92ZVRvUHJldmlvdXNJblBsYXlsaXN0KCk7XG4gICAgICBpZiAocHJldlNvbmcpIHtcbiAgICAgICAgc2V0Q3VycmVudFNvbmcocHJldlNvbmcpO1xuICAgICAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTtcbiAgICAgICAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeShwcmV2U29uZy5pZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcmVsb2FkIGltYWdlXG4gICAgICAgIGlmICghaW1hZ2VVcmxzW3ByZXZTb25nLmltZ19pZF0pIHtcbiAgICAgICAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtwcmV2U29uZy5pbWdfaWR9YDtcbiAgICAgICAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCBbcHJldlNvbmcuaW1nX2lkXTogbmV3VXJsIH0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEZhbGxiYWNrIHRvIHJlZ3VsYXIgc29uZyBsaXN0IG5hdmlnYXRpb25cbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBzb25ncy5maW5kSW5kZXgoc29uZyA9PiBzb25nLmlkID09PSBjdXJyZW50U29uZy5pZCk7XG4gICAgY29uc3QgcHJldkluZGV4ID0gY3VycmVudEluZGV4ID4gMCA/IGN1cnJlbnRJbmRleCAtIDEgOiBzb25ncy5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHByZXZTb25nID0gc29uZ3NbcHJldkluZGV4XTtcblxuICAgIHNldEN1cnJlbnRTb25nKHByZXZTb25nKTtcbiAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgc2V0TGFzdFBsYXllZFNvbmdEaXNtaXNzZWQoZmFsc2UpO1xuICAgIHJlY29yZExpc3RlbmluZ0hpc3RvcnkocHJldlNvbmcuaWQpO1xuXG4gICAgLy8gUHJlbG9hZCBpbWFnZVxuICAgIGlmICghaW1hZ2VVcmxzW3ByZXZTb25nLmltZ19pZF0pIHtcbiAgICAgIGNvbnN0IG5ld1VybCA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke3ByZXZTb25nLmltZ19pZH1gO1xuICAgICAgc2V0SW1hZ2VVcmxzKHByZXYgPT4gKHsgLi4ucHJldiwgW3ByZXZTb25nLmltZ19pZF06IG5ld1VybCB9KSk7XG4gICAgfVxuICB9O1xudXNlRWZmZWN0KCgpID0+IHtcbiAgaWYgKCFjdXJyZW50U29uZykgcmV0dXJuO1xuXG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IHNvbmdzLmZpbmRJbmRleChzb25nID0+IHNvbmcuaWQgPT09IGN1cnJlbnRTb25nLmlkKTtcbiAgY29uc3QgbmV4dEluZGV4ID0gY3VycmVudEluZGV4IDwgc29uZ3MubGVuZ3RoIC0gMSA/IGN1cnJlbnRJbmRleCArIDEgOiAwO1xuICBjb25zdCBuZXh0U29uZyA9IHNvbmdzW25leHRJbmRleF07XG5cbiAgLy8gUHJlbG9hZCBuZXh0IHNvbmcgaW1hZ2UgaWYgbm90IGluIGNhY2hlXG4gIGlmIChuZXh0U29uZyAmJiAhaW1hZ2VVcmxzW25leHRTb25nLmltZ19pZF0pIHtcbiAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtuZXh0U29uZy5pbWdfaWR9YDtcbiAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCBbbmV4dFNvbmcuaW1nX2lkXTogbmV3VXJsIH0pKTtcbiAgfVxufSwgW2N1cnJlbnRTb25nLCBzb25nc10pO1xuXG5jb25zdCBoYW5kbGVMb2FkZWRNZXRhZGF0YSA9IGFzeW5jICgpID0+IHtcbiAgY29uc3QgYXVkaW8gPSBhdWRpb1JlZi5jdXJyZW50O1xuICBpZiAoIWF1ZGlvKSByZXR1cm47XG5cbiAgY29uc3QgbG9hZGVkRHVyYXRpb24gPSBhdWRpby5kdXJhdGlvbjtcblxuICBpZiAoIWlzTmFOKGxvYWRlZER1cmF0aW9uKSAmJiBpc0Zpbml0ZShsb2FkZWREdXJhdGlvbikpIHtcbiAgICBzZXREdXJhdGlvbihsb2FkZWREdXJhdGlvbik7XG5cbiAgICBpZiAocGVuZGluZ1NlZWtUaW1lICE9PSBudWxsKSB7XG4gICAgICBhdWRpby5jdXJyZW50VGltZSA9IHBlbmRpbmdTZWVrVGltZTtcbiAgICAgIHNldEN1cnJlbnRUaW1lKHBlbmRpbmdTZWVrVGltZSk7XG4gICAgICBzZXRQZW5kaW5nU2Vla1RpbWUobnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldEN1cnJlbnRUaW1lKGF1ZGlvLmN1cnJlbnRUaW1lKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGlzUGxheWluZykge1xuICAgICAgICBhd2FpdCBhdWRpby5wbGF5KCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBdXRvLXBsYXkgZXJyb3IgYWZ0ZXIgbWV0YWRhdGEgbG9hZDonLCBlcnIpO1xuICAgIH1cblxuICB9IGVsc2Uge1xuICAgIC8vIFJldHJ5IG1ldGFkYXRhIHJlYWRcbiAgICBzZXRUaW1lb3V0KGhhbmRsZUxvYWRlZE1ldGFkYXRhLCAxMDApO1xuICB9XG59O1xuXG5cblxuICBjb25zdCBoYW5kbGVOZXh0ID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghY3VycmVudFNvbmcpIHJldHVybjtcblxuICAgIC8vIFByaW9yaXR5IDE6IENoZWNrIG1hbnVhbCBxdWV1ZSBmaXJzdFxuICAgIGlmIChoYXNRdWV1ZSkge1xuICAgICAgY29uc3QgbmV4dFF1ZXVlU29uZyA9IHF1ZXVlWzBdO1xuICAgICAgaWYgKG5leHRRdWV1ZVNvbmcpIHtcbiAgICAgICAgcmVtb3ZlRnJvbVF1ZXVlKG5leHRRdWV1ZVNvbmcuaWQpO1xuICAgICAgICBzZXRDdXJyZW50U29uZyhuZXh0UXVldWVTb25nLnNvbmcpO1xuICAgICAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTtcbiAgICAgICAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeShuZXh0UXVldWVTb25nLnNvbmcuaWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJlbG9hZCBpbWFnZVxuICAgICAgICBpZiAoIWltYWdlVXJsc1tuZXh0UXVldWVTb25nLnNvbmcuaW1nX2lkXSkge1xuICAgICAgICAgIGNvbnN0IG5ld1VybCA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke25leHRRdWV1ZVNvbmcuc29uZy5pbWdfaWR9YDtcbiAgICAgICAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCBbbmV4dFF1ZXVlU29uZy5zb25nLmltZ19pZF06IG5ld1VybCB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByaW9yaXR5IDI6IFVzZSBkeW5hbWljIHBsYXlsaXN0IGlmIGF2YWlsYWJsZVxuICAgIGlmICh1c2luZ0R5bmFtaWNQbGF5bGlzdCAmJiBoYXNOZXh0KSB7XG4gICAgICBjb25zdCBuZXh0U29uZyA9IGF3YWl0IG1vdmVUb05leHRJblBsYXlsaXN0KCk7XG4gICAgICBpZiAobmV4dFNvbmcpIHtcbiAgICAgICAgc2V0Q3VycmVudFNvbmcobmV4dFNvbmcpO1xuICAgICAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTtcbiAgICAgICAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeShuZXh0U29uZy5pZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcmVsb2FkIGltYWdlXG4gICAgICAgIGlmICghaW1hZ2VVcmxzW25leHRTb25nLmltZ19pZF0pIHtcbiAgICAgICAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtuZXh0U29uZy5pbWdfaWR9YDtcbiAgICAgICAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCBbbmV4dFNvbmcuaW1nX2lkXTogbmV3VXJsIH0pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJpb3JpdHkgMzogRmFsbGJhY2sgdG8gcmVndWxhciBzb25nIGxpc3QgbmF2aWdhdGlvblxuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHNvbmdzLmZpbmRJbmRleChzb25nID0+IHNvbmcuaWQgPT09IGN1cnJlbnRTb25nLmlkKTtcbiAgICBjb25zdCBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggPCBzb25ncy5sZW5ndGggLSAxID8gY3VycmVudEluZGV4ICsgMSA6IDA7XG4gICAgY29uc3QgbmV4dFNvbmcgPSBzb25nc1tuZXh0SW5kZXhdO1xuXG4gICAgc2V0Q3VycmVudFNvbmcobmV4dFNvbmcpO1xuICAgIHNldElzUGxheWluZyh0cnVlKTtcbiAgICBzZXRMYXN0UGxheWVkU29uZ0Rpc21pc3NlZChmYWxzZSk7XG4gICAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeShuZXh0U29uZy5pZCk7XG5cbiAgICAvLyBQcmVsb2FkIGltYWdlIGluIGJhY2tncm91bmRcbiAgICBpZiAoIWltYWdlVXJsc1tuZXh0U29uZy5pbWdfaWRdKSB7XG4gICAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtuZXh0U29uZy5pbWdfaWR9YDtcbiAgICAgIHNldEltYWdlVXJscyhwcmV2ID0+ICh7IC4uLnByZXYsIFtuZXh0U29uZy5pbWdfaWRdOiBuZXdVcmwgfSkpO1xuICAgIH1cbiAgfTtcblxuXG5cblxuICBjb25zdCBmb3JtYXROdW1iZXIgPSAobnVtOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgIGlmIChudW0gPj0gMTAwMDAwMCkge1xuICAgICAgcmV0dXJuIChudW0gLyAxMDAwMDAwKS50b0ZpeGVkKDEpICsgJ00nO1xuICAgIH0gZWxzZSBpZiAobnVtID49IDEwMDApIHtcbiAgICAgIHJldHVybiAobnVtIC8gMTAwMCkudG9GaXhlZCgxKSArICdLJztcbiAgICB9XG4gICAgcmV0dXJuIG51bS50b1N0cmluZygpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFkZFRvUGxheWxpc3QgPSAoc29uZzogU29uZykgPT4ge1xuICAgIHNldFNlbGVjdGVkU29uZ0ZvclBsYXlsaXN0KHNvbmcpO1xuICAgIHNldFNob3dBZGRUb1BsYXlsaXN0TW9kYWwodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU29uZ0VuZCA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBBdXRvbWF0aWNhbGx5IG1vdmUgdG8gbmV4dCBzb25nIHdoZW4gY3VycmVudCBzb25nIGVuZHNcbiAgICBhd2FpdCBoYW5kbGVOZXh0KCk7XG4gIH07XG5cbiAgY29uc3QgcmVuZGVyQ29udGVudCA9ICgpID0+IHtcbiAgICBpZiAoY3VycmVudFBhZ2UgPT09ICdwbGF5bGlzdHMnKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8UGxheWxpc3RzUGFnZSBcbiAgICAgICAgICBwbGF5bGlzdHM9e3BsYXlsaXN0c30gXG4gICAgICAgICAgb25CYWNrPXsoKSA9PiBzZXRDdXJyZW50UGFnZSgnbWFpbicpfSBcbiAgICAgICAgICBvblNvbmdQbGF5PXtoYW5kbGVTb25nUGxheX1cbiAgICAgICAgICBvbkFkZFRvUXVldWU9e2hhbmRsZUFkZFRvUXVldWV9XG4gICAgICAgICAgb25DcmVhdGVQbGF5bGlzdD17KCkgPT4gc2V0U2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWwodHJ1ZSl9XG4gICAgICAgICAgb25EZWxldGVQbGF5bGlzdD17ZGVsZXRlUGxheWxpc3R9XG4gICAgICAgICAgb25SZW5hbWVQbGF5bGlzdD17cmVuYW1lUGxheWxpc3R9XG4gICAgICAgICAgb25SZW1vdmVTb25nRnJvbVBsYXlsaXN0PXtyZW1vdmVTb25nRnJvbVBsYXlsaXN0fVxuICAgICAgICAgIGltYWdlVXJscz17aW1hZ2VVcmxzfVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGN1cnJlbnRQYWdlID09PSAnbGlrZWQnKSB7XG4gICAgICByZXR1cm4gPExpa2VkU29uZ3NQYWdlIHNvbmdzPXtsaWtlZFNvbmdzfSBvbkJhY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKCdtYWluJyl9IG9uU29uZ1BsYXk9e2hhbmRsZVNvbmdQbGF5fSBvbkFkZFRvUXVldWU9e2hhbmRsZUFkZFRvUXVldWV9IGltYWdlVXJscz17aW1hZ2VVcmxzfS8+O1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aXZlVGFiKSB7XG4gICAgICBjYXNlICdob21lJzpcbiAgICAgICAgcmV0dXJuIDxIb21lUGFnZVxuICAgICAgICAgICAgICAgIHNvbmdzPXtkaXNwbGF5ZWRTb25nc31cbiAgICAgICAgICAgICAgICBvblNvbmdQbGF5PXtoYW5kbGVTb25nUGxheX1cbiAgICAgICAgICAgICAgICBmb3JtYXROdW1iZXI9e2Zvcm1hdE51bWJlcn1cbiAgICAgICAgICAgICAgICBvbkFkZFRvUGxheWxpc3Q9e2hhbmRsZUFkZFRvUGxheWxpc3R9XG4gICAgICAgICAgICAgICAgb25BZGRUb1F1ZXVlPXtoYW5kbGVBZGRUb1F1ZXVlfVxuICAgICAgICAgICAgICAgIGltYWdlVXJscz17aW1hZ2VVcmxzfVxuICAgICAgICAgICAgICAgIG9uTG9hZE1vcmU9e2xvYWRNb3JlU29uZ3N9XG4gICAgICAgICAgICAgICAgaGFzTW9yZVNvbmdzPXtkaXNwbGF5Q291bnQgPCBzb25ncy5sZW5ndGh9XG4gICAgICAgICAgICAgIC8+O1xuICAgICAgY2FzZSAnc2VhcmNoJzpcbiAgICAgICAgcmV0dXJuIDxTZWFyY2hQYWdlXG4gICAgICAgICAgICAgIHNvbmdzPXtzb25nc31cbiAgICAgICAgICAgICAgb25Tb25nUGxheT17aGFuZGxlU29uZ1BsYXl9XG4gICAgICAgICAgICAgIGZvcm1hdE51bWJlcj17Zm9ybWF0TnVtYmVyfVxuICAgICAgICAgICAgICBvbkFkZFRvUGxheWxpc3Q9e2hhbmRsZUFkZFRvUGxheWxpc3R9XG4gICAgICAgICAgICAgIG9uQWRkVG9RdWV1ZT17aGFuZGxlQWRkVG9RdWV1ZX1cbiAgICAgICAgICAgICAgaW1hZ2VVcmxzPXtpbWFnZVVybHN9XG4gICAgICAgICAgICAgIHNldEltYWdlVXJscz17c2V0SW1hZ2VVcmxzfVxuICAgICAgICAgICAgLz47XG4gICAgICBjYXNlICdzZXR0aW5ncyc6XG4gICAgICAgIHJldHVybiA8U2V0dGluZ3NQYWdlIG9uUGxheWxpc3RzQ2xpY2s9eygpID0+IHNldEN1cnJlbnRQYWdlKCdwbGF5bGlzdHMnKX0gb25MaWtlZENsaWNrPXsoKSA9PiBzZXRDdXJyZW50UGFnZSgnbGlrZWQnKX0gLz47XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gPEhvbWVQYWdlXG4gICAgICAgICAgICAgIHNvbmdzPXtkaXNwbGF5ZWRTb25nc31cbiAgICAgICAgICAgICAgb25Tb25nUGxheT17aGFuZGxlU29uZ1BsYXl9XG4gICAgICAgICAgICAgIGZvcm1hdE51bWJlcj17Zm9ybWF0TnVtYmVyfVxuICAgICAgICAgICAgICBvbkFkZFRvUGxheWxpc3Q9e2hhbmRsZUFkZFRvUGxheWxpc3R9XG4gICAgICAgICAgICAgIG9uQWRkVG9RdWV1ZT17aGFuZGxlQWRkVG9RdWV1ZX1cbiAgICAgICAgICAgICAgaW1hZ2VVcmxzPXtpbWFnZVVybHN9XG4gICAgICAgICAgICAgIG9uTG9hZE1vcmU9e2xvYWRNb3JlU29uZ3N9XG4gICAgICAgICAgICAgIGhhc01vcmVTb25ncz17ZGlzcGxheUNvdW50IDwgc29uZ3MubGVuZ3RofVxuICAgICAgICAgICAgLz47XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHRoZW1lQ2xhc3NlcyA9IGlzRGFya01vZGUgXG4gICAgPyAnYmctZ3JheS05MDAgdGV4dC13aGl0ZScgXG4gICAgOiAnYmctZ3JheS01MCB0ZXh0LWdyYXktOTAwJztcbmNvbnN0IHNldEN1cnJlbnRUaW1lU3RhdGUgPSBzZXRDdXJyZW50VGltZTtcblxuICByZXR1cm4gKFxuICAgIFxuICAgICAgPGRpdiBjbGFzc05hbWU9e2BtaW4taC1zY3JlZW4gJHt0aGVtZUNsYXNzZXN9IHJlbGF0aXZlIG92ZXJmbG93LWhpZGRlbmB9PlxuICAgICAgICB7LyogTWFpbiBDb250ZW50ICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCAke2N1cnJlbnRTb25nID8gJ3BiLTM2JyA6ICdwYi0yMCd9YH0+XG4gICAgICAgICAge3JlbmRlckNvbnRlbnQoKX1cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgey8qIEJvdHRvbSBOYXZpZ2F0aW9uICovfVxuICAgICAgICB7Y3VycmVudFBhZ2UgPT09ICdtYWluJyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BmaXhlZCBib3R0b20tMCBsZWZ0LTAgcmlnaHQtMCAke2lzRGFya01vZGUgPyAnYmctZ3JheS04MDAgYm9yZGVyLWdyYXktNzAwJyA6ICdiZy13aGl0ZSBib3JkZXItZ3JheS0yMDAnfSBib3JkZXItdCB6LTMwYH0+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYXJvdW5kIHB5LTNcIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYignaG9tZScpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHNwYWNlLXktMSBwLTIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYiA9PT0gJ2hvbWUnID8gJ3RleHQtcHVycGxlLTQwMCcgOiBpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS00MDAnIDogJ3RleHQtZ3JheS02MDAnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8SG9tZUljb24gc2l6ZT17MjR9IC8+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC14c1wiPkhvbWU8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdzZWFyY2gnKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBzcGFjZS15LTEgcC0yIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICBhY3RpdmVUYWIgPT09ICdzZWFyY2gnID8gJ3RleHQtcHVycGxlLTQwMCcgOiBpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS00MDAnIDogJ3RleHQtZ3JheS02MDAnXG4gICAgICAgICAgICAgICAgfWB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8U2VhcmNoIHNpemU9ezI0fSAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHNcIj5TZWFyY2g8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0QWN0aXZlVGFiKCdzZXR0aW5ncycpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIHNwYWNlLXktMSBwLTIgdHJhbnNpdGlvbi1jb2xvcnMgJHtcbiAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYiA9PT0gJ3NldHRpbmdzJyA/ICd0ZXh0LXB1cnBsZS00MDAnIDogaXNEYXJrTW9kZSA/ICd0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktNjAwJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNldHRpbmdzIHNpemU9ezI0fSAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHNcIj5TZXR0aW5nczwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogTXVzaWMgUGxheWVyIC0gT25seSBzaG93IGlmIGN1cnJlbnRTb25nIGV4aXN0cyAqL31cbiAgICAgICAge2N1cnJlbnRTb25nICYmIChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgeyFpc1BsYXllck1heGltaXplZCA/IChcbiAgICAgICAgICAgICAgPE1pbmltaXplZFBsYXllclxuICAgICAgICAgICAgICAgIHNvbmc9e2N1cnJlbnRTb25nfVxuICAgICAgICAgICAgICAgIGlzUGxheWluZz17aXNQbGF5aW5nfVxuICAgICAgICAgICAgICAgIGltYWdlVXJsPXtpbWFnZVVybHNbY3VycmVudFNvbmcuaW1nX2lkXX1cbiAgICAgICAgICAgICAgICBvblRvZ2dsZVBsYXk9e3RvZ2dsZVBsYXl9XG4gICAgICAgICAgICAgICAgb25NYXhpbWl6ZT17dG9nZ2xlUGxheWVyU2l6ZX1cbiAgICAgICAgICAgICAgICBvblByZXZpb3VzPXtoYW5kbGVQcmV2aW91c31cbiAgICAgICAgICAgICAgICBvbk5leHQ9e2hhbmRsZU5leHR9XG4gICAgICAgICAgICAgICAgb25DbG9zZT17Y2xvc2VQbGF5ZXJ9XG4gICAgICAgICAgICAgICAgb25Ub2dnbGVMaWtlPXsoKSA9PiBoYW5kbGVUb2dnbGVMaWtlKGN1cnJlbnRTb25nLmlkKX1cbiAgICAgICAgICAgICAgICBmb3JtYXROdW1iZXI9e2Zvcm1hdE51bWJlcn1cbiAgICAgICAgICAgICAgICBjdXJyZW50VGltZT17Y3VycmVudFRpbWV9XG4gICAgICAgICAgICAgICAgZHVyYXRpb249e2R1cmF0aW9ufVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgPE1heGltaXplZFBsYXllclxuICAgICAgICAgICAgICAgIHNvbmc9e2N1cnJlbnRTb25nfVxuICAgICAgICAgICAgICAgIGlzUGxheWluZz17aXNQbGF5aW5nfVxuICAgICAgICAgICAgICAgIGltYWdlVXJsPXtpbWFnZVVybHNbY3VycmVudFNvbmcuaW1nX2lkXX1cbiAgICAgICAgICAgICAgICBvblRvZ2dsZVBsYXk9e3RvZ2dsZVBsYXl9XG4gICAgICAgICAgICAgICAgb25NaW5pbWl6ZT17dG9nZ2xlUGxheWVyU2l6ZX1cbiAgICAgICAgICAgICAgICBvblByZXZpb3VzPXtoYW5kbGVQcmV2aW91c31cbiAgICAgICAgICAgICAgICBvbk5leHQ9e2hhbmRsZU5leHR9XG4gICAgICAgICAgICAgICAgb25Ub2dnbGVMaWtlPXsoKSA9PiBoYW5kbGVUb2dnbGVMaWtlKGN1cnJlbnRTb25nLmlkKX1cbiAgICAgICAgICAgICAgICBmb3JtYXROdW1iZXI9e2Zvcm1hdE51bWJlcn1cbiAgICAgICAgICAgICAgICBvbkFkZFRvUGxheWxpc3Q9eygpID0+IGhhbmRsZUFkZFRvUGxheWxpc3QoY3VycmVudFNvbmcpfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lPXtjdXJyZW50VGltZX1cbiAgICAgICAgICAgICAgICBkdXJhdGlvbj17ZHVyYXRpb259XG5cbiAgICAgICAgICAgICAgc2V0Q3VycmVudFRpbWU9eyhzZWVrVGltZSkgPT4ge1xuICBpZiAoYXVkaW9SZWYuY3VycmVudCAmJiAhaXNOYU4oYXVkaW9SZWYuY3VycmVudC5kdXJhdGlvbikpIHtcbiAgICBzZXRJc0V4dGVybmFsbHlTZWVraW5nKHRydWUpO1xuICAgIGF1ZGlvUmVmLmN1cnJlbnQuY3VycmVudFRpbWUgPSBzZWVrVGltZTtcbiAgICBzZXRDdXJyZW50VGltZVN0YXRlKHNlZWtUaW1lKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHNldElzRXh0ZXJuYWxseVNlZWtpbmcoZmFsc2UpLCAyMDApO1xuICB9IGVsc2Uge1xuICAgIHNldFBlbmRpbmdTZWVrVGltZShzZWVrVGltZSk7IC8vIFdpbGwgYXBwbHkgb25Mb2FkZWRNZXRhZGF0YVxuICB9XG59fVxuXG5cblxuICAgICAgICAgICAgICAgIHZvbHVtZT17dm9sdW1lfVxuICAgICAgICAgICAgICAgIHNldFZvbHVtZT17c2V0Vm9sdW1lfVxuICAgICAgICAgICAgICAgIGlzU2Vla2luZz17aXNTZWVraW5nfVxuICAgICAgICAgICAgICAgIHNldElzU2Vla2luZz17c2V0SXNTZWVraW5nfVxuICAgICAgICAgICAgICAgIHF1ZXVlPXt1c2luZ0R5bmFtaWNQbGF5bGlzdCA/IGdldFVwY29taW5nU29uZ3MoKS5tYXAoc29uZyA9PiAoe1xuICAgICAgICAgICAgICAgICAgaWQ6IGAke3NvbmcuaWR9LXVwY29taW5nYCxcbiAgICAgICAgICAgICAgICAgIHNvbmcsXG4gICAgICAgICAgICAgICAgICBhZGRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgICAgICAgICAgfSkpIDogcXVldWV9XG4gICAgICAgICAgICAgICAgb25SZW1vdmVGcm9tUXVldWU9e3JlbW92ZUZyb21RdWV1ZX1cbiAgICAgICAgICAgICAgICBvblNvbmdQbGF5PXtoYW5kbGVTb25nUGxheX1cbiAgICAgICAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC8+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIE1vZGFscyAqL31cbiAgICAgICAgPENyZWF0ZVBsYXlsaXN0TW9kYWxcbiAgICAgICAgICBpc09wZW49e3Nob3dDcmVhdGVQbGF5bGlzdE1vZGFsfVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldFNob3dDcmVhdGVQbGF5bGlzdE1vZGFsKGZhbHNlKX1cbiAgICAgICAgICBvbkNyZWF0ZVBsYXlsaXN0PXtjcmVhdGVQbGF5bGlzdH1cbiAgICAgICAgLz5cblxuICAgICAgICA8QWRkVG9QbGF5bGlzdE1vZGFsXG4gICAgICAgICAgaXNPcGVuPXtzaG93QWRkVG9QbGF5bGlzdE1vZGFsfVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgICAgIHNldFNob3dBZGRUb1BsYXlsaXN0TW9kYWwoZmFsc2UpO1xuICAgICAgICAgICAgc2V0U2VsZWN0ZWRTb25nRm9yUGxheWxpc3QobnVsbCk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBzb25nPXtzZWxlY3RlZFNvbmdGb3JQbGF5bGlzdH1cbiAgICAgICAgICBwbGF5bGlzdHM9e3BsYXlsaXN0c31cbiAgICAgICAgICBvbkFkZFRvUGxheWxpc3Q9e2FkZFNvbmdUb1BsYXlsaXN0fVxuICAgICAgICAgIG9uQ3JlYXRlUGxheWxpc3Q9eygpID0+IHtcbiAgICAgICAgICAgIHNldFNob3dBZGRUb1BsYXlsaXN0TW9kYWwoZmFsc2UpO1xuICAgICAgICAgICAgc2V0U2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWwodHJ1ZSk7XG4gICAgICAgICAgfX1cbiAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICBzZXRJbWFnZVVybHM9e3NldEltYWdlVXJsc31cbiAgICAgICAgLz5cbiAgICAgICAgPGF1ZGlvXG4gICAgICAgICAgcmVmPXthdWRpb1JlZn1cbiAgICAgICAgICBzcmM9e2F1ZGlvVXJsID8/IHVuZGVmaW5lZH1cbiAgICAgICAgICBvbkVuZGVkPXtoYW5kbGVTb25nRW5kfVxuICAgICAgICAgIG9uVGltZVVwZGF0ZT17KCkgPT4ge1xuICAgICAgICAgIGlmIChhdWRpb1JlZi5jdXJyZW50ICYmICFpc1NlZWtpbmcgJiYgIWlzRXh0ZXJuYWxseVNlZWtpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnQgPSBhdWRpb1JlZi5jdXJyZW50LmN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgc3RhdGUgaWYgdGhlIGRpZmZlcmVuY2UgaXMgc2lnbmlmaWNhbnRcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhjdXJyZW50VGltZSAtIGN1cnJlbnQpID4gMC4yNSkge1xuICAgICAgICAgICAgICBzZXRDdXJyZW50VGltZShjdXJyZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH19XG5cblxuICAgICAgICAgIG9uTG9hZGVkTWV0YWRhdGE9e2hhbmRsZUxvYWRlZE1ldGFkYXRhfVxuICAgICAgICAgIG9uVm9sdW1lQ2hhbmdlPXsoKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXVkaW9SZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICBzZXRWb2x1bWUoYXVkaW9SZWYuY3VycmVudC52b2x1bWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgICAgc3R5bGU9e3sgZGlzcGxheTogJ25vbmUnIH19XG4gICAgICAgIC8+XG5cbiAgICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNdXNpY1BsYXllckFwcCgpIHtcbiAgcmV0dXJuIChcbiAgICA8QXV0aFdyYXBwZXI+XG4gICAgICA8VG9hc3RlciBwb3NpdGlvbj1cImJvdHRvbS1jZW50ZXJcIiAvPlxuICAgICAgPE11c2ljUGxheWVyQ29udGVudCAvPlxuICAgIDwvQXV0aFdyYXBwZXI+XG4gICk7XG59Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJIb21lIiwiSG9tZUljb24iLCJTZWFyY2giLCJTZXR0aW5ncyIsIkhvbWVQYWdlIiwiU2VhcmNoUGFnZSIsIlNldHRpbmdzUGFnZSIsIlBsYXlsaXN0c1BhZ2UiLCJMaWtlZFNvbmdzUGFnZSIsIk1pbmltaXplZFBsYXllciIsIk1heGltaXplZFBsYXllciIsIkNyZWF0ZVBsYXlsaXN0TW9kYWwiLCJBZGRUb1BsYXlsaXN0TW9kYWwiLCJBdXRoV3JhcHBlciIsInVzZUF1dGgiLCJ1c2VTdXBhYmFzZURhdGEiLCJ1c2VRdWV1ZSIsInVzZUR5bmFtaWNQbGF5bGlzdCIsInVzZVRoZW1lIiwiVG9hc3RlciIsInRvYXN0IiwiTXVzaWNQbGF5ZXJDb250ZW50IiwidXNlciIsInNvbmdzIiwicGxheWxpc3RzIiwibGlrZWRTb25ncyIsImxhc3RQbGF5ZWRTb25nIiwibG9hZGluZyIsInRvZ2dsZUxpa2UiLCJjcmVhdGVQbGF5bGlzdCIsImRlbGV0ZVBsYXlsaXN0IiwicmVuYW1lUGxheWxpc3QiLCJhZGRTb25nVG9QbGF5bGlzdCIsInJlbW92ZVNvbmdGcm9tUGxheWxpc3QiLCJyZWNvcmRMaXN0ZW5pbmdIaXN0b3J5Iiwic3RvcEN1cnJlbnRTb25nVHJhY2tpbmciLCJnZXRQZXJzb25hbGl6ZWRTb25ncyIsInF1ZXVlIiwiYWRkVG9RdWV1ZSIsInJlbW92ZUZyb21RdWV1ZSIsImNsZWFyUXVldWUiLCJoYXNRdWV1ZSIsImluaXRpYWxpemVQbGF5bGlzdCIsImdldEN1cnJlbnRTb25nIiwiZ2V0RHluYW1pY0N1cnJlbnRTb25nIiwibW92ZVRvTmV4dCIsIm1vdmVUb05leHRJblBsYXlsaXN0IiwibW92ZVRvUHJldmlvdXMiLCJtb3ZlVG9QcmV2aW91c0luUGxheWxpc3QiLCJhZGRVc2VyU2VsZWN0ZWRTb25nIiwiZ2V0VXBjb21pbmdTb25ncyIsInJlc2V0UGxheWxpc3QiLCJoYXNOZXh0IiwiaGFzUHJldmlvdXMiLCJpc0luaXRpYWxpemVkIiwiYWN0aXZlVGFiIiwic2V0QWN0aXZlVGFiIiwiY3VycmVudFBhZ2UiLCJzZXRDdXJyZW50UGFnZSIsImN1cnJlbnRTb25nIiwic2V0Q3VycmVudFNvbmciLCJpc1BsYXlpbmciLCJzZXRJc1BsYXlpbmciLCJpc1BsYXllck1heGltaXplZCIsInNldElzUGxheWVyTWF4aW1pemVkIiwic2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWwiLCJzZXRTaG93Q3JlYXRlUGxheWxpc3RNb2RhbCIsInNob3dBZGRUb1BsYXlsaXN0TW9kYWwiLCJzZXRTaG93QWRkVG9QbGF5bGlzdE1vZGFsIiwic2VsZWN0ZWRTb25nRm9yUGxheWxpc3QiLCJzZXRTZWxlY3RlZFNvbmdGb3JQbGF5bGlzdCIsImhhc1NldExhc3RQbGF5ZWRTb25nIiwic2V0SGFzU2V0TGFzdFBsYXllZFNvbmciLCJsYXN0UGxheWVkU29uZ0Rpc21pc3NlZCIsInNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkIiwiaXNEYXJrTW9kZSIsInRvZ2dsZVRoZW1lIiwiZGlzcGxheUNvdW50Iiwic2V0RGlzcGxheUNvdW50IiwiaW1hZ2VVcmxzIiwic2V0SW1hZ2VVcmxzIiwiYXVkaW9VcmwiLCJzZXRBdWRpb1VybCIsImF1ZGlvUmVmIiwiY3VycmVudFRpbWUiLCJzZXRDdXJyZW50VGltZSIsImR1cmF0aW9uIiwic2V0RHVyYXRpb24iLCJ2b2x1bWUiLCJzZXRWb2x1bWUiLCJpc1NlZWtpbmciLCJzZXRJc1NlZWtpbmciLCJwZW5kaW5nU2Vla1RpbWUiLCJzZXRQZW5kaW5nU2Vla1RpbWUiLCJpc0V4dGVybmFsbHlTZWVraW5nIiwic2V0SXNFeHRlcm5hbGx5U2Vla2luZyIsInVzaW5nRHluYW1pY1BsYXlsaXN0Iiwic2V0VXNpbmdEeW5hbWljUGxheWxpc3QiLCJsb2FkTW9yZVNvbmdzIiwicHJldiIsImRpc3BsYXllZFNvbmdzIiwic2xpY2UiLCJsb2FkQXVkaW8iLCJmaWxlX2lkIiwidXJsIiwiaWQiLCJkeW5hbWljQ3VycmVudFNvbmciLCJjdXJyZW50IiwiYXVkaW8iLCJpc05hTiIsInBsYXkiLCJjYXRjaCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJwYXVzZSIsImZldGNoSW1hZ2VzIiwibmV3VXJscyIsInNvbmdzVG9Mb2FkIiwic29uZyIsImltZ19pZCIsInBsYXlsaXN0IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImxvYWRMYXN0UGxheWVkSW1hZ2UiLCJoYW5kbGVTb25nUGxheSIsImhhbmRsZUFkZFRvUXVldWUiLCJzdWNjZXNzIiwibmFtZSIsInRvZ2dsZVBsYXkiLCJ0b2dnbGVQbGF5ZXJTaXplIiwiY2xvc2VQbGF5ZXIiLCJoYW5kbGVUb2dnbGVMaWtlIiwic29uZ0lkIiwiaXNMaWtlZCIsImhhbmRsZVByZXZpb3VzIiwicHJldlNvbmciLCJuZXdVcmwiLCJjdXJyZW50SW5kZXgiLCJmaW5kSW5kZXgiLCJwcmV2SW5kZXgiLCJuZXh0SW5kZXgiLCJuZXh0U29uZyIsImhhbmRsZUxvYWRlZE1ldGFkYXRhIiwibG9hZGVkRHVyYXRpb24iLCJpc0Zpbml0ZSIsImVyciIsInNldFRpbWVvdXQiLCJoYW5kbGVOZXh0IiwibmV4dFF1ZXVlU29uZyIsImZvcm1hdE51bWJlciIsIm51bSIsInRvRml4ZWQiLCJ0b1N0cmluZyIsImhhbmRsZUFkZFRvUGxheWxpc3QiLCJoYW5kbGVTb25nRW5kIiwicmVuZGVyQ29udGVudCIsIm9uQmFjayIsIm9uU29uZ1BsYXkiLCJvbkFkZFRvUXVldWUiLCJvbkNyZWF0ZVBsYXlsaXN0Iiwib25EZWxldGVQbGF5bGlzdCIsIm9uUmVuYW1lUGxheWxpc3QiLCJvblJlbW92ZVNvbmdGcm9tUGxheWxpc3QiLCJvbkFkZFRvUGxheWxpc3QiLCJvbkxvYWRNb3JlIiwiaGFzTW9yZVNvbmdzIiwib25QbGF5bGlzdHNDbGljayIsIm9uTGlrZWRDbGljayIsInRoZW1lQ2xhc3NlcyIsInNldEN1cnJlbnRUaW1lU3RhdGUiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic2l6ZSIsInNwYW4iLCJpbWFnZVVybCIsIm9uVG9nZ2xlUGxheSIsIm9uTWF4aW1pemUiLCJvblByZXZpb3VzIiwib25OZXh0Iiwib25DbG9zZSIsIm9uVG9nZ2xlTGlrZSIsIm9uTWluaW1pemUiLCJzZWVrVGltZSIsIm1hcCIsImFkZGVkQXQiLCJEYXRlIiwib25SZW1vdmVGcm9tUXVldWUiLCJpc09wZW4iLCJyZWYiLCJzcmMiLCJ1bmRlZmluZWQiLCJvbkVuZGVkIiwib25UaW1lVXBkYXRlIiwiTWF0aCIsImFicyIsIm9uTG9hZGVkTWV0YWRhdGEiLCJvblZvbHVtZUNoYW5nZSIsInN0eWxlIiwiZGlzcGxheSIsIk11c2ljUGxheWVyQXBwIiwicG9zaXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/MaximizedPlayer.tsx":
/*!****************************************!*\
  !*** ./components/MaximizedPlayer.tsx ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/chevron-down.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/more-horizontal.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/plus.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/share-2.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/eye.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/heart.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/shuffle.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/skip-back.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/pause.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/play.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/skip-forward.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/repeat.js\");\n/* harmony import */ var _barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! __barrel_optimize__?names=ChevronDown,Eye,Heart,MoreHorizontal,Pause,Play,Plus,Repeat,Share2,Shuffle,SkipBack,SkipForward,Volume2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/volume-2.js\");\n/* harmony import */ var _components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ThemeContext */ \"(app-pages-browser)/./components/ThemeContext.tsx\");\n/* harmony import */ var _QueueSection__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./QueueSection */ \"(app-pages-browser)/./components/QueueSection.tsx\");\n\nvar _s = $RefreshSig$();\n\n\n\n\nconst MaximizedPlayer = (param)=>{\n    let { song, isPlaying, onTogglePlay, onMinimize, onPrevious, onNext, onToggleLike, formatNumber, onAddToPlaylist, imageUrl, currentTime, duration, setCurrentTime, volume, setVolume, setIsSeeking, isSeeking, queue, onRemoveFromQueue, onSongPlay, imageUrls } = param;\n    _s();\n    const { isDarkMode } = (0,_components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme)();\n    const [showMenu, setShowMenu] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [localSeekTime, setLocalSeekTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const formatTime = (seconds)=>{\n        if (isNaN(seconds) || !isFinite(seconds)) return \"0:00\";\n        const mins = Math.floor(seconds / 60);\n        const secs = Math.floor(seconds % 60);\n        return \"\".concat(mins, \":\").concat(secs.toString().padStart(2, \"0\"));\n    };\n    const progressPercentage = currentTime / duration * 100;\n    const handleLike = ()=>{\n        onToggleLike();\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 \".concat(isDarkMode ? \"bg-gradient-to-b from-gray-900 via-gray-900 to-black\" : \"bg-gradient-to-b from-gray-50 via-gray-100 to-gray-200\", \" z-50 flex flex-col\"),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-between p-4 pt-12 flex-shrink-0\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onMinimize,\n                        className: \"p-2 \".concat(isDarkMode ? \"hover:bg-gray-800\" : \"hover:bg-gray-200\", \" rounded-full transition-colors\"),\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                            size: 24,\n                            className: isDarkMode ? \"text-white\" : \"text-gray-900\"\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 88,\n                            columnNumber: 11\n                        }, undefined)\n                    }, void 0, false, {\n                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                        lineNumber: 84,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center flex-1\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"\".concat(isDarkMode ? \"text-gray-400\" : \"text-gray-600\", \" text-sm\"),\n                                children: \"Playing from\"\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 91,\n                                columnNumber: 11\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"\".concat(isDarkMode ? \"text-white\" : \"text-gray-900\", \" font-medium\"),\n                                children: \"Trending Now\"\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 92,\n                                columnNumber: 11\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                        lineNumber: 90,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"relative\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>setShowMenu(!showMenu),\n                                className: \"p-2 \".concat(isDarkMode ? \"hover:bg-gray-800\" : \"hover:bg-gray-200\", \" rounded-full transition-colors\"),\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                    size: 24,\n                                    className: isDarkMode ? \"text-white\" : \"text-gray-900\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                    lineNumber: 99,\n                                    columnNumber: 13\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 95,\n                                columnNumber: 11\n                            }, undefined),\n                            showMenu && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"absolute right-0 top-12 \".concat(isDarkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-200\", \" border rounded-lg shadow-lg py-2 w-48 z-10\"),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>{\n                                            onAddToPlaylist();\n                                            setShowMenu(false);\n                                        },\n                                        className: \"w-full text-left px-4 py-2 \".concat(isDarkMode ? \"hover:bg-gray-700 text-white\" : \"hover:bg-gray-100 text-gray-900\", \" flex items-center transition-colors\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                                size: 16,\n                                                className: \"mr-3\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 112,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            \"Add to Playlist\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 105,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"w-full text-left px-4 py-2 \".concat(isDarkMode ? \"hover:bg-gray-700 text-white\" : \"hover:bg-gray-100 text-gray-900\", \" flex items-center transition-colors\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                                                size: 16,\n                                                className: \"mr-3\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 116,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            \"Share\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 115,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 104,\n                                columnNumber: 13\n                            }, undefined)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                        lineNumber: 94,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                lineNumber: 83,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto px-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-h-full\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex justify-center py-6\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"relative w-56 h-56\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: imageUrl || song.image,\n                                        alt: song.name,\n                                        className: \"w-full h-full rounded-2xl object-cover shadow-2xl\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 130,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-2xl\"\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 135,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 129,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 128,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"text-center mb-6\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                    className: \"text-2xl font-bold \".concat(isDarkMode ? \"text-white\" : \"text-gray-900\", \" mb-2\"),\n                                    children: song.name\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                    lineNumber: 141,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"\".concat(isDarkMode ? \"text-gray-400\" : \"text-gray-600\", \" text-lg\"),\n                                    children: song.artist\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                    lineNumber: 142,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-center space-x-2 mt-2\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"\".concat(isDarkMode ? \"bg-gray-700 text-gray-300\" : \"bg-gray-200 text-gray-600\", \" text-sm px-3 py-1 rounded-full\"),\n                                        children: song.language\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 144,\n                                        columnNumber: 15\n                                    }, undefined)\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                    lineNumber: 143,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 140,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-6\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-center space-x-6\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center space-x-1\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                                                size: 16,\n                                                className: isDarkMode ? \"text-gray-400\" : \"text-gray-600\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 154,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"\".concat(isDarkMode ? \"text-gray-400\" : \"text-gray-600\", \" text-sm\"),\n                                                children: formatNumber(song.views)\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 155,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 153,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center space-x-1\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                size: 16,\n                                                className: \"\".concat(song.isLiked ? \"text-red-500 fill-red-500\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\")\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 158,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"\".concat(isDarkMode ? \"text-gray-400\" : \"text-gray-600\", \" text-sm\"),\n                                                children: formatNumber(song.likes)\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 159,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 157,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 152,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 151,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-8\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"flex items-center justify-between text-sm font-mono mb-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: isDarkMode ? \"text-gray-400\" : \"text-gray-600\",\n                                            children: formatTime(currentTime)\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 167,\n                                            columnNumber: 15\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: isDarkMode ? \"text-gray-400\" : \"text-gray-600\",\n                                            children: formatTime(duration)\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 170,\n                                            columnNumber: 15\n                                        }, undefined)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                    lineNumber: 166,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"range\",\n                                    min: 0,\n                                    max: duration,\n                                    step: 0.1,\n                                    value: isSeeking && localSeekTime !== null ? localSeekTime : currentTime,\n                                    onChange: (e)=>{\n                                        const newTime = Number(e.target.value);\n                                        setIsSeeking(true);\n                                        setLocalSeekTime(newTime); // ✅ Set directly\n                                    },\n                                    onMouseUp: ()=>{\n                                        if (localSeekTime !== null) {\n                                            setIsSeeking(false);\n                                            setCurrentTime(localSeekTime); // ✅ Triggers audioRef seek in parent\n                                            setLocalSeekTime(null);\n                                        } else {\n                                            console.warn(\"[MouseUp] localSeekTime was null\");\n                                        }\n                                    },\n                                    onTouchEnd: ()=>{\n                                        if (localSeekTime !== null) {\n                                            setIsSeeking(false);\n                                            setCurrentTime(localSeekTime); // ✅ Triggers audioRef seek in parent\n                                            setLocalSeekTime(null);\n                                        } else {\n                                            console.warn(\"[TouchEnd] localSeekTime was null\");\n                                        }\n                                    },\n                                    className: \"w-full h-2 appearance-none bg-gray-300 rounded-full cursor-pointer\",\n                                    style: {\n                                        accentColor: \"#a855f7\"\n                                    }\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                    lineNumber: 175,\n                                    columnNumber: 12\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 165,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mb-8\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-center space-x-6\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"p-2 \".concat(isDarkMode ? \"hover:bg-gray-800\" : \"hover:bg-gray-200\", \" rounded-full transition-colors\"),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                                            size: 24,\n                                            className: isDarkMode ? \"text-gray-400\" : \"text-gray-600\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 215,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 214,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: onPrevious,\n                                        className: \"p-3 \".concat(isDarkMode ? \"hover:bg-gray-800\" : \"hover:bg-gray-200\", \" rounded-full transition-colors\"),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                                            size: 28,\n                                            className: isDarkMode ? \"text-white\" : \"text-gray-900\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 222,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 218,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: onTogglePlay,\n                                        className: \"p-4 bg-purple-500 hover:bg-purple-600 rounded-full transition-colors shadow-lg\",\n                                        children: isPlaying ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                                            size: 32,\n                                            className: \"text-white\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 230,\n                                            columnNumber: 19\n                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                                            size: 32,\n                                            className: \"text-white\",\n                                            fill: \"white\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 232,\n                                            columnNumber: 19\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 225,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: onNext,\n                                        className: \"p-3 \".concat(isDarkMode ? \"hover:bg-gray-800\" : \"hover:bg-gray-200\", \" rounded-full transition-colors\"),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                                            size: 28,\n                                            className: isDarkMode ? \"text-white\" : \"text-gray-900\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 240,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 236,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"p-2 \".concat(isDarkMode ? \"hover:bg-gray-800\" : \"hover:bg-gray-200\", \" rounded-full transition-colors\"),\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                                            size: 24,\n                                            className: isDarkMode ? \"text-gray-400\" : \"text-gray-600\"\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                            lineNumber: 244,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 243,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 213,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 212,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"pb-8\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center justify-between\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: handleLike,\n                                        className: \"flex items-center space-x-2 px-4 py-2 \".concat(song.isLiked ? \"bg-red-500 hover:bg-red-600\" : isDarkMode ? \"bg-gray-700 hover:bg-gray-600\" : \"bg-gray-200 hover:bg-gray-300\", \" rounded-full transition-colors\"),\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                                                size: 18,\n                                                className: \"\".concat(song.isLiked ? \"text-white fill-white\" : isDarkMode ? \"text-gray-300\" : \"text-gray-700\")\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 257,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-sm font-medium \".concat(song.isLiked ? \"text-white\" : isDarkMode ? \"text-gray-300\" : \"text-gray-700\"),\n                                                children: song.isLiked ? \"Liked\" : \"Like\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 258,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 253,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"flex items-center space-x-3 flex-1 max-w-32 ml-6\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_ChevronDown_Eye_Heart_MoreHorizontal_Pause_Play_Plus_Repeat_Share2_Shuffle_SkipBack_SkipForward_Volume2_lucide_react__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                                                size: 20,\n                                                className: isDarkMode ? \"text-gray-400\" : \"text-gray-600\"\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 266,\n                                                columnNumber: 17\n                                            }, undefined),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                                type: \"range\",\n                                                min: 0,\n                                                max: 1,\n                                                step: 0.01,\n                                                value: volume,\n                                                onChange: (e)=>setVolume(Number(e.target.value)),\n                                                className: \"w-full h-2 bg-gray-300 rounded-full appearance-none cursor-pointer\",\n                                                style: {\n                                                    accentColor: \"#a855f7\"\n                                                }\n                                            }, void 0, false, {\n                                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                                lineNumber: 267,\n                                                columnNumber: 17\n                                            }, undefined)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                        lineNumber: 265,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                                lineNumber: 251,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 250,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_QueueSection__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                            queue: queue,\n                            onRemoveFromQueue: onRemoveFromQueue,\n                            onSongPlay: onSongPlay,\n                            imageUrls: imageUrls\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                            lineNumber: 283,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                    lineNumber: 126,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n                lineNumber: 125,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/components/MaximizedPlayer.tsx\",\n        lineNumber: 81,\n        columnNumber: 5\n    }, undefined);\n};\n_s(MaximizedPlayer, \"/UTKR1NZ3O6uhdUrJ5iUWY3w8rY=\", false, function() {\n    return [\n        _components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme\n    ];\n});\n_c = MaximizedPlayer;\n/* harmony default export */ __webpack_exports__[\"default\"] = (MaximizedPlayer);\nvar _c;\n$RefreshReg$(_c, \"MaximizedPlayer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvTWF4aW1pemVkUGxheWVyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0M7QUFDMkc7QUFFOUY7QUFDWDtBQWlDMUMsTUFBTWlCLGtCQUFrRDtRQUFDLEVBQ3ZEQyxJQUFJLEVBQ0pDLFNBQVMsRUFDVEMsWUFBWSxFQUNaQyxVQUFVLEVBQ1ZDLFVBQVUsRUFDVkMsTUFBTSxFQUNOQyxZQUFZLEVBQ1pDLFlBQVksRUFDWkMsZUFBZSxFQUNmQyxRQUFRLEVBQ1JDLFdBQVcsRUFDWEMsUUFBUSxFQUNSQyxjQUFjLEVBQ2RDLE1BQU0sRUFDTkMsU0FBUyxFQUNUQyxZQUFZLEVBQ1pDLFNBQVMsRUFDVEMsS0FBSyxFQUNMQyxpQkFBaUIsRUFDakJDLFVBQVUsRUFDVkMsU0FBUyxFQUNWOztJQUNDLE1BQU0sRUFBRUMsVUFBVSxFQUFFLEdBQUd4QixrRUFBUUE7SUFDL0IsTUFBTSxDQUFDeUIsVUFBVUMsWUFBWSxHQUFHeEMsK0NBQVFBLENBQUM7SUFDekMsTUFBTSxDQUFDeUMsZUFBZUMsaUJBQWlCLEdBQUcxQywrQ0FBUUEsQ0FBZ0I7SUFFbEUsTUFBTTJDLGFBQWEsQ0FBQ0M7UUFDcEIsSUFBSUMsTUFBTUQsWUFBWSxDQUFDRSxTQUFTRixVQUFVLE9BQU87UUFFakQsTUFBTUcsT0FBT0MsS0FBS0MsS0FBSyxDQUFDTCxVQUFVO1FBQ2xDLE1BQU1NLE9BQU9GLEtBQUtDLEtBQUssQ0FBQ0wsVUFBVTtRQUNsQyxPQUFPLEdBQVdNLE9BQVJILE1BQUssS0FBb0MsT0FBakNHLEtBQUtDLFFBQVEsR0FBR0MsUUFBUSxDQUFDLEdBQUc7SUFDaEQ7SUFHRSxNQUFNQyxxQkFBcUIsY0FBZXpCLFdBQVk7SUFFdEQsTUFBTTBCLGFBQWE7UUFDakIvQjtJQUNGO0lBRUEscUJBQ0UsOERBQUNnQztRQUFJQyxXQUFXLGlCQUFnSixPQUEvSGxCLGFBQWEseURBQXlELDBEQUF5RDs7MEJBRTlKLDhE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bkMsbUxBQUtBO2dEQUFDd0QsTUFBTTtnREFBSUgsV0FBVyxHQUEyRixPQUF4RnZDLEtBQUtzRCxPQUFPLEdBQUcsMEJBQTBCakMsYUFBYSxrQkFBa0I7Ozs7OzswREFDdkcsOERBQUM4QjtnREFBS1osV0FBVyx1QkFBb0csT0FBN0V2QyxLQUFLc0QsT0FBTyxHQUFHLGVBQWVqQyxhQUFhLGtCQUFrQjswREFDbEdyQixLQUFLc0QsT0FBTyxHQUFHLFVBQVU7Ozs7Ozs7Ozs7OztrREFNOUIsOERBQUNoQjt3Q0FBSUMsV0FBVTs7MERBQ2IsOERBQUMvQyxvTEFBT0E7Z0RBQUNrRCxNQUFNO2dEQUFJSCxXQUFXbEIsYUFBYSxrQkFBa0I7Ozs7OzswREFDN0QsOERBQUNtQztnREFDQ0MsTUFBSztnREFDTEMsS0FBSztnREFDTEMsS0FBSztnREFDTEMsTUFBTTtnREFDTkMsT0FBT2hEO2dEQUNQaUQsVUFBVSxDQUFDQyxJQUFNakQsVUFBVW1ELE9BQU9GLEVBQUVHLE1BQU0sQ0FBQ0wsS0FBSztnREFDaER0QixXQUFVO2dEQUNWZ0MsT0FBTztvREFBRUMsYUFBYTtnREFBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0NBUXhDLDhEQUFDMUUscURBQVlBOzRCQUNYbUIsT0FBT0E7NEJBQ1BDLG1CQUFtQkE7NEJBQ25CQyxZQUFZQTs0QkFDWkMsV0FBV0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTXZCO0dBL1BNckI7O1FBdUJtQkYsOERBQVFBOzs7S0F2QjNCRTtBQWlRTiwrREFBZUEsZUFBZUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL01heGltaXplZFBsYXllci50c3g/MjMxNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDaGV2cm9uRG93biwgTW9yZUhvcml6b250YWwsIEhlYXJ0LCBTaGFyZTIsIFBsYXksIFBhdXNlLCBTa2lwQmFjaywgU2tpcEZvcndhcmQsIFZvbHVtZTIsIFJlcGVhdCwgU2h1ZmZsZSwgUGx1cywgRXllIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCB7IFNvbmcgfSBmcm9tICdAL3R5cGVzJztcbmltcG9ydCB7IHVzZVRoZW1lIH0gZnJvbSAnQC9jb21wb25lbnRzL1RoZW1lQ29udGV4dCc7XG5pbXBvcnQgUXVldWVTZWN0aW9uIGZyb20gJy4vUXVldWVTZWN0aW9uJztcblxuaW50ZXJmYWNlIFF1ZXVlSXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIHNvbmc6IFNvbmc7XG4gIGFkZGVkQXQ6IERhdGU7XG59XG5cbmludGVyZmFjZSBNYXhpbWl6ZWRQbGF5ZXJQcm9wcyB7XG4gIHNvbmc6IFNvbmc7XG4gIGlzUGxheWluZzogYm9vbGVhbjtcbiAgb25Ub2dnbGVQbGF5OiAoKSA9PiB2b2lkO1xuICBvbk1pbmltaXplOiAoKSA9PiB2b2lkO1xuICBvblByZXZpb3VzOiAoKSA9PiB2b2lkO1xuICBvbk5leHQ6ICgpID0+IHZvaWQ7XG4gIG9uVG9nZ2xlTGlrZTogKCkgPT4gdm9pZDtcbiAgZm9ybWF0TnVtYmVyOiAobnVtOiBudW1iZXIpID0+IHN0cmluZztcbiAgb25BZGRUb1BsYXlsaXN0OiAoKSA9PiB2b2lkO1xuICBpbWFnZVVybD86IHN0cmluZztcbiAgY3VycmVudFRpbWU6IG51bWJlcjtcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgc2V0Q3VycmVudFRpbWU6ICh0aW1lOiBudW1iZXIpID0+IHZvaWQ7XG4gIHZvbHVtZTogbnVtYmVyO1xuICBzZXRWb2x1bWU6ICh2b2x1bWU6IG51bWJlcikgPT4gdm9pZDtcbiAgaXNTZWVraW5nOiBib29sZWFuO1xuc2V0SXNTZWVraW5nOiAodmFsdWU6IGJvb2xlYW4pID0+IHZvaWQ7XG4gIHF1ZXVlOiBRdWV1ZUl0ZW1bXTtcbiAgb25SZW1vdmVGcm9tUXVldWU6IChpdGVtSWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgb25Tb25nUGxheTogKHNvbmc6IFNvbmcpID0+IHZvaWQ7XG4gIGltYWdlVXJsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcblxufVxuXG5jb25zdCBNYXhpbWl6ZWRQbGF5ZXI6IFJlYWN0LkZDPE1heGltaXplZFBsYXllclByb3BzPiA9ICh7XG4gIHNvbmcsXG4gIGlzUGxheWluZyxcbiAgb25Ub2dnbGVQbGF5LFxuICBvbk1pbmltaXplLFxuICBvblByZXZpb3VzLFxuICBvbk5leHQsXG4gIG9uVG9nZ2xlTGlrZSxcbiAgZm9ybWF0TnVtYmVyLFxuICBvbkFkZFRvUGxheWxpc3QsXG4gIGltYWdlVXJsLFxuICBjdXJyZW50VGltZSxcbiAgZHVyYXRpb24sXG4gIHNldEN1cnJlbnRUaW1lLFxuICB2b2x1bWUsXG4gIHNldFZvbHVtZSxcbiAgc2V0SXNTZWVraW5nLFxuICBpc1NlZWtpbmcsXG4gIHF1ZXVlLFxuICBvblJlbW92ZUZyb21RdWV1ZSxcbiAgb25Tb25nUGxheSxcbiAgaW1hZ2VVcmxzXG59KSA9PiB7XG4gIGNvbnN0IHsgaXNEYXJrTW9kZSB9ID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgW3Nob3dNZW51LCBzZXRTaG93TWVudV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtsb2NhbFNlZWtUaW1lLCBzZXRMb2NhbFNlZWtUaW1lXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IGZvcm1hdFRpbWUgPSAoc2Vjb25kczogbnVtYmVyKSA9PiB7XG4gIGlmIChpc05hTihzZWNvbmRzKSB8fCAhaXNGaW5pdGUoc2Vjb25kcykpIHJldHVybiAnMDowMCc7XG5cbiAgY29uc3QgbWlucyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKTtcbiAgY29uc3Qgc2VjcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAlIDYwKTtcbiAgcmV0dXJuIGAke21pbnN9OiR7c2Vjcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbn07XG5cblxuICBjb25zdCBwcm9ncmVzc1BlcmNlbnRhZ2UgPSAoY3VycmVudFRpbWUgLyBkdXJhdGlvbikgKiAxMDA7XG5cbiAgY29uc3QgaGFuZGxlTGlrZSA9ICgpID0+IHtcbiAgICBvblRvZ2dsZUxpa2UoKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtgZml4ZWQgaW5zZXQtMCAke2lzRGFya01vZGUgPyAnYmctZ3JhZGllbnQtdG8tYiBmcm9tLWdyYXktOTAwIHZpYS1ncmF5LTkwMCB0by1ibGFjaycgOiAnYmctZ3JhZGllbnQtdG8tYiBmcm9tLWdyYXktNTAgdmlhLWdyYXktMTAwIHRvLWdyYXktMjAwJ30gei01MCBmbGV4IGZsZXgtY29sYH0+XG4gICAgICB7LyogSGVhZGVyIC0gRml4ZWQgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBwLTQgcHQtMTIgZmxleC1zaHJpbmstMFwiPlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIG9uQ2xpY2s9e29uTWluaW1pemV9IFxuICAgICAgICAgIGNsYXNzTmFtZT17YHAtMiAke2lzRGFya01vZGUgPyAnaG92ZXI6YmctZ3JheS04MDAnIDogJ2hvdmVyOmJnLWdyYXktMjAwJ30gcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzYH1cbiAgICAgICAgPlxuICAgICAgICAgIDxDaGV2cm9uRG93biBzaXplPXsyNH0gY2xhc3NOYW1lPXtpc0RhcmtNb2RlID8gJ3RleHQtd2hpdGUnIDogJ3RleHQtZ3JheS05MDAnfSAvPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlciBmbGV4LTFcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9e2Ake2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9IHRleHQtc21gfT5QbGF5aW5nIGZyb208L3A+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPXtgJHtpc0RhcmtNb2RlID8gJ3RleHQtd2hpdGUnIDogJ3RleHQtZ3JheS05MDAnfSBmb250LW1lZGl1bWB9PlRyZW5kaW5nIE5vdzwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmVcIj5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd01lbnUoIXNob3dNZW51KX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtMiAke2lzRGFya01vZGUgPyAnaG92ZXI6YmctZ3JheS04MDAnIDogJ2hvdmVyOmJnLWdyYXktMjAwJ30gcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8TW9yZUhvcml6b250YWwgc2l6ZT17MjR9IGNsYXNzTmFtZT17aXNEYXJrTW9kZSA/ICd0ZXh0LXdoaXRlJyA6ICd0ZXh0LWdyYXktOTAwJ30gLz5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICBcbiAgICAgICAgICB7LyogRHJvcGRvd24gTWVudSAqL31cbiAgICAgICAgICB7c2hvd01lbnUgJiYgKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2BhYnNvbHV0ZSByaWdodC0wIHRvcC0xMiAke2lzRGFya01vZGUgPyAnYmctZ3JheS04MDAgYm9yZGVyLWdyYXktNzAwJyA6ICdiZy13aGl0ZSBib3JkZXItZ3JheS0yMDAnfSBib3JkZXIgcm91bmRlZC1sZyBzaGFkb3ctbGcgcHktMiB3LTQ4IHotMTBgfT5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBvbkFkZFRvUGxheWxpc3QoKTtcbiAgICAgICAgICAgICAgICAgIHNldFNob3dNZW51KGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHctZnVsbCB0ZXh0LWxlZnQgcHgtNCBweS0yICR7aXNEYXJrTW9kZSA/ICdob3ZlcjpiZy1ncmF5LTcwMCB0ZXh0LXdoaXRlJyA6ICdob3ZlcjpiZy1ncmF5LTEwMCB0ZXh0LWdyYXktOTAwJ30gZmxleCBpdGVtcy1jZW50ZXIgdHJhbnNpdGlvbi1jb2xvcnNgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFBsdXMgc2l6ZT17MTZ9IGNsYXNzTmFtZT1cIm1yLTNcIiAvPlxuICAgICAgICAgICAgICAgIEFkZCB0byBQbGF5bGlzdFxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzc05hbWU9e2B3LWZ1bGwgdGV4dC1sZWZ0IHB4LTQgcHktMiAke2lzRGFya01vZGUgPyAnaG92ZXI6YmctZ3JheS03MDAgdGV4dC13aGl0ZScgOiAnaG92ZXI6YmctZ3JheS0xMDAgdGV4dC1ncmF5LTkwMCd9IGZsZXggaXRlbXMtY2VudGVyIHRyYW5zaXRpb24tY29sb3JzYH0+XG4gICAgICAgICAgICAgICAgPFNoYXJlMiBzaXplPXsxNn0gY2xhc3NOYW1lPVwibXItM1wiIC8+XG4gICAgICAgICAgICAgICAgU2hhcmVcbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7LyogU2Nyb2xsYWJsZSBDb250ZW50IEFyZWEgLSBQcm9wZXJseSBjb250YWluZWQgKi99XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcHgtNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1heC1oLWZ1bGxcIj5cbiAgICAgICAgICB7LyogQWxidW0gQXJ0IC0gU21hbGxlciBhbmQgY2VudGVyZWQgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktY2VudGVyIHB5LTZcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicmVsYXRpdmUgdy01NiBoLTU2XCI+XG4gICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICBzcmM9e2ltYWdlVXJsIHx8IHNvbmcuaW1hZ2V9XG4gICAgICAgICAgICAgICAgYWx0PXtzb25nLm5hbWV9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCByb3VuZGVkLTJ4bCBvYmplY3QtY292ZXIgc2hhZG93LTJ4bFwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBiZy1ncmFkaWVudC10by10IGZyb20tYmxhY2svMjAgdG8tdHJhbnNwYXJlbnQgcm91bmRlZC0yeGxcIj48L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgey8qIFNvbmcgSW5mbyAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIG1iLTZcIj5cbiAgICAgICAgICAgIDxoMSBjbGFzc05hbWU9e2B0ZXh0LTJ4bCBmb250LWJvbGQgJHtpc0RhcmtNb2RlID8gJ3RleHQtd2hpdGUnIDogJ3RleHQtZ3JheS05MDAnfSBtYi0yYH0+e3NvbmcubmFtZX08L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtgJHtpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS00MDAnIDogJ3RleHQtZ3JheS02MDAnfSB0ZXh0LWxnYH0+e3NvbmcuYXJ0aXN0fTwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgc3BhY2UteC0yIG10LTJcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtgJHtpc0RhcmtNb2RlID8gJ2JnLWdyYXktNzAwIHRleHQtZ3JheS0zMDAnIDogJ2JnLWdyYXktMjAwIHRleHQtZ3JheS02MDAnfSB0ZXh0LXNtIHB4LTMgcHktMSByb3VuZGVkLWZ1bGxgfT5cbiAgICAgICAgICAgICAgICB7c29uZy5sYW5ndWFnZX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogU3RhdHMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi02XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHNwYWNlLXgtNlwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMVwiPlxuICAgICAgICAgICAgICAgIDxFeWUgc2l6ZT17MTZ9IGNsYXNzTmFtZT17aXNEYXJrTW9kZSA/ICd0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktNjAwJ30gLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9IHRleHQtc21gfT57Zm9ybWF0TnVtYmVyKHNvbmcudmlld3MpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0xXCI+XG4gICAgICAgICAgICAgICAgPEhlYXJ0IHNpemU9ezE2fSBjbGFzc05hbWU9e2Ake3NvbmcuaXNMaWtlZCA/ICd0ZXh0LXJlZC01MDAgZmlsbC1yZWQtNTAwJyA6IGlzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9YH0gLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2Ake2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9IHRleHQtc21gfT57Zm9ybWF0TnVtYmVyKHNvbmcubGlrZXMpfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgIHsvKiBQcm9ncmVzcyBCYXIgd2l0aCBUaW1lICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItOFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gdGV4dC1zbSBmb250LW1vbm8gbWItMlwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9PlxuICAgICAgICAgICAgICAgIHtmb3JtYXRUaW1lKGN1cnJlbnRUaW1lKX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9e2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9PlxuICAgICAgICAgICAgICAgIHtmb3JtYXRUaW1lKGR1cmF0aW9uKX1cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgPGlucHV0XG4gIHR5cGU9XCJyYW5nZVwiXG4gIG1pbj17MH1cbiAgbWF4PXtkdXJhdGlvbn1cbiAgc3RlcD17MC4xfVxuICB2YWx1ZT17aXNTZWVraW5nICYmIGxvY2FsU2Vla1RpbWUgIT09IG51bGwgPyBsb2NhbFNlZWtUaW1lIDogY3VycmVudFRpbWV9XG4gIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgIGNvbnN0IG5ld1RpbWUgPSBOdW1iZXIoZS50YXJnZXQudmFsdWUpO1xuICAgIHNldElzU2Vla2luZyh0cnVlKTtcbiAgICBzZXRMb2NhbFNlZWtUaW1lKG5ld1RpbWUpOyAvLyDinIUgU2V0IGRpcmVjdGx5XG4gIH19XG4gIG9uTW91c2VVcD17KCkgPT4ge1xuICAgIGlmIChsb2NhbFNlZWtUaW1lICE9PSBudWxsKSB7XG4gICAgICBzZXRJc1NlZWtpbmcoZmFsc2UpO1xuICAgICAgc2V0Q3VycmVudFRpbWUobG9jYWxTZWVrVGltZSk7IC8vIOKchSBUcmlnZ2VycyBhdWRpb1JlZiBzZWVrIGluIHBhcmVudFxuICAgICAgc2V0TG9jYWxTZWVrVGltZShudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdbTW91c2VVcF0gbG9jYWxTZWVrVGltZSB3YXMgbnVsbCcpO1xuICAgIH1cbiAgfX1cbiAgb25Ub3VjaEVuZD17KCkgPT4ge1xuICAgIGlmIChsb2NhbFNlZWtUaW1lICE9PSBudWxsKSB7XG4gICAgICBzZXRJc1NlZWtpbmcoZmFsc2UpO1xuICAgICAgc2V0Q3VycmVudFRpbWUobG9jYWxTZWVrVGltZSk7IC8vIOKchSBUcmlnZ2VycyBhdWRpb1JlZiBzZWVrIGluIHBhcmVudFxuICAgICAgc2V0TG9jYWxTZWVrVGltZShudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdbVG91Y2hFbmRdIGxvY2FsU2Vla1RpbWUgd2FzIG51bGwnKTtcbiAgICB9XG4gIH19XG4gIGNsYXNzTmFtZT1cInctZnVsbCBoLTIgYXBwZWFyYW5jZS1ub25lIGJnLWdyYXktMzAwIHJvdW5kZWQtZnVsbCBjdXJzb3ItcG9pbnRlclwiXG4gIHN0eWxlPXt7IGFjY2VudENvbG9yOiAnI2E4NTVmNycgfX1cbi8+XG5cbiAgICAgICAgICA8L2Rpdj5cblxuXG4gICAgICAgICAgey8qIE1haW4gQ29udHJvbHMgKi99XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYi04XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHNwYWNlLXgtNlwiPlxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT17YHAtMiAke2lzRGFya01vZGUgPyAnaG92ZXI6YmctZ3JheS04MDAnIDogJ2hvdmVyOmJnLWdyYXktMjAwJ30gcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzYH0+XG4gICAgICAgICAgICAgICAgPFNodWZmbGUgc2l6ZT17MjR9IGNsYXNzTmFtZT17aXNEYXJrTW9kZSA/ICd0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktNjAwJ30gLz5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uUHJldmlvdXN9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC0zICR7aXNEYXJrTW9kZSA/ICdob3ZlcjpiZy1ncmF5LTgwMCcgOiAnaG92ZXI6YmctZ3JheS0yMDAnfSByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1jb2xvcnNgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNraXBCYWNrIHNpemU9ezI4fSBjbGFzc05hbWU9e2lzRGFya01vZGUgPyAndGV4dC13aGl0ZScgOiAndGV4dC1ncmF5LTkwMCd9IC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e29uVG9nZ2xlUGxheX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJwLTQgYmctcHVycGxlLTUwMCBob3ZlcjpiZy1wdXJwbGUtNjAwIHJvdW5kZWQtZnVsbCB0cmFuc2l0aW9uLWNvbG9ycyBzaGFkb3ctbGdcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge2lzUGxheWluZyA/IChcbiAgICAgICAgICAgICAgICAgIDxQYXVzZSBzaXplPXszMn0gY2xhc3NOYW1lPVwidGV4dC13aGl0ZVwiIC8+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxQbGF5IHNpemU9ezMyfSBjbGFzc05hbWU9XCJ0ZXh0LXdoaXRlXCIgZmlsbD1cIndoaXRlXCIgLz5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgb25DbGljaz17b25OZXh0fVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtMyAke2lzRGFya01vZGUgPyAnaG92ZXI6YmctZ3JheS04MDAnIDogJ2hvdmVyOmJnLWdyYXktMjAwJ30gcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxTa2lwRm9yd2FyZCBzaXplPXsyOH0gY2xhc3NOYW1lPXtpc0RhcmtNb2RlID8gJ3RleHQtd2hpdGUnIDogJ3RleHQtZ3JheS05MDAnfSAvPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPXtgcC0yICR7aXNEYXJrTW9kZSA/ICdob3ZlcjpiZy1ncmF5LTgwMCcgOiAnaG92ZXI6YmctZ3JheS0yMDAnfSByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1jb2xvcnNgfT5cbiAgICAgICAgICAgICAgICA8UmVwZWF0IHNpemU9ezI0fSBjbGFzc05hbWU9e2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9IC8+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICB7LyogQm90dG9tIFNlY3Rpb24gd2l0aCBMaWtlIEJ1dHRvbiBhbmQgVm9sdW1lIC0gRmluYWwgc2VjdGlvbiAqL31cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBiLThcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICAgIHsvKiBMaWtlIEJ1dHRvbiAtIEJvdHRvbSBMZWZ0ICovfVxuICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUxpa2V9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIHB4LTQgcHktMiAke3NvbmcuaXNMaWtlZCA/ICdiZy1yZWQtNTAwIGhvdmVyOmJnLXJlZC02MDAnIDogaXNEYXJrTW9kZSA/ICdiZy1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTYwMCcgOiAnYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAnfSByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1jb2xvcnNgfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEhlYXJ0IHNpemU9ezE4fSBjbGFzc05hbWU9e2Ake3NvbmcuaXNMaWtlZCA/ICd0ZXh0LXdoaXRlIGZpbGwtd2hpdGUnIDogaXNEYXJrTW9kZSA/ICd0ZXh0LWdyYXktMzAwJyA6ICd0ZXh0LWdyYXktNzAwJ31gfSAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YHRleHQtc20gZm9udC1tZWRpdW0gJHtzb25nLmlzTGlrZWQgPyAndGV4dC13aGl0ZScgOiBpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS0zMDAnIDogJ3RleHQtZ3JheS03MDAnfWB9PlxuICAgICAgICAgICAgICAgICAge3NvbmcuaXNMaWtlZCA/ICdMaWtlZCcgOiAnTGlrZSd9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHsvKiBWb2x1bWUgQ29udHJvbCAqL31cbiAgICAgICAgICAgICAgey8qIFZvbHVtZSBDb250cm9sICovfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMyBmbGV4LTEgbWF4LXctMzIgbWwtNlwiPlxuICAgICAgICAgICAgICAgIDxWb2x1bWUyIHNpemU9ezIwfSBjbGFzc05hbWU9e2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9IC8+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwicmFuZ2VcIlxuICAgICAgICAgICAgICAgICAgbWluPXswfVxuICAgICAgICAgICAgICAgICAgbWF4PXsxfVxuICAgICAgICAgICAgICAgICAgc3RlcD17MC4wMX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPXt2b2x1bWV9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFZvbHVtZShOdW1iZXIoZS50YXJnZXQudmFsdWUpKX1cbiAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBoLTIgYmctZ3JheS0zMDAgcm91bmRlZC1mdWxsIGFwcGVhcmFuY2Utbm9uZSBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgICAgICBzdHlsZT17eyBhY2NlbnRDb2xvcjogJyNhODU1ZjcnIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIHsvKiBRdWV1ZSBTZWN0aW9uICovfVxuICAgICAgICAgIDxRdWV1ZVNlY3Rpb25cbiAgICAgICAgICAgIHF1ZXVlPXtxdWV1ZX1cbiAgICAgICAgICAgIG9uUmVtb3ZlRnJvbVF1ZXVlPXtvblJlbW92ZUZyb21RdWV1ZX1cbiAgICAgICAgICAgIG9uU29uZ1BsYXk9e29uU29uZ1BsYXl9XG4gICAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWF4aW1pemVkUGxheWVyOyBcblxuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJDaGV2cm9uRG93biIsIk1vcmVIb3Jpem9udGFsIiwiSGVhcnQiLCJTaGFyZTIiLCJQbGF5IiwiUGF1c2UiLCJTa2lwQmFjayIsIlNraXBGb3J3YXJkIiwiVm9sdW1lMiIsIlJlcGVhdCIsIlNodWZmbGUiLCJQbHVzIiwiRXllIiwidXNlVGhlbWUiLCJRdWV1ZVNlY3Rpb24iLCJNYXhpbWl6ZWRQbGF5ZXIiLCJzb25nIiwiaXNQbGF5aW5nIiwib25Ub2dnbGVQbGF5Iiwib25NaW5pbWl6ZSIsIm9uUHJldmlvdXMiLCJvbk5leHQiLCJvblRvZ2dsZUxpa2UiLCJmb3JtYXROdW1iZXIiLCJvbkFkZFRvUGxheWxpc3QiLCJpbWFnZVVybCIsImN1cnJlbnRUaW1lIiwiZHVyYXRpb24iLCJzZXRDdXJyZW50VGltZSIsInZvbHVtZSIsInNldFZvbHVtZSIsInNldElzU2Vla2luZyIsImlzU2Vla2luZyIsInF1ZXVlIiwib25SZW1vdmVGcm9tUXVldWUiLCJvblNvbmdQbGF5IiwiaW1hZ2VVcmxzIiwiaXNEYXJrTW9kZSIsInNob3dNZW51Iiwic2V0U2hvd01lbnUiLCJsb2NhbFNlZWtUaW1lIiwic2V0TG9jYWxTZWVrVGltZSIsImZvcm1hdFRpbWUiLCJzZWNvbmRzIiwiaXNOYU4iLCJpc0Zpbml0ZSIsIm1pbnMiLCJNYXRoIiwiZmxvb3IiLCJzZWNzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsInByb2dyZXNzUGVyY2VudGFnZSIsImhhbmRsZUxpa2UiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic2l6ZSIsInAiLCJpbWciLCJzcmMiLCJpbWFnZSIsImFsdCIsIm5hbWUiLCJoMSIsImFydGlzdCIsInNwYW4iLCJsYW5ndWFnZSIsInZpZXdzIiwiaXNMaWtlZCIsImxpa2VzIiwiaW5wdXQiLCJ0eXBlIiwibWluIiwibWF4Iiwic3RlcCIsInZhbHVlIiwib25DaGFuZ2UiLCJlIiwibmV3VGltZSIsIk51bWJlciIsInRhcmdldCIsIm9uTW91c2VVcCIsImNvbnNvbGUiLCJ3YXJuIiwib25Ub3VjaEVuZCIsInN0eWxlIiwiYWNjZW50Q29sb3IiLCJmaWxsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/MaximizedPlayer.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/QueueSection.tsx":
/*!*************************************!*\
  !*** ./components/QueueSection.tsx ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_GripVertical_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=GripVertical,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/grip-vertical.js\");\n/* harmony import */ var _barrel_optimize_names_GripVertical_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=GripVertical,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ThemeContext */ \"(app-pages-browser)/./components/ThemeContext.tsx\");\n\nvar _s = $RefreshSig$();\n\n\n\nconst QueueSection = (param)=>{\n    let { queue, onRemoveFromQueue, onSongPlay, imageUrls } = param;\n    _s();\n    const { isDarkMode } = (0,_components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme)();\n    if (queue.length === 0) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"mt-6\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-between mb-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-semibold \".concat(isDarkMode ? \"text-white\" : \"text-gray-900\"),\n                        children: \"Next in Queue\"\n                    }, void 0, false, {\n                        fileName: \"/home/project/components/QueueSection.tsx\",\n                        lineNumber: 34,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        className: \"text-sm \".concat(isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                        children: [\n                            queue.length,\n                            \" song\",\n                            queue.length !== 1 ? \"s\" : \"\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/project/components/QueueSection.tsx\",\n                        lineNumber: 37,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/project/components/QueueSection.tsx\",\n                lineNumber: 33,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-2 max-h-64 overflow-y-auto pb-6\",\n                children: queue.map((item, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center p-3 \".concat(isDarkMode ? \"bg-gray-800/50 hover:bg-gray-800\" : \"bg-white/50 hover:bg-white border border-gray-200\", \" rounded-lg transition-all group\"),\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mr-2\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_GripVertical_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                    size: 16,\n                                    className: isDarkMode ? \"text-gray-500\" : \"text-gray-400\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/QueueSection.tsx\",\n                                    lineNumber: 52,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/QueueSection.tsx\",\n                                lineNumber: 51,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"w-6 h-6 rounded-full \".concat(isDarkMode ? \"bg-gray-700 text-gray-300\" : \"bg-gray-200 text-gray-600\", \" flex items-center justify-center text-xs font-medium mr-3\"),\n                                children: index + 1\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/QueueSection.tsx\",\n                                lineNumber: 56,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: imageUrls[item.song.id] || \"/placeholder.png\",\n                                alt: item.song.name,\n                                className: \"w-10 h-10 rounded-lg object-cover mr-3 cursor-pointer\",\n                                onClick: ()=>onSongPlay(item.song)\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/QueueSection.tsx\",\n                                lineNumber: 61,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex-1 min-w-0 cursor-pointer\",\n                                onClick: ()=>onSongPlay(item.song),\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                        className: \"font-medium \".concat(isDarkMode ? \"text-white\" : \"text-gray-900\", \" truncate text-sm\"),\n                                        children: item.song.name\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/QueueSection.tsx\",\n                                        lineNumber: 70,\n                                        columnNumber: 15\n                                    }, undefined),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        className: \"\".concat(isDarkMode ? \"text-gray-400\" : \"text-gray-600\", \" text-xs truncate\"),\n                                        children: item.song.artist\n                                    }, void 0, false, {\n                                        fileName: \"/home/project/components/QueueSection.tsx\",\n                                        lineNumber: 73,\n                                        columnNumber: 15\n                                    }, undefined)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/home/project/components/QueueSection.tsx\",\n                                lineNumber: 69,\n                                columnNumber: 13\n                            }, undefined),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>onRemoveFromQueue(item.id),\n                                className: \"p-1 \".concat(isDarkMode ? \"hover:bg-gray-700\" : \"hover:bg-gray-200\", \" rounded-full transition-colors\"),\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_GripVertical_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                    size: 14,\n                                    className: isDarkMode ? \"text-gray-400\" : \"text-gray-600\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/QueueSection.tsx\",\n                                    lineNumber: 84,\n                                    columnNumber: 15\n                                }, undefined)\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/QueueSection.tsx\",\n                                lineNumber: 79,\n                                columnNumber: 15\n                            }, undefined)\n                        ]\n                    }, item.id, true, {\n                        fileName: \"/home/project/components/QueueSection.tsx\",\n                        lineNumber: 44,\n                        columnNumber: 11\n                    }, undefined))\n            }, void 0, false, {\n                fileName: \"/home/project/components/QueueSection.tsx\",\n                lineNumber: 42,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/components/QueueSection.tsx\",\n        lineNumber: 32,\n        columnNumber: 5\n    }, undefined);\n};\n_s(QueueSection, \"rqvHAxWK5bFT/4scWU48sLiYheY=\", false, function() {\n    return [\n        _components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme\n    ];\n});\n_c = QueueSection;\n/* harmony default export */ __webpack_exports__[\"default\"] = (QueueSection);\nvar _c;\n$RefreshReg$(_c, \"QueueSection\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvUXVldWVTZWN0aW9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEI7QUFDNEI7QUFDRDtBQWdCckQsTUFBTUksZUFBNEM7UUFBQyxFQUNqREMsS0FBSyxFQUNMQyxpQkFBaUIsRUFDakJDLFVBQVUsRUFDVkMsU0FBUyxFQUNWOztJQUNDLE1BQU0sRUFBRUMsVUFBVSxFQUFFLEdBQUdOLGtFQUFRQTtJQUUvQixJQUFJRSxNQUFNSyxNQUFNLEtBQUssR0FBRztRQUN0QixPQUFPO0lBQ1Q7SUFFQSxxQkFDRSw4REFBQ0M7UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0M7d0JBQUdELFdBQVcseUJBQXFFLE9BQTVDSCxhQUFhLGVBQWU7a0NBQW1COzs7Ozs7a0NBR3ZGLDhEQUFDSzt3QkFBS0YsV0FBVyxXQUEwRCxPQUEvQ0gsYUFBYSxrQkFBa0I7OzRCQUN4REosTUFBTUssTUFBTTs0QkFBQzs0QkFBTUwsTUFBTUssTUFBTSxLQUFLLElBQUksTUFBTTs7Ozs7Ozs7Ozs7OzswQkFJbkQsOERBQUNDO2dCQUFJQyxXQUFVOzBCQUNaUCxNQUFNVSxHQUFHLENBQUMsQ0FBQ0MsTUFBTUMsc0JBQ2hCLDhEQUFDTjt3QkFFQ0MsV0FBVyx5QkFFVixPQURDSCxhQUFhLHFDQUFxQyxxREFDbkQ7OzBDQUdELDhEQUFDRTtnQ0FBSUMsV0FBVTswQ0FDYiw0RUFBQ1YsMEZBQVlBO29DQUFDZ0IsTUFBTTtvQ0FBSU4sV0FBV0gsYUFBYSxrQkFBa0I7Ozs7Ozs7Ozs7OzBDQUlwRSw4REFBQ0U7Z0NBQUlDLFdBQVcsd0JBQStGLE9BQXZFSCxhQUFhLDhCQUE4Qiw2QkFBNEI7MENBQzVHUSxRQUFROzs7Ozs7MENBSVgsOERBQUNFO2dDQUNDQyxLQUFLWixTQUFTLENBQUNRLEtBQUtLLElBQUksQ0FBQ0MsRUFBRSxDQUFDLElBQUk7Z0NBQ2hDQyxLQUFLUCxLQUFLSyxJQUFJLENBQUNHLElBQUk7Z0NBQ25CWixXQUFVO2dDQUNWYSxTQUFTLElBQU1sQixXQUFXUyxLQUFLSyxJQUFJOzs7Ozs7MENBSXJDLDhEQUFDVjtnQ0FBSUMsV0FBVTtnQ0FBZ0NhLFNBQVMsSUFBTWxCLFdBQVdTLEtBQUtLLElBQUk7O2tEQUNoRiw4REFBQ0s7d0NBQUdkLFdBQVcsZUFBMkQsT0FBNUNILGFBQWEsZUFBZSxpQkFBZ0I7a0RBQ3ZFTyxLQUFLSyxJQUFJLENBQUNHLElBQUk7Ozs7OztrREFFakIsOERBQUNHO3dDQUFFZixXQUFXLEdBQWtELE9BQS9DSCxhQUFhLGtCQUFrQixpQkFBZ0I7a0RBQzdETyxLQUFLSyxJQUFJLENBQUNPLE1BQU07Ozs7Ozs7Ozs7OzswQ0FLbkIsOERBQUNDO2dDQUNDSixTQUFTLElBQU1uQixrQkFBa0JVLEtBQUtNLEVBQUU7Z0NBQ3hDVixXQUFXLE9BQThELE9BQXZESCxhQUFhLHNCQUFzQixxQkFBb0I7MENBRzNFLDRFQUFDUiwwRkFBQ0E7b0NBQUNpQixNQUFNO29DQUFJTixXQUFXSCxhQUFhLGtCQUFrQjs7Ozs7Ozs7Ozs7O3VCQXZDcERPLEtBQUtNLEVBQUU7Ozs7Ozs7Ozs7Ozs7Ozs7QUE4Q3hCO0dBeEVNbEI7O1FBTW1CRCw4REFBUUE7OztLQU4zQkM7QUEwRU4sK0RBQWVBLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vY29tcG9uZW50cy9RdWV1ZVNlY3Rpb24udHN4PzdmNjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFgsIEdyaXBWZXJ0aWNhbCwgTXVzaWMgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuaW1wb3J0IHsgdXNlVGhlbWUgfSBmcm9tICdAL2NvbXBvbmVudHMvVGhlbWVDb250ZXh0JztcbmltcG9ydCB7IFNvbmcgfSBmcm9tICdAL3R5cGVzJztcblxuaW50ZXJmYWNlIFF1ZXVlSXRlbSB7XG4gIGlkOiBzdHJpbmc7XG4gIHNvbmc6IFNvbmc7XG4gIGFkZGVkQXQ6IERhdGU7XG59XG5cbmludGVyZmFjZSBRdWV1ZVNlY3Rpb25Qcm9wcyB7XG4gIHF1ZXVlOiBRdWV1ZUl0ZW1bXTtcbiAgb25SZW1vdmVGcm9tUXVldWU6IChpdGVtSWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgb25Tb25nUGxheTogKHNvbmc6IGFueSkgPT4gdm9pZDtcbiAgaW1hZ2VVcmxzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xufVxuXG5jb25zdCBRdWV1ZVNlY3Rpb246IFJlYWN0LkZDPFF1ZXVlU2VjdGlvblByb3BzPiA9ICh7XG4gIHF1ZXVlLFxuICBvblJlbW92ZUZyb21RdWV1ZSxcbiAgb25Tb25nUGxheSxcbiAgaW1hZ2VVcmxzXG59KSA9PiB7XG4gIGNvbnN0IHsgaXNEYXJrTW9kZSB9ID0gdXNlVGhlbWUoKTtcblxuICBpZiAocXVldWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNlwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNFwiPlxuICAgICAgICA8aDMgY2xhc3NOYW1lPXtgdGV4dC1sZyBmb250LXNlbWlib2xkICR7aXNEYXJrTW9kZSA/ICd0ZXh0LXdoaXRlJyA6ICd0ZXh0LWdyYXktOTAwJ31gfT5cbiAgICAgICAgICBOZXh0IGluIFF1ZXVlXG4gICAgICAgIDwvaDM+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT17YHRleHQtc20gJHtpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS00MDAnIDogJ3RleHQtZ3JheS02MDAnfWB9PlxuICAgICAgICAgIHtxdWV1ZS5sZW5ndGh9IHNvbmd7cXVldWUubGVuZ3RoICE9PSAxID8gJ3MnIDogJyd9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMiBtYXgtaC02NCBvdmVyZmxvdy15LWF1dG8gcGItNlwiPlxuICAgICAgICB7cXVldWUubWFwKChpdGVtLCBpbmRleCkgPT4gKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGtleT17aXRlbS5pZH1cbiAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIHAtMyAke1xuICAgICAgICAgICAgICBpc0RhcmtNb2RlID8gJ2JnLWdyYXktODAwLzUwIGhvdmVyOmJnLWdyYXktODAwJyA6ICdiZy13aGl0ZS81MCBob3ZlcjpiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwJ1xuICAgICAgICAgICAgfSByb3VuZGVkLWxnIHRyYW5zaXRpb24tYWxsIGdyb3VwYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7LyogRHJhZyBIYW5kbGUgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1yLTJcIj5cbiAgICAgICAgICAgICAgPEdyaXBWZXJ0aWNhbCBzaXplPXsxNn0gY2xhc3NOYW1lPXtpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS01MDAnIDogJ3RleHQtZ3JheS00MDAnfSAvPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIHsvKiBRdWV1ZSBOdW1iZXIgKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHctNiBoLTYgcm91bmRlZC1mdWxsICR7aXNEYXJrTW9kZSA/ICdiZy1ncmF5LTcwMCB0ZXh0LWdyYXktMzAwJyA6ICdiZy1ncmF5LTIwMCB0ZXh0LWdyYXktNjAwJ30gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC14cyBmb250LW1lZGl1bSBtci0zYH0+XG4gICAgICAgICAgICAgIHtpbmRleCArIDF9XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIFNvbmcgSW1hZ2UgKi99XG4gICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgIHNyYz17aW1hZ2VVcmxzW2l0ZW0uc29uZy5pZF0gfHwgJy9wbGFjZWhvbGRlci5wbmcnfVxuICAgICAgICAgICAgICBhbHQ9e2l0ZW0uc29uZy5uYW1lfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LTEwIGgtMTAgcm91bmRlZC1sZyBvYmplY3QtY292ZXIgbXItMyBjdXJzb3ItcG9pbnRlclwiXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uU29uZ1BsYXkoaXRlbS5zb25nKX1cbiAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgIHsvKiBTb25nIEluZm8gKi99XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBtaW4tdy0wIGN1cnNvci1wb2ludGVyXCIgb25DbGljaz17KCkgPT4gb25Tb25nUGxheShpdGVtLnNvbmcpfT5cbiAgICAgICAgICAgICAgPGg0IGNsYXNzTmFtZT17YGZvbnQtbWVkaXVtICR7aXNEYXJrTW9kZSA/ICd0ZXh0LXdoaXRlJyA6ICd0ZXh0LWdyYXktOTAwJ30gdHJ1bmNhdGUgdGV4dC1zbWB9PlxuICAgICAgICAgICAgICAgIHtpdGVtLnNvbmcubmFtZX1cbiAgICAgICAgICAgICAgPC9oND5cbiAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPXtgJHtpc0RhcmtNb2RlID8gJ3RleHQtZ3JheS00MDAnIDogJ3RleHQtZ3JheS02MDAnfSB0ZXh0LXhzIHRydW5jYXRlYH0+XG4gICAgICAgICAgICAgICAge2l0ZW0uc29uZy5hcnRpc3R9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICB7LyogUmVtb3ZlIEJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IG9uUmVtb3ZlRnJvbVF1ZXVlKGl0ZW0uaWQpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtMSAke2lzRGFya01vZGUgPyAnaG92ZXI6YmctZ3JheS03MDAnIDogJ2hvdmVyOmJnLWdyYXktMjAwJ30gcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzYH1cbiAgICAgICAgICAgICAgPlxuXG4gICAgICAgICAgICAgIDxYIHNpemU9ezE0fSBjbGFzc05hbWU9e2lzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCd9IC8+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFF1ZXVlU2VjdGlvbjsiXSwibmFtZXMiOlsiUmVhY3QiLCJYIiwiR3JpcFZlcnRpY2FsIiwidXNlVGhlbWUiLCJRdWV1ZVNlY3Rpb24iLCJxdWV1ZSIsIm9uUmVtb3ZlRnJvbVF1ZXVlIiwib25Tb25nUGxheSIsImltYWdlVXJscyIsImlzRGFya01vZGUiLCJsZW5ndGgiLCJkaXYiLCJjbGFzc05hbWUiLCJoMyIsInNwYW4iLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJzaXplIiwiaW1nIiwic3JjIiwic29uZyIsImlkIiwiYWx0IiwibmFtZSIsIm9uQ2xpY2siLCJoNCIsInAiLCJhcnRpc3QiLCJidXR0b24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/QueueSection.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./hooks/useDynamicPlaylist.ts":
/*!*************************************!*\
  !*** ./hooks/useDynamicPlaylist.ts ***!
  \*************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useDynamicPlaylist: function() { return /* binding */ useDynamicPlaylist; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction useDynamicPlaylist() {\n    const [playlist, setPlaylist] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [currentIndex, setCurrentIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const [playedSongs, setPlayedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Set());\n    const [isInitialized, setIsInitialized] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const getPersonalizedSongsRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const userIdRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // Initialize playlist with last played song\n    const initializePlaylist = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((lastPlayedSong, getPersonalizedSongs, userId)=>{\n        getPersonalizedSongsRef.current = getPersonalizedSongs;\n        userIdRef.current = userId;\n        if (lastPlayedSong && !isInitialized) {\n            const initialItem = {\n                id: \"\".concat(lastPlayedSong.id, \"-\").concat(Date.now()),\n                song: lastPlayedSong,\n                addedAt: new Date(),\n                source: \"last_played\"\n            };\n            setPlaylist([\n                initialItem\n            ]);\n            setCurrentIndex(0);\n            setIsInitialized(true);\n            // Add initial personalized songs\n            loadPersonalizedSongs(lastPlayedSong, userId, getPersonalizedSongs);\n        }\n    }, [\n        isInitialized\n    ]);\n    // Load personalized songs based on a reference song\n    const loadPersonalizedSongs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (referenceSong, userId, getPersonalizedSongs)=>{\n        try {\n            const personalizedSongs = await getPersonalizedSongs(userId, referenceSong);\n            // Filter out already played songs\n            const newSongs = personalizedSongs.filter((song)=>!playedSongs.has(song.id));\n            const newItems = newSongs.map((song)=>({\n                    id: \"\".concat(song.id, \"-\").concat(Date.now(), \"-\").concat(Math.random()),\n                    song,\n                    addedAt: new Date(),\n                    source: \"personalized\"\n                }));\n            setPlaylist((prev)=>[\n                    ...prev,\n                    ...newItems\n                ]);\n        } catch (error) {\n            console.error(\"Error loading personalized songs:\", error);\n        }\n    }, [\n        playedSongs\n    ]);\n    // Get current song\n    const getCurrentSong = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (playlist.length === 0 || currentIndex >= playlist.length) return null;\n        return playlist[currentIndex].song;\n    }, [\n        playlist,\n        currentIndex\n    ]);\n    // Move to next song\n    const moveToNext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        if (playlist.length === 0) return null;\n        const currentSong = getCurrentSong();\n        if (currentSong) {\n            setPlayedSongs((prev)=>new Set(prev).add(currentSong.id));\n        }\n        const nextIndex = currentIndex + 1;\n        // If we're at the second-to-last song, load more personalized songs\n        if (nextIndex >= playlist.length - 1 && playlist.length > 0) {\n            const lastSong = playlist[playlist.length - 1].song;\n            if (getPersonalizedSongsRef.current && userIdRef.current) {\n                await loadPersonalizedSongs(lastSong, userIdRef.current, getPersonalizedSongsRef.current);\n            }\n        }\n        if (nextIndex < playlist.length) {\n            setCurrentIndex(nextIndex);\n            return playlist[nextIndex].song;\n        }\n        return null;\n    }, [\n        playlist,\n        currentIndex,\n        getCurrentSong,\n        loadPersonalizedSongs\n    ]);\n    // Move to previous song\n    const moveToPrevious = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (playlist.length === 0) return null;\n        const prevIndex = currentIndex > 0 ? currentIndex - 1 : playlist.length - 1;\n        setCurrentIndex(prevIndex);\n        return playlist[prevIndex].song;\n    }, [\n        playlist,\n        currentIndex\n    ]);\n    // Add user-selected song and clear future songs\n    const addUserSelectedSong = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (song)=>{\n        const currentSong = getCurrentSong();\n        if (currentSong) {\n            setPlayedSongs((prev)=>new Set(prev).add(currentSong.id));\n        }\n        // Create new playlist starting from the selected song\n        const newItem = {\n            id: \"\".concat(song.id, \"-\").concat(Date.now()),\n            song,\n            addedAt: new Date(),\n            source: \"user_selected\"\n        };\n        setPlaylist([\n            newItem\n        ]);\n        setCurrentIndex(0);\n        // Load personalized songs based on the selected song\n        if (getPersonalizedSongsRef.current && userIdRef.current) {\n            await loadPersonalizedSongs(song, userIdRef.current, getPersonalizedSongsRef.current);\n        }\n        return song;\n    }, [\n        getCurrentSong,\n        loadPersonalizedSongs\n    ]);\n    // Get upcoming songs (for queue display)\n    const getUpcomingSongs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        return playlist.slice(currentIndex + 1).map((item)=>item.song);\n    }, [\n        playlist,\n        currentIndex\n    ]);\n    // Reset playlist\n    const resetPlaylist = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        setPlaylist([]);\n        setCurrentIndex(0);\n        setPlayedSongs(new Set());\n        setIsInitialized(false);\n    }, []);\n    return {\n        playlist,\n        currentIndex,\n        playedSongs,\n        isInitialized,\n        initializePlaylist,\n        getCurrentSong,\n        moveToNext,\n        moveToPrevious,\n        addUserSelectedSong,\n        getUpcomingSongs,\n        resetPlaylist,\n        hasNext: currentIndex < playlist.length - 1,\n        hasPrevious: currentIndex > 0\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZUR5bmFtaWNQbGF5bGlzdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBc0Q7QUFVL0MsU0FBU0c7SUFDZCxNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR0wsK0NBQVFBLENBQWlCLEVBQUU7SUFDM0QsTUFBTSxDQUFDTSxjQUFjQyxnQkFBZ0IsR0FBR1AsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDUSxhQUFhQyxlQUFlLEdBQUdULCtDQUFRQSxDQUFjLElBQUlVO0lBQ2hFLE1BQU0sQ0FBQ0MsZUFBZUMsaUJBQWlCLEdBQUdaLCtDQUFRQSxDQUFDO0lBQ25ELE1BQU1hLDBCQUEwQlgsNkNBQU1BLENBQWtFO0lBQ3hHLE1BQU1ZLFlBQVlaLDZDQUFNQSxDQUFnQjtJQUV4Qyw0Q0FBNEM7SUFDNUMsTUFBTWEscUJBQXFCZCxrREFBV0EsQ0FBQyxDQUFDZSxnQkFBNkJDLHNCQUE4RUM7UUFDakpMLHdCQUF3Qk0sT0FBTyxHQUFHRjtRQUNsQ0gsVUFBVUssT0FBTyxHQUFHRDtRQUVwQixJQUFJRixrQkFBa0IsQ0FBQ0wsZUFBZTtZQUNwQyxNQUFNUyxjQUE0QjtnQkFDaENDLElBQUksR0FBd0JDLE9BQXJCTixlQUFlSyxFQUFFLEVBQUMsS0FBYyxPQUFYQyxLQUFLQyxHQUFHO2dCQUNwQ0MsTUFBTVI7Z0JBQ05TLFNBQVMsSUFBSUg7Z0JBQ2JJLFFBQVE7WUFDVjtZQUVBckIsWUFBWTtnQkFBQ2U7YUFBWTtZQUN6QmIsZ0JBQWdCO1lBQ2hCSyxpQkFBaUI7WUFFakIsaUNBQWlDO1lBQ2pDZSxzQkFBc0JYLGdCQUFnQkUsUUFBUUQ7UUFDaEQ7SUFDRixHQUFHO1FBQUNOO0tBQWM7SUFFbEIsb0RBQW9EO0lBQ3BELE1BQU1nQix3QkFBd0IxQixrREFBV0EsQ0FBQyxPQUFPMkIsZUFBcUJWLFFBQWdCRDtRQUNwRixJQUFJO1lBQ0YsTUFBTVksb0JBQW9CLE1BQU1aLHFCQUFxQkMsUUFBUVU7WUFFN0Qsa0NBQWtD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SU0sd0JBQXdCTSxPQUFPLElBQUlMLFVBQVVLLE9BQU8sRUFBRTtZQUN4RCxNQUFNUSxzQkFBc0JILE1BQU1WLFVBQVVLLE9BQU8sRUFBRU4sd0JBQXdCTSxPQUFPO1FBQ3RGO1FBRUEsT0FBT0s7SUFDVCxHQUFHO1FBQUNnQjtRQUFnQmI7S0FBc0I7SUFFMUMseUNBQXlDO0lBQ3pDLE1BQU13QixtQkFBbUJsRCxrREFBV0EsQ0FBQztRQUNuQyxPQUFPRyxTQUFTZ0QsS0FBSyxDQUFDOUMsZUFBZSxHQUFHNEIsR0FBRyxDQUFDbUIsQ0FBQUEsT0FBUUEsS0FBSzdCLElBQUk7SUFDL0QsR0FBRztRQUFDcEI7UUFBVUU7S0FBYTtJQUUzQixpQkFBaUI7SUFDakIsTUFBTWdELGdCQUFnQnJELGtEQUFXQSxDQUFDO1FBQ2hDSSxZQUFZLEVBQUU7UUFDZEUsZ0JBQWdCO1FBQ2hCRSxlQUFlLElBQUlDO1FBQ25CRSxpQkFBaUI7SUFDbkIsR0FBRyxFQUFFO0lBRUwsT0FBTztRQUNMUjtRQUNBRTtRQUNBRTtRQUNBRztRQUNBSTtRQUNBeUI7UUFDQUU7UUFDQUs7UUFDQUU7UUFDQUU7UUFDQUc7UUFDQUMsU0FBU2pELGVBQWVGLFNBQVNxQyxNQUFNLEdBQUc7UUFDMUNlLGFBQWFsRCxlQUFlO0lBQzlCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vaG9va3MvdXNlRHluYW1pY1BsYXlsaXN0LnRzPzBlZDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBTb25nIH0gZnJvbSAnQC90eXBlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxheWxpc3RJdGVtIHtcbiAgaWQ6IHN0cmluZztcbiAgc29uZzogU29uZztcbiAgYWRkZWRBdDogRGF0ZTtcbiAgc291cmNlOiAnbGFzdF9wbGF5ZWQnIHwgJ3BlcnNvbmFsaXplZCcgfCAndXNlcl9zZWxlY3RlZCc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VEeW5hbWljUGxheWxpc3QoKSB7XG4gIGNvbnN0IFtwbGF5bGlzdCwgc2V0UGxheWxpc3RdID0gdXNlU3RhdGU8UGxheWxpc3RJdGVtW10+KFtdKTtcbiAgY29uc3QgW2N1cnJlbnRJbmRleCwgc2V0Q3VycmVudEluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbcGxheWVkU29uZ3MsIHNldFBsYXllZFNvbmdzXSA9IHVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xuICBjb25zdCBbaXNJbml0aWFsaXplZCwgc2V0SXNJbml0aWFsaXplZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IGdldFBlcnNvbmFsaXplZFNvbmdzUmVmID0gdXNlUmVmPCgodXNlcklkOiBzdHJpbmcsIGN1cnJlbnRTb25nOiBTb25nKSA9PiBQcm9taXNlPFNvbmdbXT4pIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IHVzZXJJZFJlZiA9IHVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBJbml0aWFsaXplIHBsYXlsaXN0IHdpdGggbGFzdCBwbGF5ZWQgc29uZ1xuICBjb25zdCBpbml0aWFsaXplUGxheWxpc3QgPSB1c2VDYWxsYmFjaygobGFzdFBsYXllZFNvbmc6IFNvbmcgfCBudWxsLCBnZXRQZXJzb25hbGl6ZWRTb25nczogKHVzZXJJZDogc3RyaW5nLCBjdXJyZW50U29uZzogU29uZykgPT4gUHJvbWlzZTxTb25nW10+LCB1c2VySWQ6IHN0cmluZykgPT4ge1xuICAgIGdldFBlcnNvbmFsaXplZFNvbmdzUmVmLmN1cnJlbnQgPSBnZXRQZXJzb25hbGl6ZWRTb25ncztcbiAgICB1c2VySWRSZWYuY3VycmVudCA9IHVzZXJJZDtcbiAgICBcbiAgICBpZiAobGFzdFBsYXllZFNvbmcgJiYgIWlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIGNvbnN0IGluaXRpYWxJdGVtOiBQbGF5bGlzdEl0ZW0gPSB7XG4gICAgICAgIGlkOiBgJHtsYXN0UGxheWVkU29uZy5pZH0tJHtEYXRlLm5vdygpfWAsXG4gICAgICAgIHNvbmc6IGxhc3RQbGF5ZWRTb25nLFxuICAgICAgICBhZGRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBzb3VyY2U6ICdsYXN0X3BsYXllZCdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHNldFBsYXlsaXN0KFtpbml0aWFsSXRlbV0pO1xuICAgICAgc2V0Q3VycmVudEluZGV4KDApO1xuICAgICAgc2V0SXNJbml0aWFsaXplZCh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIGluaXRpYWwgcGVyc29uYWxpemVkIHNvbmdzXG4gICAgICBsb2FkUGVyc29uYWxpemVkU29uZ3MobGFzdFBsYXllZFNvbmcsIHVzZXJJZCwgZ2V0UGVyc29uYWxpemVkU29uZ3MpO1xuICAgIH1cbiAgfSwgW2lzSW5pdGlhbGl6ZWRdKTtcblxuICAvLyBMb2FkIHBlcnNvbmFsaXplZCBzb25ncyBiYXNlZCBvbiBhIHJlZmVyZW5jZSBzb25nXG4gIGNvbnN0IGxvYWRQZXJzb25hbGl6ZWRTb25ncyA9IHVzZUNhbGxiYWNrKGFzeW5jIChyZWZlcmVuY2VTb25nOiBTb25nLCB1c2VySWQ6IHN0cmluZywgZ2V0UGVyc29uYWxpemVkU29uZ3M6ICh1c2VySWQ6IHN0cmluZywgY3VycmVudFNvbmc6IFNvbmcpID0+IFByb21pc2U8U29uZ1tdPikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwZXJzb25hbGl6ZWRTb25ncyA9IGF3YWl0IGdldFBlcnNvbmFsaXplZFNvbmdzKHVzZXJJZCwgcmVmZXJlbmNlU29uZyk7XG4gICAgICBcbiAgICAgIC8vIEZpbHRlciBvdXQgYWxyZWFkeSBwbGF5ZWQgc29uZ3NcbiAgICAgIGNvbnN0IG5ld1NvbmdzID0gcGVyc29uYWxpemVkU29uZ3MuZmlsdGVyKHNvbmcgPT4gXG4gICAgICAgICFwbGF5ZWRTb25ncy5oYXMoc29uZy5pZClcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld0l0ZW1zOiBQbGF5bGlzdEl0ZW1bXSA9IG5ld1NvbmdzLm1hcChzb25nID0+ICh7XG4gICAgICAgIGlkOiBgJHtzb25nLmlkfS0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKX1gLFxuICAgICAgICBzb25nLFxuICAgICAgICBhZGRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgICBzb3VyY2U6ICdwZXJzb25hbGl6ZWQnIGFzIGNvbnN0XG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIHNldFBsYXlsaXN0KHByZXYgPT4gWy4uLnByZXYsIC4uLm5ld0l0ZW1zXSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgcGVyc29uYWxpemVkIHNvbmdzOicsIGVycm9yKTtcbiAgICB9XG4gIH0sIFtwbGF5ZWRTb25nc10pO1xuXG4gIC8vIEdldCBjdXJyZW50IHNvbmdcbiAgY29uc3QgZ2V0Q3VycmVudFNvbmcgPSB1c2VDYWxsYmFjaygoKTogU29uZyB8IG51bGwgPT4ge1xuICAgIGlmIChwbGF5bGlzdC5sZW5ndGggPT09IDAgfHwgY3VycmVudEluZGV4ID49IHBsYXlsaXN0Lmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHBsYXlsaXN0W2N1cnJlbnRJbmRleF0uc29uZztcbiAgfSwgW3BsYXlsaXN0LCBjdXJyZW50SW5kZXhdKTtcblxuICAvLyBNb3ZlIHRvIG5leHQgc29uZ1xuICBjb25zdCBtb3ZlVG9OZXh0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCk6IFByb21pc2U8U29uZyB8IG51bGw+ID0+IHtcbiAgICBpZiAocGxheWxpc3QubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBjb25zdCBjdXJyZW50U29uZyA9IGdldEN1cnJlbnRTb25nKCk7XG4gICAgaWYgKGN1cnJlbnRTb25nKSB7XG4gICAgICBzZXRQbGF5ZWRTb25ncyhwcmV2ID0+IG5ldyBTZXQocHJldikuYWRkKGN1cnJlbnRTb25nLmlkKSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCArIDE7XG4gICAgXG4gICAgLy8gSWYgd2UncmUgYXQgdGhlIHNlY29uZC10by1sYXN0IHNvbmcsIGxvYWQgbW9yZSBwZXJzb25hbGl6ZWQgc29uZ3NcbiAgICBpZiAobmV4dEluZGV4ID49IHBsYXlsaXN0Lmxlbmd0aCAtIDEgJiYgcGxheWxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbGFzdFNvbmcgPSBwbGF5bGlzdFtwbGF5bGlzdC5sZW5ndGggLSAxXS5zb25nO1xuICAgICAgaWYgKGdldFBlcnNvbmFsaXplZFNvbmdzUmVmLmN1cnJlbnQgJiYgdXNlcklkUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgYXdhaXQgbG9hZFBlcnNvbmFsaXplZFNvbmdzKGxhc3RTb25nLCB1c2VySWRSZWYuY3VycmVudCwgZ2V0UGVyc29uYWxpemVkU29uZ3NSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChuZXh0SW5kZXggPCBwbGF5bGlzdC5sZW5ndGgpIHtcbiAgICAgIHNldEN1cnJlbnRJbmRleChuZXh0SW5kZXgpO1xuICAgICAgcmV0dXJuIHBsYXlsaXN0W25leHRJbmRleF0uc29uZztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG51bGw7XG4gIH0sIFtwbGF5bGlzdCwgY3VycmVudEluZGV4LCBnZXRDdXJyZW50U29uZywgbG9hZFBlcnNvbmFsaXplZFNvbmdzXSk7XG5cbiAgLy8gTW92ZSB0byBwcmV2aW91cyBzb25nXG4gIGNvbnN0IG1vdmVUb1ByZXZpb3VzID0gdXNlQ2FsbGJhY2soKCk6IFNvbmcgfCBudWxsID0+IHtcbiAgICBpZiAocGxheWxpc3QubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcbiAgICBcbiAgICBjb25zdCBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXggPiAwID8gY3VycmVudEluZGV4IC0gMSA6IHBsYXlsaXN0Lmxlbmd0aCAtIDE7XG4gICAgc2V0Q3VycmVudEluZGV4KHByZXZJbmRleCk7XG4gICAgcmV0dXJuIHBsYXlsaXN0W3ByZXZJbmRleF0uc29uZztcbiAgfSwgW3BsYXlsaXN0LCBjdXJyZW50SW5kZXhdKTtcblxuICAvLyBBZGQgdXNlci1zZWxlY3RlZCBzb25nIGFuZCBjbGVhciBmdXR1cmUgc29uZ3NcbiAgY29uc3QgYWRkVXNlclNlbGVjdGVkU29uZyA9IHVzZUNhbGxiYWNrKGFzeW5jIChzb25nOiBTb25nKSA9PiB7XG4gICAgY29uc3QgY3VycmVudFNvbmcgPSBnZXRDdXJyZW50U29uZygpO1xuICAgIGlmIChjdXJyZW50U29uZykge1xuICAgICAgc2V0UGxheWVkU29uZ3MocHJldiA9PiBuZXcgU2V0KHByZXYpLmFkZChjdXJyZW50U29uZy5pZCkpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgbmV3IHBsYXlsaXN0IHN0YXJ0aW5nIGZyb20gdGhlIHNlbGVjdGVkIHNvbmdcbiAgICBjb25zdCBuZXdJdGVtOiBQbGF5bGlzdEl0ZW0gPSB7XG4gICAgICBpZDogYCR7c29uZy5pZH0tJHtEYXRlLm5vdygpfWAsXG4gICAgICBzb25nLFxuICAgICAgYWRkZWRBdDogbmV3IERhdGUoKSxcbiAgICAgIHNvdXJjZTogJ3VzZXJfc2VsZWN0ZWQnXG4gICAgfTtcbiAgICBcbiAgICBzZXRQbGF5bGlzdChbbmV3SXRlbV0pO1xuICAgIHNldEN1cnJlbnRJbmRleCgwKTtcbiAgICBcbiAgICAvLyBMb2FkIHBlcnNvbmFsaXplZCBzb25ncyBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgc29uZ1xuICAgIGlmIChnZXRQZXJzb25hbGl6ZWRTb25nc1JlZi5jdXJyZW50ICYmIHVzZXJJZFJlZi5jdXJyZW50KSB7XG4gICAgICBhd2FpdCBsb2FkUGVyc29uYWxpemVkU29uZ3Moc29uZywgdXNlcklkUmVmLmN1cnJlbnQsIGdldFBlcnNvbmFsaXplZFNvbmdzUmVmLmN1cnJlbnQpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gc29uZztcbiAgfSwgW2dldEN1cnJlbnRTb25nLCBsb2FkUGVyc29uYWxpemVkU29uZ3NdKTtcblxuICAvLyBHZXQgdXBjb21pbmcgc29uZ3MgKGZvciBxdWV1ZSBkaXNwbGF5KVxuICBjb25zdCBnZXRVcGNvbWluZ1NvbmdzID0gdXNlQ2FsbGJhY2soKCk6IFNvbmdbXSA9PiB7XG4gICAgcmV0dXJuIHBsYXlsaXN0LnNsaWNlKGN1cnJlbnRJbmRleCArIDEpLm1hcChpdGVtID0+IGl0ZW0uc29uZyk7XG4gIH0sIFtwbGF5bGlzdCwgY3VycmVudEluZGV4XSk7XG5cbiAgLy8gUmVzZXQgcGxheWxpc3RcbiAgY29uc3QgcmVzZXRQbGF5bGlzdCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRQbGF5bGlzdChbXSk7XG4gICAgc2V0Q3VycmVudEluZGV4KDApO1xuICAgIHNldFBsYXllZFNvbmdzKG5ldyBTZXQoKSk7XG4gICAgc2V0SXNJbml0aWFsaXplZChmYWxzZSk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4ge1xuICAgIHBsYXlsaXN0LFxuICAgIGN1cnJlbnRJbmRleCxcbiAgICBwbGF5ZWRTb25ncyxcbiAgICBpc0luaXRpYWxpemVkLFxuICAgIGluaXRpYWxpemVQbGF5bGlzdCxcbiAgICBnZXRDdXJyZW50U29uZyxcbiAgICBtb3ZlVG9OZXh0LFxuICAgIG1vdmVUb1ByZXZpb3VzLFxuICAgIGFkZFVzZXJTZWxlY3RlZFNvbmcsXG4gICAgZ2V0VXBjb21pbmdTb25ncyxcbiAgICByZXNldFBsYXlsaXN0LFxuICAgIGhhc05leHQ6IGN1cnJlbnRJbmRleCA8IHBsYXlsaXN0Lmxlbmd0aCAtIDEsXG4gICAgaGFzUHJldmlvdXM6IGN1cnJlbnRJbmRleCA+IDBcbiAgfTtcbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VDYWxsYmFjayIsInVzZVJlZiIsInVzZUR5bmFtaWNQbGF5bGlzdCIsInBsYXlsaXN0Iiwic2V0UGxheWxpc3QiLCJjdXJyZW50SW5kZXgiLCJzZXRDdXJyZW50SW5kZXgiLCJwbGF5ZWRTb25ncyIsInNldFBsYXllZFNvbmdzIiwiU2V0IiwiaXNJbml0aWFsaXplZCIsInNldElzSW5pdGlhbGl6ZWQiLCJnZXRQZXJzb25hbGl6ZWRTb25nc1JlZiIsInVzZXJJZFJlZiIsImluaXRpYWxpemVQbGF5bGlzdCIsImxhc3RQbGF5ZWRTb25nIiwiZ2V0UGVyc29uYWxpemVkU29uZ3MiLCJ1c2VySWQiLCJjdXJyZW50IiwiaW5pdGlhbEl0ZW0iLCJpZCIsIkRhdGUiLCJub3ciLCJzb25nIiwiYWRkZWRBdCIsInNvdXJjZSIsImxvYWRQZXJzb25hbGl6ZWRTb25ncyIsInJlZmVyZW5jZVNvbmciLCJwZXJzb25hbGl6ZWRTb25ncyIsIm5ld1NvbmdzIiwiZmlsdGVyIiwiaGFzIiwibmV3SXRlbXMiLCJtYXAiLCJNYXRoIiwicmFuZG9tIiwicHJldiIsImVycm9yIiwiY29uc29sZSIsImdldEN1cnJlbnRTb25nIiwibGVuZ3RoIiwibW92ZVRvTmV4dCIsImN1cnJlbnRTb25nIiwiYWRkIiwibmV4dEluZGV4IiwibGFzdFNvbmciLCJtb3ZlVG9QcmV2aW91cyIsInByZXZJbmRleCIsImFkZFVzZXJTZWxlY3RlZFNvbmciLCJuZXdJdGVtIiwiZ2V0VXBjb21pbmdTb25ncyIsInNsaWNlIiwiaXRlbSIsInJlc2V0UGxheWxpc3QiLCJoYXNOZXh0IiwiaGFzUHJldmlvdXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useDynamicPlaylist.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./hooks/useSupabaseData.ts":
/*!**********************************!*\
  !*** ./hooks/useSupabaseData.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSupabaseData: function() { return /* binding */ useSupabaseData; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(app-pages-browser)/./lib/supabase.ts\");\n\n\nfunction useSupabaseData(user) {\n    const [songs, setSongs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [playlists, setPlaylists] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n    const [likedSongs, setLikedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(new Set());\n    const [lastPlayedSong, setLastPlayedSong] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [currentSongStartTime, setCurrentSongStartTime] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const currentSongRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    // Convert database song to UI song format\n    const convertDatabaseSong = function(dbSong) {\n        let isLiked = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;\n        return {\n            file_id: dbSong.file_id,\n            img_id: dbSong.img_id,\n            name: dbSong.name,\n            artist: dbSong.artist,\n            language: dbSong.language,\n            tags: dbSong.tags,\n            views: dbSong.views,\n            likes: dbSong.likes,\n            id: dbSong.file_id.toString(),\n            image: \"https://images.pexels.com/photos/\".concat(dbSong.img_id, \"/pexels-photo-\").concat(dbSong.img_id, \".jpeg?auto=compress&cs=tinysrgb&w=300\"),\n            isLiked\n        };\n    };\n    // Fetch all songs\n    const fetchSongs = async ()=>{\n        if (!user) {\n            setSongs([]);\n            return;\n        }\n        try {\n            const { data: songsData, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"songs\").select(\"*\").order(\"views\", {\n                ascending: false\n            });\n            if (error) throw error;\n            let userLikedSongs = new Set();\n            const { data: likedData } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"liked_songs\").select(\"song_id\").eq(\"user_id\", user.id);\n            if (likedData) {\n                userLikedSongs = new Set(likedData.map((item)=>item.song_id));\n                setLikedSongs(userLikedSongs);\n            }\n            const convertedSongs = (songsData === null || songsData === void 0 ? void 0 : songsData.map((song)=>convertDatabaseSong(song, userLikedSongs.has(song.file_id)))) || [];\n            const sortedSongs = [\n                ...convertedSongs\n            ].sort((a, b)=>{\n                const aScore = a.views + a.likes;\n                const bScore = b.views + b.likes;\n                return bScore - aScore;\n            });\n            setSongs(sortedSongs);\n            const { data: userData } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"users\").select(\"last_song_file_id\").eq(\"id\", user.id).single();\n            if (userData === null || userData === void 0 ? void 0 : userData.last_song_file_id) {\n                const lastSong = convertedSongs.find((song)=>song.file_id === userData.last_song_file_id);\n                if (lastSong) {\n                    setLastPlayedSong(lastSong);\n                }\n            }\n        } catch (error) {\n            console.error(\"Error fetching songs:\", error);\n            setSongs([]) // Set empty array on error\n            ;\n        }\n    };\n    async function getPersonalizedSongs(userId, currentSong) {\n        // 1. Fetch all songs\n        const { data: songs, error: songsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"songs\").select(\"*\");\n        if (songsError) {\n            console.error(\"Error fetching songs for personalization:\", songsError);\n            return [];\n        }\n        if (!songs) return [];\n        // 2. Fetch listening history\n        const { data: history } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"history\").select(\"*\").eq(\"user_id\", userId);\n        const historyMap = new Map(history === null || history === void 0 ? void 0 : history.map((h)=>[\n                h.song_id,\n                h.minutes_listened\n            ]));\n        // 3. Fetch played songs to exclude them\n        const { data: playedSongsData } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"played_songs\").select(\"song_id\").eq(\"user_id\", userId);\n        const playedSongIds = new Set((playedSongsData === null || playedSongsData === void 0 ? void 0 : playedSongsData.map((p)=>p.song_id)) || []);\n        const recommendations = songs.filter((song)=>song.file_id !== currentSong.file_id && // exclude current song\n            !playedSongIds.has(song.file_id) // exclude already played songs\n        ).map((song)=>{\n            let score = 0;\n            // 🎯 Tag Match\n            const matchingTags = song.tags.filter((tag)=>currentSong.tags.includes(tag));\n            score += matchingTags.length * 10;\n            // 👤 Artist Match\n            if (song.artist === currentSong.artist) {\n                score += 20;\n            }\n            // ⏱ Listening History Boost\n            const listenedMinutes = historyMap.get(song.file_id) || 0;\n            score += listenedMinutes;\n            // ❤️ Likes Boost\n            score += (song.likes || 0) / 100;\n            // 👁 Views Boost\n            score += (song.views || 0) / 1000;\n            return {\n                song,\n                score\n            };\n        });\n        // 4. Sort and return top 5\n        const top5 = recommendations.sort((a, b)=>b.score - a.score).slice(0, 5).map((entry)=>convertDatabaseSong(entry.song, false)); // Convert to UI format\n        console.log(\"\\uD83C\\uDFB5 Personalized Top 5 Songs:\", top5);\n        return top5;\n    }\n    // Fetch user playlists\n    const fetchPlaylists = async ()=>{\n        if (!user) {\n            setPlaylists([]);\n            return;\n        }\n        try {\n            const { data: playlistsData, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"playlists\").select(\"\\n          id,\\n          name,\\n          playlist_songs (\\n            songs (*)\\n          )\\n        \").eq(\"user_id\", user.id);\n            if (error) throw error;\n            const convertedPlaylists = (playlistsData === null || playlistsData === void 0 ? void 0 : playlistsData.map((playlist)=>{\n                var _playlist_playlist_songs, _playlistSongs_;\n                const playlistSongs = ((_playlist_playlist_songs = playlist.playlist_songs) === null || _playlist_playlist_songs === void 0 ? void 0 : _playlist_playlist_songs.map((ps)=>convertDatabaseSong(ps.songs, likedSongs.has(ps.songs.file_id)))) || [];\n                return {\n                    id: playlist.id.toString(),\n                    name: playlist.name,\n                    songCount: playlistSongs.length,\n                    image: ((_playlistSongs_ = playlistSongs[0]) === null || _playlistSongs_ === void 0 ? void 0 : _playlistSongs_.image) || \"https://images.pexels.com/photos/1763075/pexels-photo-1763075.jpeg?auto=compress&cs=tinysrgb&w=300\",\n                    songs: playlistSongs\n                };\n            })) || [];\n            setPlaylists(convertedPlaylists);\n        } catch (error) {\n            console.error(\"Error fetching playlists:\", error);\n        }\n    };\n    // Toggle like song\n    const toggleLike = async (songId)=>{\n        if (!user) return;\n        const songFileId = parseInt(songId);\n        const isCurrentlyLiked = likedSongs.has(songFileId);\n        try {\n            if (isCurrentlyLiked) {\n                // Remove from liked_songs\n                const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"liked_songs\").delete().eq(\"user_id\", user.id).eq(\"song_id\", songFileId);\n                if (error) throw error;\n                // Decrement likes\n                await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.rpc(\"decrement_song_likes\", {\n                    song_file_id: songFileId\n                });\n                setLikedSongs((prev)=>{\n                    const newSet = new Set(prev);\n                    newSet.delete(songFileId);\n                    return newSet;\n                });\n            } else {\n                // Add to liked_songs\n                const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"liked_songs\").insert({\n                    user_id: user.id,\n                    song_id: songFileId\n                });\n                if (error) throw error;\n                // Increment likes\n                await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.rpc(\"increment_song_likes\", {\n                    song_file_id: songFileId\n                });\n                setLikedSongs((prev)=>new Set(prev).add(songFileId));\n            }\n            // Update songs state\n            // Update songs state\n            setSongs((prevSongs)=>prevSongs.map((song)=>song.id === songId ? {\n                        ...song,\n                        isLiked: !isCurrentlyLiked,\n                        likes: song.likes + (isCurrentlyLiked ? -1 : 1)\n                    } : song));\n            // Update playlists state\n            setPlaylists((prevPlaylists)=>prevPlaylists.map((playlist)=>({\n                        ...playlist,\n                        songs: playlist.songs.map((song)=>song.id === songId ? {\n                                ...song,\n                                isLiked: !isCurrentlyLiked,\n                                likes: song.likes + (isCurrentlyLiked ? -1 : 1)\n                            } : song)\n                    })));\n        } catch (error) {\n            console.error(\"Error toggling like:\", error);\n        }\n    };\n    // Create playlist\n    const createPlaylist = async (name)=>{\n        if (!user) return;\n        try {\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"playlists\").insert({\n                user_id: user.id,\n                name\n            }).select().single();\n            if (error) throw error;\n            const newPlaylist = {\n                id: data.id.toString(),\n                name: data.name,\n                songCount: 0,\n                image: \"https://images.pexels.com/photos/1763075/pexels-photo-1763075.jpeg?auto=compress&cs=tinysrgb&w=300\",\n                songs: []\n            };\n            setPlaylists((prev)=>[\n                    ...prev,\n                    newPlaylist\n                ]);\n        } catch (error) {\n            console.error(\"Error creating playlist:\", error);\n        }\n    };\n    // Delete playlist\n    const deletePlaylist = async (playlistId)=>{\n        if (!user) return;\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"playlists\").delete().eq(\"id\", parseInt(playlistId)).eq(\"user_id\", user.id);\n            if (error) throw error;\n            setPlaylists((prev)=>prev.filter((playlist)=>playlist.id !== playlistId));\n        } catch (error) {\n            console.error(\"Error deleting playlist:\", error);\n        }\n    };\n    // Rename playlist\n    const renamePlaylist = async (playlistId, newName)=>{\n        if (!user) return;\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"playlists\").update({\n                name: newName\n            }).eq(\"id\", parseInt(playlistId)).eq(\"user_id\", user.id);\n            if (error) throw error;\n            setPlaylists((prev)=>prev.map((playlist)=>playlist.id === playlistId ? {\n                        ...playlist,\n                        name: newName\n                    } : playlist));\n        } catch (error) {\n            console.error(\"Error renaming playlist:\", error);\n        }\n    };\n    // Add song to playlist\n    const addSongToPlaylist = async (playlistId, song)=>{\n        if (!user) return;\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"playlist_songs\").insert({\n                playlist_id: parseInt(playlistId),\n                song_id: song.file_id\n            });\n            if (error) throw error;\n            setPlaylists((prev)=>prev.map((playlist)=>{\n                    if (playlist.id === playlistId) {\n                        const songExists = playlist.songs.some((s)=>s.id === song.id);\n                        if (!songExists) {\n                            var _updatedSongs_;\n                            const updatedSongs = [\n                                ...playlist.songs,\n                                song\n                            ];\n                            return {\n                                ...playlist,\n                                songs: updatedSongs,\n                                songCount: updatedSongs.length,\n                                image: ((_updatedSongs_ = updatedSongs[0]) === null || _updatedSongs_ === void 0 ? void 0 : _updatedSongs_.image) || playlist.image\n                            };\n                        }\n                    }\n                    return playlist;\n                }));\n        } catch (error) {\n            console.error(\"Error adding song to playlist:\", error);\n        }\n    };\n    // Remove song from playlist\n    const removeSongFromPlaylist = async (playlistId, songId)=>{\n        if (!user) return;\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"playlist_songs\").delete().eq(\"playlist_id\", parseInt(playlistId)).eq(\"song_id\", parseInt(songId));\n            if (error) throw error;\n            setPlaylists((prev)=>prev.map((playlist)=>{\n                    if (playlist.id === playlistId) {\n                        var _updatedSongs_;\n                        const updatedSongs = playlist.songs.filter((song)=>song.id !== songId);\n                        return {\n                            ...playlist,\n                            songs: updatedSongs,\n                            songCount: updatedSongs.length,\n                            image: ((_updatedSongs_ = updatedSongs[0]) === null || _updatedSongs_ === void 0 ? void 0 : _updatedSongs_.image) || \"https://images.pexels.com/photos/1763075/pexels-photo-1763075.jpeg?auto=compress&cs=tinysrgb&w=300\"\n                        };\n                    }\n                    return playlist;\n                }));\n        } catch (error) {\n            console.error(\"Error removing song from playlist:\", error);\n        }\n    };\n    // Update last song in user profile\n    const updateLastSong = async (songId)=>{\n        if (!user) return;\n        try {\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"users\").update({\n                last_song_file_id: parseInt(songId)\n            }).eq(\"id\", user.id);\n            if (error) throw error;\n        } catch (error) {\n            console.error(\"Error updating last song:\", error);\n        }\n    };\n    // Record listening history with proper time tracking\n    const recordListeningHistory = async (songId)=>{\n        if (!user) return;\n        // If there's a previous song playing, record its listening time\n        if (currentSongRef.current && currentSongStartTime) {\n            const endTime = new Date();\n            const minutesListened = (endTime.getTime() - currentSongStartTime.getTime()) / (1000 * 60);\n            if (minutesListened > 0.1) {\n                try {\n                    const minutes = Math.round(minutesListened * 100) / 100;\n                    const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.rpc(\"upsert_history_minutes\", {\n                        user_uuid: user.id,\n                        song_file_id: parseInt(currentSongRef.current),\n                        minutes: minutes\n                    });\n                    if (error) {\n                        console.error(\"❌ Error recording song history:\", error);\n                    } else {\n                        console.log(\"✅ History updated: +\".concat(minutes, \" mins for song \").concat(currentSongRef.current));\n                    }\n                    // Also add to played songs\n                    await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"played_songs\").upsert({\n                        user_id: user.id,\n                        song_id: parseInt(currentSongRef.current),\n                        played_at: new Date().toISOString()\n                    });\n                } catch (error) {\n                    console.error(\"Error recording previous song history:\", error);\n                }\n            }\n        }\n        // Set new song as current\n        currentSongRef.current = songId;\n        setCurrentSongStartTime(new Date());\n        // Update last song in user profile\n        await updateLastSong(songId);\n        try {\n            await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.rpc(\"increment_song_views\", {\n                song_file_id: parseInt(songId)\n            });\n        } catch (error) {\n            console.error(\"Error incrementing song views:\", error);\n        }\n    };\n    // Stop current song tracking (when player is closed)\n    const stopCurrentSongTracking = async ()=>{\n        if (currentSongRef.current && currentSongStartTime && user) {\n            const endTime = new Date();\n            const minutesListened = (endTime.getTime() - currentSongStartTime.getTime()) / (1000 * 60);\n            if (minutesListened > 0.1) {\n                try {\n                    const minutes = Math.round(minutesListened * 100) / 100;\n                    const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.rpc(\"upsert_history_minutes\", {\n                        user_uuid: user.id,\n                        song_file_id: parseInt(currentSongRef.current),\n                        minutes: minutes\n                    });\n                    if (error) {\n                        console.error(\"❌ Error recording song history on stop:\", error);\n                    } else {\n                        console.log(\"\\uD83D\\uDED1 History updated on stop: +\".concat(minutes, \" mins for song \").concat(currentSongRef.current));\n                    }\n                    // Also add to played songs\n                    await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"played_songs\").upsert({\n                        user_id: user.id,\n                        song_id: parseInt(currentSongRef.current),\n                        played_at: new Date().toISOString()\n                    });\n                } catch (error) {\n                    console.error(\"Error recording final song history:\", error);\n                }\n            }\n        }\n        currentSongRef.current = null;\n        setCurrentSongStartTime(null);\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const loadData = async ()=>{\n            if (!user) {\n                // Reset data when user logs out\n                setSongs([]);\n                setPlaylists([]);\n                setLikedSongs(new Set());\n                setLastPlayedSong(null);\n                setLoading(false);\n                return;\n            }\n            try {\n                setLoading(true);\n                await Promise.all([\n                    fetchSongs(),\n                    fetchPlaylists()\n                ]);\n            } catch (error) {\n                console.error(\"Error loading data:\", error);\n            } finally{\n                setLoading(false);\n            }\n        };\n        loadData();\n    }, [\n        user\n    ]);\n    return {\n        songs,\n        playlists,\n        likedSongs: songs.filter((song)=>song.isLiked),\n        lastPlayedSong,\n        loading,\n        toggleLike,\n        createPlaylist,\n        deletePlaylist,\n        renamePlaylist,\n        addSongToPlaylist,\n        removeSongFromPlaylist,\n        recordListeningHistory,\n        stopCurrentSongTracking,\n        refreshData: ()=>{\n            fetchSongs();\n            fetchPlaylists();\n        },\n        getPersonalizedSongs\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZVN1cGFiYXNlRGF0YS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1EO0FBRXNCO0FBR2xFLFNBQVNJLGdCQUFnQkMsSUFBaUI7SUFDL0MsTUFBTSxDQUFDQyxPQUFPQyxTQUFTLEdBQUdQLCtDQUFRQSxDQUFTLEVBQUU7SUFDN0MsTUFBTSxDQUFDUSxXQUFXQyxhQUFhLEdBQUdULCtDQUFRQSxDQUFhLEVBQUU7SUFDekQsTUFBTSxDQUFDVSxZQUFZQyxjQUFjLEdBQUdYLCtDQUFRQSxDQUFjLElBQUlZO0lBQzlELE1BQU0sQ0FBQ0MsZ0JBQWdCQyxrQkFBa0IsR0FBR2QsK0NBQVFBLENBQWM7SUFDbEUsTUFBTSxDQUFDZSxTQUFTQyxXQUFXLEdBQUdoQiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNLENBQUNpQixzQkFBc0JDLHdCQUF3QixHQUFHbEIsK0NBQVFBLENBQWM7SUFDOUUsTUFBTW1CLGlCQUFpQmpCLDZDQUFNQSxDQUFnQjtJQUU3QywwQ0FBMEM7SUFDMUMsTUFBTWtCLHNCQUFzQixTQUFDQztZQUFzQkMsMkVBQW1CO2VBQWlCO1lBQ3JGQyxTQUFTRixPQUFPRSxPQUFPO1lBQ3ZCQyxRQUFRSCxPQUFPRyxNQUFNO1lBQ3JCQyxNQUFNSixPQUFPSSxJQUFJO1lBQ2pCQyxRQUFRTCxPQUFPSyxNQUFNO1lBQ3JCQyxVQUFVTixPQUFPTSxRQUFRO1lBQ3pCQyxNQUFNUCxPQUFPTyxJQUFJO1lBQ2pCQyxPQUFPUixPQUFPUSxLQUFLO1lBQ25CQyxPQUFPVCxPQUFPUyxLQUFLO1lBQ25CQyxJQUFJVixPQUFPRSxPQUFPLENBQUNTLFFBQVE7WUFDM0JDLE9BQU8sb0NBQWtFWixPQUE5QkEsT0FBT0csTUFBTSxFQUFDLGtCQUE4QixPQUFkSCxPQUFPRyxNQUFNLEVBQUM7WUFDdkZGO1FBQ0Y7O0lBRUEsa0JBQWtCO0lBQ2xCLE1BQU1ZLGFBQWE7UUFDakIsSUFBSSxDQUFDN0IsTUFBTTtZQUNURSxTQUFTLEVB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O1FBQ3pCN0csd0JBQXdCO0lBQzFCO0lBRUFqQixnREFBU0EsQ0FBQztRQUNSLE1BQU0ySSxXQUFXO1lBQ2YsSUFBSSxDQUFDdkksTUFBTTtnQkFDVCxnQ0FBZ0M7Z0JBQ2hDRSxTQUFTLEVBQUU7Z0JBQ1hFLGFBQWEsRUFBRTtnQkFDZkUsY0FBYyxJQUFJQztnQkFDbEJFLGtCQUFrQjtnQkFDbEJFLFdBQVc7Z0JBQ1g7WUFDRjtZQUVBLElBQUk7Z0JBQ0ZBLFdBQVc7Z0JBQ1gsTUFBTTZILFFBQVFDLEdBQUcsQ0FBQztvQkFBQzVHO29CQUFjc0Q7aUJBQWlCO1lBQ3BELEVBQUUsT0FBT25ELE9BQU87Z0JBQ2R5QixRQUFRekIsS0FBSyxDQUFDLHVCQUF1QkE7WUFDdkMsU0FBVTtnQkFDUnJCLFdBQVc7WUFDYjtRQUNGO1FBRUE0SDtJQUNGLEdBQUc7UUFBQ3ZJO0tBQUs7SUFFVCxPQUFPO1FBQ0xDO1FBQ0FFO1FBQ0FFLFlBQVlKLE1BQU1zRSxNQUFNLENBQUMzQixDQUFBQSxPQUFRQSxLQUFLM0IsT0FBTztRQUM3Q1Q7UUFDQUU7UUFDQWlGO1FBQ0FlO1FBQ0FFO1FBQ0FFO1FBQ0FHO1FBQ0FNO1FBQ0FFO1FBQ0FhO1FBQ0FJLGFBQWE7WUFDWDdHO1lBQ0FzRDtRQUNGO1FBQ0F6QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vaG9va3MvdXNlU3VwYWJhc2VEYXRhLnRzP2FiZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuaW1wb3J0IHsgc3VwYWJhc2UsIERhdGFiYXNlU29uZywgRGF0YWJhc2VQbGF5bGlzdCB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJ1xuaW1wb3J0IHsgU29uZywgUGxheWxpc3QgfSBmcm9tICdAL3R5cGVzJ1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3VwYWJhc2VEYXRhKHVzZXI6IFVzZXIgfCBudWxsKSB7XG4gIGNvbnN0IFtzb25ncywgc2V0U29uZ3NdID0gdXNlU3RhdGU8U29uZ1tdPihbXSlcbiAgY29uc3QgW3BsYXlsaXN0cywgc2V0UGxheWxpc3RzXSA9IHVzZVN0YXRlPFBsYXlsaXN0W10+KFtdKVxuICBjb25zdCBbbGlrZWRTb25ncywgc2V0TGlrZWRTb25nc10gPSB1c2VTdGF0ZTxTZXQ8bnVtYmVyPj4obmV3IFNldCgpKVxuICBjb25zdCBbbGFzdFBsYXllZFNvbmcsIHNldExhc3RQbGF5ZWRTb25nXSA9IHVzZVN0YXRlPFNvbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKVxuICBjb25zdCBbY3VycmVudFNvbmdTdGFydFRpbWUsIHNldEN1cnJlbnRTb25nU3RhcnRUaW1lXSA9IHVzZVN0YXRlPERhdGUgfCBudWxsPihudWxsKVxuICBjb25zdCBjdXJyZW50U29uZ1JlZiA9IHVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKVxuXG4gIC8vIENvbnZlcnQgZGF0YWJhc2Ugc29uZyB0byBVSSBzb25nIGZvcm1hdFxuICBjb25zdCBjb252ZXJ0RGF0YWJhc2VTb25nID0gKGRiU29uZzogRGF0YWJhc2VTb25nLCBpc0xpa2VkOiBib29sZWFuID0gZmFsc2UpOiBTb25nID0+ICh7XG4gICAgZmlsZV9pZDogZGJTb25nLmZpbGVfaWQsXG4gICAgaW1nX2lkOiBkYlNvbmcuaW1nX2lkLFxuICAgIG5hbWU6IGRiU29uZy5uYW1lLFxuICAgIGFydGlzdDogZGJTb25nLmFydGlzdCxcbiAgICBsYW5ndWFnZTogZGJTb25nLmxhbmd1YWdlLFxuICAgIHRhZ3M6IGRiU29uZy50YWdzLFxuICAgIHZpZXdzOiBkYlNvbmcudmlld3MsXG4gICAgbGlrZXM6IGRiU29uZy5saWtlcyxcbiAgICBpZDogZGJTb25nLmZpbGVfaWQudG9TdHJpbmcoKSxcbiAgICBpbWFnZTogYGh0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLyR7ZGJTb25nLmltZ19pZH0vcGV4ZWxzLXBob3RvLSR7ZGJTb25nLmltZ19pZH0uanBlZz9hdXRvPWNvbXByZXNzJmNzPXRpbnlzcmdiJnc9MzAwYCxcbiAgICBpc0xpa2VkXG4gIH0pXG5cbiAgLy8gRmV0Y2ggYWxsIHNvbmdzXG4gIGNvbnN0IGZldGNoU29uZ3MgPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBzZXRTb25ncyhbXSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhOiBzb25nc0RhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnc29uZ3MnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLm9yZGVyKCd2aWV3cycsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG5cbiAgICAgIGxldCB1c2VyTGlrZWRTb25ncyA9IG5ldyBTZXQ8bnVtYmVyPigpXG4gICAgICBcbiAgICAgIGNvbnN0IHsgZGF0YTogbGlrZWREYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbGlrZWRfc29uZ3MnKVxuICAgICAgICAuc2VsZWN0KCdzb25nX2lkJylcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlci5pZClcbiAgICAgIFxuICAgICAgaWYgKGxpa2VkRGF0YSkge1xuICAgICAgICB1c2VyTGlrZWRTb25ncyA9IG5ldyBTZXQobGlrZWREYXRhLm1hcChpdGVtID0+IGl0ZW0uc29uZ19pZCkpXG4gICAgICAgIHNldExpa2VkU29uZ3ModXNlckxpa2VkU29uZ3MpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbnZlcnRlZFNvbmdzID0gc29uZ3NEYXRhPy5tYXAoc29uZyA9PiBcbiAgICAgICAgY29udmVydERhdGFiYXNlU29uZyhzb25nLCB1c2VyTGlrZWRTb25ncy5oYXMoc29uZy5maWxlX2lkKSlcbiAgICAgICkgfHwgW11cblxuICAgICAgY29uc3Qgc29ydGVkU29uZ3MgPSBbLi4uY29udmVydGVkU29uZ3NdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgYVNjb3JlID0gYS52aWV3cyArIGEubGlrZXM7XG4gICAgICAgIGNvbnN0IGJTY29yZSA9IGIudmlld3MgKyBiLmxpa2VzO1xuICAgICAgICByZXR1cm4gYlNjb3JlIC0gYVNjb3JlO1xuICAgICAgfSk7XG5cbiAgICAgIHNldFNvbmdzKHNvcnRlZFNvbmdzKTtcblxuICAgICAgY29uc3QgeyBkYXRhOiB1c2VyRGF0YSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3VzZXJzJylcbiAgICAgICAgLnNlbGVjdCgnbGFzdF9zb25nX2ZpbGVfaWQnKVxuICAgICAgICAuZXEoJ2lkJywgdXNlci5pZClcbiAgICAgICAgLnNpbmdsZSgpXG5cbiAgICAgIGlmICh1c2VyRGF0YT8ubGFzdF9zb25nX2ZpbGVfaWQpIHtcbiAgICAgICAgY29uc3QgbGFzdFNvbmcgPSBjb252ZXJ0ZWRTb25ncy5maW5kKHNvbmcgPT4gc29uZy5maWxlX2lkID09PSB1c2VyRGF0YS5sYXN0X3NvbmdfZmlsZV9pZClcbiAgICAgICAgaWYgKGxhc3RTb25nKSB7XG4gICAgICAgICAgc2V0TGFzdFBsYXllZFNvbmcobGFzdFNvbmcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc29uZ3M6JywgZXJyb3IpXG4gICAgICBzZXRTb25ncyhbXSkgLy8gU2V0IGVtcHR5IGFycmF5IG9uIGVycm9yXG4gICAgfVxuICB9XG5cblxuYXN5bmMgZnVuY3Rpb24gZ2V0UGVyc29uYWxpemVkU29uZ3ModXNlcklkOiBzdHJpbmcsIGN1cnJlbnRTb25nOiBTb25nKSB7XG4gIC8vIDEuIEZldGNoIGFsbCBzb25nc1xuICBjb25zdCB7IGRhdGE6IHNvbmdzLCBlcnJvcjogc29uZ3NFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbSgnc29uZ3MnKS5zZWxlY3QoJyonKTtcbiAgaWYgKHNvbmdzRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBzb25ncyBmb3IgcGVyc29uYWxpemF0aW9uOicsIHNvbmdzRXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBpZiAoIXNvbmdzKSByZXR1cm4gW107XG5cbiAgLy8gMi4gRmV0Y2ggbGlzdGVuaW5nIGhpc3RvcnlcbiAgY29uc3QgeyBkYXRhOiBoaXN0b3J5IH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCdoaXN0b3J5JylcbiAgICAuc2VsZWN0KCcqJylcbiAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpO1xuICBjb25zdCBoaXN0b3J5TWFwID0gbmV3IE1hcChoaXN0b3J5Py5tYXAoKGgpID0+IFtoLnNvbmdfaWQsIGgubWludXRlc19saXN0ZW5lZF0pKTtcbiAgXG4gIC8vIDMuIEZldGNoIHBsYXllZCBzb25ncyB0byBleGNsdWRlIHRoZW1cbiAgY29uc3QgeyBkYXRhOiBwbGF5ZWRTb25nc0RhdGEgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgLmZyb20oJ3BsYXllZF9zb25ncycpXG4gICAgLnNlbGVjdCgnc29uZ19pZCcpXG4gICAgLmVxKCd1c2VyX2lkJywgdXNlcklkKTtcbiAgY29uc3QgcGxheWVkU29uZ0lkcyA9IG5ldyBTZXQocGxheWVkU29uZ3NEYXRhPy5tYXAocCA9PiBwLnNvbmdfaWQpIHx8IFtdKTtcblxuICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBzb25nc1xuICAgIC5maWx0ZXIoKHNvbmcpID0+IFxuICAgICAgc29uZy5maWxlX2lkICE9PSBjdXJyZW50U29uZy5maWxlX2lkICYmIC8vIGV4Y2x1ZGUgY3VycmVudCBzb25nXG4gICAgICAhcGxheWVkU29uZ0lkcy5oYXMoc29uZy5maWxlX2lkKSAvLyBleGNsdWRlIGFscmVhZHkgcGxheWVkIHNvbmdzXG4gICAgKVxuICAgIC5tYXAoKHNvbmcpID0+IHtcbiAgICAgIGxldCBzY29yZSA9IDA7XG5cbiAgICAgIC8vIPCfjq8gVGFnIE1hdGNoXG4gICAgICBjb25zdCBtYXRjaGluZ1RhZ3MgPSBzb25nLnRhZ3MuZmlsdGVyKCh0YWc6IHN0cmluZykgPT5cbiAgICAgICAgY3VycmVudFNvbmcudGFncy5pbmNsdWRlcyh0YWcpXG4gICAgICApO1xuICAgICAgc2NvcmUgKz0gbWF0Y2hpbmdUYWdzLmxlbmd0aCAqIDEwO1xuXG4gICAgICAvLyDwn5GkIEFydGlzdCBNYXRjaFxuICAgICAgaWYgKHNvbmcuYXJ0aXN0ID09PSBjdXJyZW50U29uZy5hcnRpc3QpIHtcbiAgICAgICAgc2NvcmUgKz0gMjA7XG4gICAgICB9XG5cbiAgICAgIC8vIOKPsSBMaXN0ZW5pbmcgSGlzdG9yeSBCb29zdFxuICAgICAgY29uc3QgbGlzdGVuZWRNaW51dGVzID0gaGlzdG9yeU1hcC5nZXQoc29uZy5maWxlX2lkKSB8fCAwO1xuICAgICAgc2NvcmUgKz0gbGlzdGVuZWRNaW51dGVzO1xuXG4gICAgICAvLyDinaTvuI8gTGlrZXMgQm9vc3RcbiAgICAgIHNjb3JlICs9IChzb25nLmxpa2VzIHx8IDApIC8gMTAwO1xuXG4gICAgICAvLyDwn5GBIFZpZXdzIEJvb3N0XG4gICAgICBzY29yZSArPSAoc29uZy52aWV3cyB8fCAwKSAvIDEwMDA7XG5cbiAgICAgIHJldHVybiB7IHNvbmcsIHNjb3JlIH07XG4gICAgfSk7XG5cbiAgLy8gNC4gU29ydCBhbmQgcmV0dXJuIHRvcCA1XG4gIGNvbnN0IHRvcDUgPSByZWNvbW1lbmRhdGlvbnNcbiAgICAuc29ydCgoYSwgYikgPT4gYi5zY29yZSAtIGEuc2NvcmUpXG4gICAgLnNsaWNlKDAsIDUpXG4gICAgLm1hcCgoZW50cnkpID0+IGNvbnZlcnREYXRhYmFzZVNvbmcoZW50cnkuc29uZywgZmFsc2UpKTsgLy8gQ29udmVydCB0byBVSSBmb3JtYXRcblxuICBjb25zb2xlLmxvZygn8J+OtSBQZXJzb25hbGl6ZWQgVG9wIDUgU29uZ3M6JywgdG9wNSk7XG4gIHJldHVybiB0b3A1O1xufVxuXG4gIC8vIEZldGNoIHVzZXIgcGxheWxpc3RzXG4gIGNvbnN0IGZldGNoUGxheWxpc3RzID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmICghdXNlcikge1xuICAgICAgc2V0UGxheWxpc3RzKFtdKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogcGxheWxpc3RzRGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwbGF5bGlzdHMnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIHBsYXlsaXN0X3NvbmdzIChcbiAgICAgICAgICAgIHNvbmdzICgqKVxuICAgICAgICAgIClcbiAgICAgICAgYClcbiAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlci5pZClcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgICBjb25zdCBjb252ZXJ0ZWRQbGF5bGlzdHM6IFBsYXlsaXN0W10gPSBwbGF5bGlzdHNEYXRhPy5tYXAocGxheWxpc3QgPT4ge1xuICAgICAgICBjb25zdCBwbGF5bGlzdFNvbmdzID0gcGxheWxpc3QucGxheWxpc3Rfc29uZ3M/Lm1hcCgocHM6IGFueSkgPT4gXG4gICAgICAgICAgY29udmVydERhdGFiYXNlU29uZyhwcy5zb25ncywgbGlrZWRTb25ncy5oYXMocHMuc29uZ3MuZmlsZV9pZCkpXG4gICAgICAgICkgfHwgW11cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiBwbGF5bGlzdC5pZC50b1N0cmluZygpLFxuICAgICAgICAgIG5hbWU6IHBsYXlsaXN0Lm5hbWUsXG4gICAgICAgICAgc29uZ0NvdW50OiBwbGF5bGlzdFNvbmdzLmxlbmd0aCxcbiAgICAgICAgICBpbWFnZTogcGxheWxpc3RTb25nc1swXT8uaW1hZ2UgfHwgJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzE3NjMwNzUvcGV4ZWxzLXBob3RvLTE3NjMwNzUuanBlZz9hdXRvPWNvbXByZXNzJmNzPXRpbnlzcmdiJnc9MzAwJyxcbiAgICAgICAgICBzb25nczogcGxheWxpc3RTb25nc1xuICAgICAgICB9XG4gICAgICB9KSB8fCBbXVxuXG4gICAgICBzZXRQbGF5bGlzdHMoY29udmVydGVkUGxheWxpc3RzKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwbGF5bGlzdHM6JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgLy8gVG9nZ2xlIGxpa2Ugc29uZ1xuICBjb25zdCB0b2dnbGVMaWtlID0gYXN5bmMgKHNvbmdJZDogc3RyaW5nKSA9PiB7XG4gIGlmICghdXNlcikgcmV0dXJuO1xuXG4gIGNvbnN0IHNvbmdGaWxlSWQgPSBwYXJzZUludChzb25nSWQpO1xuICBjb25zdCBpc0N1cnJlbnRseUxpa2VkID0gbGlrZWRTb25ncy5oYXMoc29uZ0ZpbGVJZCk7XG5cbiAgdHJ5IHtcbiAgICBpZiAoaXNDdXJyZW50bHlMaWtlZCkge1xuICAgICAgLy8gUmVtb3ZlIGZyb20gbGlrZWRfc29uZ3NcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdsaWtlZF9zb25ncycpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VyLmlkKVxuICAgICAgICAuZXEoJ3NvbmdfaWQnLCBzb25nRmlsZUlkKTtcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgICAgLy8gRGVjcmVtZW50IGxpa2VzXG4gICAgICBhd2FpdCBzdXBhYmFzZS5ycGMoJ2RlY3JlbWVudF9zb25nX2xpa2VzJywgeyBzb25nX2ZpbGVfaWQ6IHNvbmdGaWxlSWQgfSk7XG5cbiAgICAgIHNldExpa2VkU29uZ3MocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1NldCA9IG5ldyBTZXQocHJldik7XG4gICAgICAgIG5ld1NldC5kZWxldGUoc29uZ0ZpbGVJZCk7XG4gICAgICAgIHJldHVybiBuZXdTZXQ7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQWRkIHRvIGxpa2VkX3NvbmdzXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnbGlrZWRfc29uZ3MnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgIHNvbmdfaWQ6IHNvbmdGaWxlSWQsXG4gICAgICAgIH0pO1xuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuXG4gICAgICAvLyBJbmNyZW1lbnQgbGlrZXNcbiAgICAgIGF3YWl0IHN1cGFiYXNlLnJwYygnaW5jcmVtZW50X3NvbmdfbGlrZXMnLCB7IHNvbmdfZmlsZV9pZDogc29uZ0ZpbGVJZCB9KTtcblxuICAgICAgc2V0TGlrZWRTb25ncyhwcmV2ID0+IG5ldyBTZXQocHJldikuYWRkKHNvbmdGaWxlSWQpKTtcbiAgICB9XG5cbiAgICAvLyBVcGRhdGUgc29uZ3Mgc3RhdGVcbiAgICAvLyBVcGRhdGUgc29uZ3Mgc3RhdGVcbnNldFNvbmdzKHByZXZTb25ncyA9PlxuICBwcmV2U29uZ3MubWFwKHNvbmcgPT5cbiAgICBzb25nLmlkID09PSBzb25nSWRcbiAgICAgID8ge1xuICAgICAgICAgIC4uLnNvbmcsXG4gICAgICAgICAgaXNMaWtlZDogIWlzQ3VycmVudGx5TGlrZWQsXG4gICAgICAgICAgbGlrZXM6IHNvbmcubGlrZXMgKyAoaXNDdXJyZW50bHlMaWtlZCA/IC0xIDogMSksXG4gICAgICAgIH1cbiAgICAgIDogc29uZ1xuICApXG4pO1xuXG5cbiAgICAvLyBVcGRhdGUgcGxheWxpc3RzIHN0YXRlXG4gICAgc2V0UGxheWxpc3RzKHByZXZQbGF5bGlzdHMgPT5cbiAgICAgIHByZXZQbGF5bGlzdHMubWFwKHBsYXlsaXN0ID0+ICh7XG4gICAgICAgIC4uLnBsYXlsaXN0LFxuICAgICAgICBzb25nczogcGxheWxpc3Quc29uZ3MubWFwKHNvbmcgPT5cbiAgICAgICAgICBzb25nLmlkID09PSBzb25nSWRcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIC4uLnNvbmcsXG4gICAgICAgICAgICAgICAgaXNMaWtlZDogIWlzQ3VycmVudGx5TGlrZWQsXG4gICAgICAgICAgICAgICAgbGlrZXM6IHNvbmcubGlrZXMgKyAoaXNDdXJyZW50bHlMaWtlZCA/IC0xIDogMSksXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogc29uZ1xuICAgICAgICApLFxuICAgICAgfSkpXG4gICAgKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0b2dnbGluZyBsaWtlOicsIGVycm9yKTtcbiAgfVxufTtcblxuXG4gIC8vIENyZWF0ZSBwbGF5bGlzdFxuICBjb25zdCBjcmVhdGVQbGF5bGlzdCA9IGFzeW5jIChuYW1lOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXVzZXIpIHJldHVyblxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwbGF5bGlzdHMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgIG5hbWVcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG5cbiAgICAgIGNvbnN0IG5ld1BsYXlsaXN0OiBQbGF5bGlzdCA9IHtcbiAgICAgICAgaWQ6IGRhdGEuaWQudG9TdHJpbmcoKSxcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBzb25nQ291bnQ6IDAsXG4gICAgICAgIGltYWdlOiAnaHR0cHM6Ly9pbWFnZXMucGV4ZWxzLmNvbS9waG90b3MvMTc2MzA3NS9wZXhlbHMtcGhvdG8tMTc2MzA3NS5qcGVnP2F1dG89Y29tcHJlc3MmY3M9dGlueXNyZ2Imdz0zMDAnLFxuICAgICAgICBzb25nczogW11cbiAgICAgIH1cblxuICAgICAgc2V0UGxheWxpc3RzKHByZXYgPT4gWy4uLnByZXYsIG5ld1BsYXlsaXN0XSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcGxheWxpc3Q6JywgZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgLy8gRGVsZXRlIHBsYXlsaXN0XG4gIGNvbnN0IGRlbGV0ZVBsYXlsaXN0ID0gYXN5bmMgKHBsYXlsaXN0SWQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghdXNlcikgcmV0dXJuXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BsYXlsaXN0cycpXG4gICAgICAgIC5kZWxldGUoKVxuICAgICAgICAuZXEoJ2lkJywgcGFyc2VJbnQocGxheWxpc3RJZCkpXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXIuaWQpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcblxuICAgICAgc2V0UGxheWxpc3RzKHByZXYgPT4gcHJldi5maWx0ZXIocGxheWxpc3QgPT4gcGxheWxpc3QuaWQgIT09IHBsYXlsaXN0SWQpKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBwbGF5bGlzdDonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyBSZW5hbWUgcGxheWxpc3RcbiAgY29uc3QgcmVuYW1lUGxheWxpc3QgPSBhc3luYyAocGxheWxpc3RJZDogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXVzZXIpIHJldHVyblxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwbGF5bGlzdHMnKVxuICAgICAgICAudXBkYXRlKHsgbmFtZTogbmV3TmFtZSB9KVxuICAgICAgICAuZXEoJ2lkJywgcGFyc2VJbnQocGxheWxpc3RJZCkpXG4gICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXIuaWQpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcblxuICAgICAgc2V0UGxheWxpc3RzKHByZXYgPT4gXG4gICAgICAgIHByZXYubWFwKHBsYXlsaXN0ID0+IFxuICAgICAgICAgIHBsYXlsaXN0LmlkID09PSBwbGF5bGlzdElkIFxuICAgICAgICAgICAgPyB7IC4uLnBsYXlsaXN0LCBuYW1lOiBuZXdOYW1lIH1cbiAgICAgICAgICAgIDogcGxheWxpc3RcbiAgICAgICAgKVxuICAgICAgKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW5hbWluZyBwbGF5bGlzdDonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgc29uZyB0byBwbGF5bGlzdFxuICBjb25zdCBhZGRTb25nVG9QbGF5bGlzdCA9IGFzeW5jIChwbGF5bGlzdElkOiBzdHJpbmcsIHNvbmc6IFNvbmcpID0+IHtcbiAgICBpZiAoIXVzZXIpIHJldHVyblxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdwbGF5bGlzdF9zb25ncycpXG4gICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgIHBsYXlsaXN0X2lkOiBwYXJzZUludChwbGF5bGlzdElkKSxcbiAgICAgICAgICBzb25nX2lkOiBzb25nLmZpbGVfaWRcbiAgICAgICAgfSlcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgICBzZXRQbGF5bGlzdHMocHJldiA9PiBcbiAgICAgICAgcHJldi5tYXAocGxheWxpc3QgPT4ge1xuICAgICAgICAgIGlmIChwbGF5bGlzdC5pZCA9PT0gcGxheWxpc3RJZCkge1xuICAgICAgICAgICAgY29uc3Qgc29uZ0V4aXN0cyA9IHBsYXlsaXN0LnNvbmdzLnNvbWUocyA9PiBzLmlkID09PSBzb25nLmlkKVxuICAgICAgICAgICAgaWYgKCFzb25nRXhpc3RzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRTb25ncyA9IFsuLi5wbGF5bGlzdC5zb25ncywgc29uZ11cbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAuLi5wbGF5bGlzdCxcbiAgICAgICAgICAgICAgICBzb25nczogdXBkYXRlZFNvbmdzLFxuICAgICAgICAgICAgICAgIHNvbmdDb3VudDogdXBkYXRlZFNvbmdzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpbWFnZTogdXBkYXRlZFNvbmdzWzBdPy5pbWFnZSB8fCBwbGF5bGlzdC5pbWFnZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBwbGF5bGlzdFxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgc29uZyB0byBwbGF5bGlzdDonLCBlcnJvcilcbiAgICB9XG4gIH1cblxuICAvLyBSZW1vdmUgc29uZyBmcm9tIHBsYXlsaXN0XG4gIGNvbnN0IHJlbW92ZVNvbmdGcm9tUGxheWxpc3QgPSBhc3luYyAocGxheWxpc3RJZDogc3RyaW5nLCBzb25nSWQ6IHN0cmluZykgPT4ge1xuICAgIGlmICghdXNlcikgcmV0dXJuXG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3BsYXlsaXN0X3NvbmdzJylcbiAgICAgICAgLmRlbGV0ZSgpXG4gICAgICAgIC5lcSgncGxheWxpc3RfaWQnLCBwYXJzZUludChwbGF5bGlzdElkKSlcbiAgICAgICAgLmVxKCdzb25nX2lkJywgcGFyc2VJbnQoc29uZ0lkKSlcblxuICAgICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvclxuXG4gICAgICBzZXRQbGF5bGlzdHMocHJldiA9PiBcbiAgICAgICAgcHJldi5tYXAocGxheWxpc3QgPT4ge1xuICAgICAgICAgIGlmIChwbGF5bGlzdC5pZCA9PT0gcGxheWxpc3RJZCkge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZFNvbmdzID0gcGxheWxpc3Quc29uZ3MuZmlsdGVyKHNvbmcgPT4gc29uZy5pZCAhPT0gc29uZ0lkKVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgLi4ucGxheWxpc3QsXG4gICAgICAgICAgICAgIHNvbmdzOiB1cGRhdGVkU29uZ3MsXG4gICAgICAgICAgICAgIHNvbmdDb3VudDogdXBkYXRlZFNvbmdzLmxlbmd0aCxcbiAgICAgICAgICAgICAgaW1hZ2U6IHVwZGF0ZWRTb25nc1swXT8uaW1hZ2UgfHwgJ2h0dHBzOi8vaW1hZ2VzLnBleGVscy5jb20vcGhvdG9zLzE3NjMwNzUvcGV4ZWxzLXBob3RvLTE3NjMwNzUuanBlZz9hdXRvPWNvbXByZXNzJmNzPXRpbnlzcmdiJnc9MzAwJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcGxheWxpc3RcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVtb3Zpbmcgc29uZyBmcm9tIHBsYXlsaXN0OicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBsYXN0IHNvbmcgaW4gdXNlciBwcm9maWxlXG4gIGNvbnN0IHVwZGF0ZUxhc3RTb25nID0gYXN5bmMgKHNvbmdJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCF1c2VyKSByZXR1cm5cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAudXBkYXRlKHsgbGFzdF9zb25nX2ZpbGVfaWQ6IHBhcnNlSW50KHNvbmdJZCkgfSlcbiAgICAgICAgLmVxKCdpZCcsIHVzZXIuaWQpXG5cbiAgICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3JcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgbGFzdCBzb25nOicsIGVycm9yKVxuICAgIH1cbiAgfVxuXG4gIC8vIFJlY29yZCBsaXN0ZW5pbmcgaGlzdG9yeSB3aXRoIHByb3BlciB0aW1lIHRyYWNraW5nXG4gIGNvbnN0IHJlY29yZExpc3RlbmluZ0hpc3RvcnkgPSBhc3luYyAoc29uZ0lkOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXVzZXIpIHJldHVyblxuXG4gICAgLy8gSWYgdGhlcmUncyBhIHByZXZpb3VzIHNvbmcgcGxheWluZywgcmVjb3JkIGl0cyBsaXN0ZW5pbmcgdGltZVxuICAgICAgaWYgKGN1cnJlbnRTb25nUmVmLmN1cnJlbnQgJiYgY3VycmVudFNvbmdTdGFydFRpbWUpIHtcbiAgICBjb25zdCBlbmRUaW1lID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBtaW51dGVzTGlzdGVuZWQgPSAoZW5kVGltZS5nZXRUaW1lKCkgLSBjdXJyZW50U29uZ1N0YXJ0VGltZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCk7XG5cbiAgICBpZiAobWludXRlc0xpc3RlbmVkID4gMC4xKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBtaW51dGVzID0gTWF0aC5yb3VuZChtaW51dGVzTGlzdGVuZWQgKiAxMDApIC8gMTAwO1xuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5ycGMoJ3Vwc2VydF9oaXN0b3J5X21pbnV0ZXMnLCB7XG4gICAgICAgICAgdXNlcl91dWlkOiB1c2VyLmlkLFxuICAgICAgICAgIHNvbmdfZmlsZV9pZDogcGFyc2VJbnQoY3VycmVudFNvbmdSZWYuY3VycmVudCksXG4gICAgICAgICAgbWludXRlczogbWludXRlcyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHJlY29yZGluZyBzb25nIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgSGlzdG9yeSB1cGRhdGVkOiArJHttaW51dGVzfSBtaW5zIGZvciBzb25nICR7Y3VycmVudFNvbmdSZWYuY3VycmVudH1gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBhZGQgdG8gcGxheWVkIHNvbmdzXG4gICAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ3BsYXllZF9zb25ncycpXG4gICAgICAgICAgLnVwc2VydCh7XG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICAgICAgc29uZ19pZDogcGFyc2VJbnQoY3VycmVudFNvbmdSZWYuY3VycmVudCksXG4gICAgICAgICAgICBwbGF5ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVjb3JkaW5nIHByZXZpb3VzIHNvbmcgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICAgIC8vIFNldCBuZXcgc29uZyBhcyBjdXJyZW50XG4gICAgY3VycmVudFNvbmdSZWYuY3VycmVudCA9IHNvbmdJZFxuICAgIHNldEN1cnJlbnRTb25nU3RhcnRUaW1lKG5ldyBEYXRlKCkpXG4gICAgXG4gICAgLy8gVXBkYXRlIGxhc3Qgc29uZyBpbiB1c2VyIHByb2ZpbGVcbiAgICBhd2FpdCB1cGRhdGVMYXN0U29uZyhzb25nSWQpXG50cnkge1xuICBhd2FpdCBzdXBhYmFzZS5ycGMoJ2luY3JlbWVudF9zb25nX3ZpZXdzJywgeyBzb25nX2ZpbGVfaWQ6IHBhcnNlSW50KHNvbmdJZCkgfSk7XG59IGNhdGNoIChlcnJvcikge1xuICBjb25zb2xlLmVycm9yKCdFcnJvciBpbmNyZW1lbnRpbmcgc29uZyB2aWV3czonLCBlcnJvcik7XG59XG5cbiAgfVxuXG4gIC8vIFN0b3AgY3VycmVudCBzb25nIHRyYWNraW5nICh3aGVuIHBsYXllciBpcyBjbG9zZWQpXG4gIGNvbnN0IHN0b3BDdXJyZW50U29uZ1RyYWNraW5nID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChjdXJyZW50U29uZ1JlZi5jdXJyZW50ICYmIGN1cnJlbnRTb25nU3RhcnRUaW1lICYmIHVzZXIpIHtcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZSgpXG4gICAgICBjb25zdCBtaW51dGVzTGlzdGVuZWQgPSAoZW5kVGltZS5nZXRUaW1lKCkgLSBjdXJyZW50U29uZ1N0YXJ0VGltZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MClcbiAgICAgIFxuICAgICAgaWYgKG1pbnV0ZXNMaXN0ZW5lZCA+IDAuMSkge1xuICB0cnkge1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLnJvdW5kKG1pbnV0ZXNMaXN0ZW5lZCAqIDEwMCkgLyAxMDA7XG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCd1cHNlcnRfaGlzdG9yeV9taW51dGVzJywge1xuICAgICAgdXNlcl91dWlkOiB1c2VyLmlkLFxuICAgICAgc29uZ19maWxlX2lkOiBwYXJzZUludChjdXJyZW50U29uZ1JlZi5jdXJyZW50KSxcbiAgICAgIG1pbnV0ZXM6IG1pbnV0ZXMsXG4gICAgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciByZWNvcmRpbmcgc29uZyBoaXN0b3J5IG9uIHN0b3A6JywgZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhg8J+bkSBIaXN0b3J5IHVwZGF0ZWQgb24gc3RvcDogKyR7bWludXRlc30gbWlucyBmb3Igc29uZyAke2N1cnJlbnRTb25nUmVmLmN1cnJlbnR9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFsc28gYWRkIHRvIHBsYXllZCBzb25nc1xuICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncGxheWVkX3NvbmdzJylcbiAgICAgIC51cHNlcnQoe1xuICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLFxuICAgICAgICBzb25nX2lkOiBwYXJzZUludChjdXJyZW50U29uZ1JlZi5jdXJyZW50KSxcbiAgICAgICAgcGxheWVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlY29yZGluZyBmaW5hbCBzb25nIGhpc3Rvcnk6JywgZXJyb3IpO1xuICB9XG59XG5cbiAgICB9XG5cbiAgICBjdXJyZW50U29uZ1JlZi5jdXJyZW50ID0gbnVsbFxuICAgIHNldEN1cnJlbnRTb25nU3RhcnRUaW1lKG51bGwpXG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGxvYWREYXRhID0gYXN5bmMgKCkgPT4ge1xuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIC8vIFJlc2V0IGRhdGEgd2hlbiB1c2VyIGxvZ3Mgb3V0XG4gICAgICAgIHNldFNvbmdzKFtdKVxuICAgICAgICBzZXRQbGF5bGlzdHMoW10pXG4gICAgICAgIHNldExpa2VkU29uZ3MobmV3IFNldCgpKVxuICAgICAgICBzZXRMYXN0UGxheWVkU29uZyhudWxsKVxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0TG9hZGluZyh0cnVlKVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbZmV0Y2hTb25ncygpLCBmZXRjaFBsYXlsaXN0cygpXSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgZGF0YTonLCBlcnJvcilcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHNldExvYWRpbmcoZmFsc2UpXG4gICAgICB9XG4gICAgfVxuXG4gICAgbG9hZERhdGEoKVxuICB9LCBbdXNlcl0pXG5cbiAgcmV0dXJuIHtcbiAgICBzb25ncyxcbiAgICBwbGF5bGlzdHMsXG4gICAgbGlrZWRTb25nczogc29uZ3MuZmlsdGVyKHNvbmcgPT4gc29uZy5pc0xpa2VkKSxcbiAgICBsYXN0UGxheWVkU29uZyxcbiAgICBsb2FkaW5nLFxuICAgIHRvZ2dsZUxpa2UsXG4gICAgY3JlYXRlUGxheWxpc3QsXG4gICAgZGVsZXRlUGxheWxpc3QsXG4gICAgcmVuYW1lUGxheWxpc3QsXG4gICAgYWRkU29uZ1RvUGxheWxpc3QsXG4gICAgcmVtb3ZlU29uZ0Zyb21QbGF5bGlzdCxcbiAgICByZWNvcmRMaXN0ZW5pbmdIaXN0b3J5LFxuICAgIHN0b3BDdXJyZW50U29uZ1RyYWNraW5nLFxuICAgIHJlZnJlc2hEYXRhOiAoKSA9PiB7XG4gICAgICBmZXRjaFNvbmdzKClcbiAgICAgIGZldGNoUGxheWxpc3RzKClcbiAgICB9LFxuICAgIGdldFBlcnNvbmFsaXplZFNvbmdzXG4gIH1cbn0iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJzdXBhYmFzZSIsInVzZVN1cGFiYXNlRGF0YSIsInVzZXIiLCJzb25ncyIsInNldFNvbmdzIiwicGxheWxpc3RzIiwic2V0UGxheWxpc3RzIiwibGlrZWRTb25ncyIsInNldExpa2VkU29uZ3MiLCJTZXQiLCJsYXN0UGxheWVkU29uZyIsInNldExhc3RQbGF5ZWRTb25nIiwibG9hZGluZyIsInNldExvYWRpbmciLCJjdXJyZW50U29uZ1N0YXJ0VGltZSIsInNldEN1cnJlbnRTb25nU3RhcnRUaW1lIiwiY3VycmVudFNvbmdSZWYiLCJjb252ZXJ0RGF0YWJhc2VTb25nIiwiZGJTb25nIiwiaXNMaWtlZCIsImZpbGVfaWQiLCJpbWdfaWQiLCJuYW1lIiwiYXJ0aXN0IiwibGFuZ3VhZ2UiLCJ0YWdzIiwidmlld3MiLCJsaWtlcyIsImlkIiwidG9TdHJpbmciLCJpbWFnZSIsImZldGNoU29uZ3MiLCJkYXRhIiwic29uZ3NEYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0Iiwib3JkZXIiLCJhc2NlbmRpbmciLCJ1c2VyTGlrZWRTb25ncyIsImxpa2VkRGF0YSIsImVxIiwibWFwIiwiaXRlbSIsInNvbmdfaWQiLCJjb252ZXJ0ZWRTb25ncyIsInNvbmciLCJoYXMiLCJzb3J0ZWRTb25ncyIsInNvcnQiLCJhIiwiYiIsImFTY29yZSIsImJTY29yZSIsInVzZXJEYXRhIiwic2luZ2xlIiwibGFzdF9zb25nX2ZpbGVfaWQiLCJsYXN0U29uZyIsImZpbmQiLCJjb25zb2xlIiwiZ2V0UGVyc29uYWxpemVkU29uZ3MiLCJ1c2VySWQiLCJjdXJyZW50U29uZyIsInNvbmdzRXJyb3IiLCJoaXN0b3J5IiwiaGlzdG9yeU1hcCIsIk1hcCIsImgiLCJtaW51dGVzX2xpc3RlbmVkIiwicGxheWVkU29uZ3NEYXRhIiwicGxheWVkU29uZ0lkcyIsInAiLCJyZWNvbW1lbmRhdGlvbnMiLCJmaWx0ZXIiLCJzY29yZSIsIm1hdGNoaW5nVGFncyIsInRhZyIsImluY2x1ZGVzIiwibGVuZ3RoIiwibGlzdGVuZWRNaW51dGVzIiwiZ2V0IiwidG9wNSIsInNsaWNlIiwiZW50cnkiLCJsb2ciLCJmZXRjaFBsYXlsaXN0cyIsInBsYXlsaXN0c0RhdGEiLCJjb252ZXJ0ZWRQbGF5bGlzdHMiLCJwbGF5bGlzdCIsInBsYXlsaXN0U29uZ3MiLCJwbGF5bGlzdF9zb25ncyIsInBzIiwic29uZ0NvdW50IiwidG9nZ2xlTGlrZSIsInNvbmdJZCIsInNvbmdGaWxlSWQiLCJwYXJzZUludCIsImlzQ3VycmVudGx5TGlrZWQiLCJkZWxldGUiLCJycGMiLCJzb25nX2ZpbGVfaWQiLCJwcmV2IiwibmV3U2V0IiwiaW5zZXJ0IiwidXNlcl9pZCIsImFkZCIsInByZXZTb25ncyIsInByZXZQbGF5bGlzdHMiLCJjcmVhdGVQbGF5bGlzdCIsIm5ld1BsYXlsaXN0IiwiZGVsZXRlUGxheWxpc3QiLCJwbGF5bGlzdElkIiwicmVuYW1lUGxheWxpc3QiLCJuZXdOYW1lIiwidXBkYXRlIiwiYWRkU29uZ1RvUGxheWxpc3QiLCJwbGF5bGlzdF9pZCIsInNvbmdFeGlzdHMiLCJzb21lIiwicyIsInVwZGF0ZWRTb25ncyIsInJlbW92ZVNvbmdGcm9tUGxheWxpc3QiLCJ1cGRhdGVMYXN0U29uZyIsInJlY29yZExpc3RlbmluZ0hpc3RvcnkiLCJjdXJyZW50IiwiZW5kVGltZSIsIkRhdGUiLCJtaW51dGVzTGlzdGVuZWQiLCJnZXRUaW1lIiwibWludXRlcyIsIk1hdGgiLCJyb3VuZCIsInVzZXJfdXVpZCIsInVwc2VydCIsInBsYXllZF9hdCIsInRvSVNPU3RyaW5nIiwic3RvcEN1cnJlbnRTb25nVHJhY2tpbmciLCJsb2FkRGF0YSIsIlByb21pc2UiLCJhbGwiLCJyZWZyZXNoRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useSupabaseData.ts\n"));

/***/ })

});